/*! For license information please see 7.df182480.chunk.js.LICENSE.txt */
(this.webpackJsonpredactics=this.webpackJsonpredactics||[]).push([[7],{540:function(e,t,a){"use strict";var n=a(0),r=n.createContext({});t.a=r},543:function(e,t,a){"use strict";var n=a(547).CopyToClipboard;n.CopyToClipboard=n,e.exports=n},547:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var n=o(a(0)),r=o(a(548));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?p(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g=function(e){function t(){var e,a;s(this,t);for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];return f(p(a=d(this,(e=h(t)).call.apply(e,[this].concat(l)))),"onClick",(function(e){var t=a.props,o=t.text,l=t.onCopy,i=t.children,c=t.options,s=n.default.Children.only(i),u=(0,r.default)(o,c);l&&l(o,u),s&&s.props&&"function"===typeof s.props.onClick&&s.props.onClick(e)})),a}var a,o,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),a=t,(o=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),a=c(e,["text","onCopy","options","children"]),r=n.default.Children.only(t);return n.default.cloneElement(r,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{onClick:this.onClick}))}}])&&u(a.prototype,o),l&&u(a,l),t}(n.default.PureComponent);t.CopyToClipboard=g,f(g,"defaultProps",{onCopy:void 0,options:void 0})},548:function(e,t,a){"use strict";var n=a(549),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,o,l,i,c,s,u=!1;t||(t={}),a=t.debug||!1;try{if(l=n(),i=document.createRange(),c=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),"undefined"===typeof n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=r[t.format]||r.default;window.clipboardData.setData(o,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(s),i.selectNodeContents(s),c.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(d){a&&console.error("unable to copy using execCommand: ",d),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(d){a&&console.error("unable to copy using clipboardData: ",d),a&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(i):c.removeAllRanges()),s&&document.body.removeChild(s),l()}return u}},549:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},550:function(e,t,a){"use strict";var n=a(1),r=a(4),o=a(0),l=(a(3),a(5)),i=a(189),c=a(477),s=a(6),u=a(540),d=o.forwardRef((function(e,t){var a=e.children,s=e.classes,d=e.className,h=e.expandIcon,p=e.IconButtonProps,m=e.onBlur,f=e.onClick,g=e.onFocusVisible,y=Object(r.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),b=o.useState(!1),v=b[0],E=b[1],w=o.useContext(u.a),C=w.disabled,S=void 0!==C&&C,x=w.expanded,k=w.toggle;return o.createElement(i.a,Object(n.a)({focusRipple:!1,disableRipple:!0,disabled:S,component:"div","aria-expanded":x,className:Object(l.a)(s.root,d,S&&s.disabled,x&&s.expanded,v&&s.focused),onFocusVisible:function(e){E(!0),g&&g(e)},onBlur:function(e){E(!1),m&&m(e)},onClick:function(e){k&&k(e),f&&f(e)},ref:t},y),o.createElement("div",{className:Object(l.a)(s.content,x&&s.expanded)},a),h&&o.createElement(c.a,Object(n.a)({className:Object(l.a)(s.expandIcon,x&&s.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},p),h))}));t.a=Object(s.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,3),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.grey[300]},"&$disabled":{opacity:.38}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiExpansionPanelSummary"})(d)},551:function(e,t,a){"use strict";var n=a(1),r=a(197),o=a(196),l=a(121),i=a(198);var c=a(120),s=a(4),u=a(0),d=(a(72),a(3),a(5)),h=a(526),p=a(188),m=a(6),f=a(540),g=a(195),y=u.forwardRef((function(e,t){var a,m=e.children,y=e.classes,b=e.className,v=e.defaultExpanded,E=void 0!==v&&v,w=e.disabled,C=void 0!==w&&w,S=e.expanded,x=e.onChange,k=e.square,O=void 0!==k&&k,j=e.TransitionComponent,A=void 0===j?h.a:j,L=e.TransitionProps,N=Object(s.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),P=Object(g.a)({controlled:S,default:E,name:"ExpansionPanel",state:"expanded"}),I=Object(c.a)(P,2),D=I[0],T=I[1],R=u.useCallback((function(e){T(!D),x&&x(e,!D)}),[D,x,T]),_=u.Children.toArray(m),B=(a=_,Object(r.a)(a)||Object(o.a)(a)||Object(l.a)(a)||Object(i.a)()),K=B[0],z=B.slice(1),H=u.useMemo((function(){return{expanded:D,disabled:C,toggle:R}}),[D,C,R]);return u.createElement(p.a,Object(n.a)({className:Object(d.a)(y.root,b,D&&y.expanded,C&&y.disabled,!O&&y.rounded),ref:t,square:O},N),u.createElement(f.a.Provider,{value:H},K),u.createElement(A,Object(n.a)({in:D,timeout:"auto"},L),u.createElement("div",{"aria-labelledby":K.props.id,id:K.props["aria-controls"],role:"region"},z)))}));t.a=Object(m.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiExpansionPanel"})(y)},571:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(3),l=a.n(o);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=function(e){var t=e.color,a=e.size,n=c(e,["color","size"]);return r.a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},n),r.a.createElement("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),r.a.createElement("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}))};s.propTypes={color:l.a.string,size:l.a.oneOfType([l.a.string,l.a.number])},s.defaultProps={color:"currentColor",size:"24"},t.a=s},609:function(e,t,a){"use strict";a.r(t);var n,r=a(97),o=a(79),l=a(80),i=a(55),c=a(82),s=a(81),u=a(14),d=a(0),h=a.n(d),p=a(10),m=a(194),f=a.n(m),g=a(543),y=a(556),b=a(519),v=a(612),E=a(588),w=a(515),C=a(611),S=a(477),x=a(532),k=a(590),O=a(617),j=a(516),A=a(534),L=a(78),N=a(514),P=a(510),I=a(511),D=a(512),T=a(598),R=a(591),_=a(54),B=Object(_.a)(h.a.createElement("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen"),K=a(592),z=a(597),H=a(571),V=a(536),U=a(607),F=a(119),W=a(151),G=a(149),q=a(561),M=a.n(q),J=a(6),$=a(555),X=a(566),Y=a(513),Z=a(188),Q=a(551),ee=a(550),te=a(593),ae=a(594),ne=a(506),re=a(589),oe=a(595),le=a(560),ie=a(599),ce=Object(_.a)(h.a.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning"),se=a(596),ue=a(525);function de(){de=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,l=Object.create(o.prototype),i=new k(r||[]);return n(l,"_invoke",{value:w(e,a,i)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(A){return{type:"throw",arg:A}}}e.wrap=s;var d={};function h(){}function p(){}function m(){}var f={};c(f,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(O([])));y&&y!==t&&a.call(y,o)&&(f=y);var b=m.prototype=h.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function l(){return new t((function(r,l){!function n(r,o,l,i){var c=u(e[r],e,o);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,i)}))}i(c.arg)}(n,o,r,l)}))}return r=r?r.then(l,l):l()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return j()}for(a.method=r,a.arg=o;;){var l=a.delegate;if(l){var i=C(l,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var c=u(e,t,a);if("normal"===c.type){if(n=a.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n="completed",a.method="throw",a.arg=c.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(E.prototype),c(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var l=new E(s(t,a,n,r),o);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},v(b),c(b,i,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var he=Object(p.c)($.a)(V.b),pe=Object(p.c)(E.a)(V.b),me=Object(p.c)(pe)(n||(n=Object(u.a)(["\n  min-width: 300px;\n  max-width: 300px;\n"]))),fe=Object(J.a)({root:{display:"block"}})(X.a),ge=Object(p.c)(b.a)(V.b),ye=Object(p.c)(w.a)(V.b),be=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var r=!1;return n.props.agent.inputs&&n.props.inputs.forEach((function(e){var t;e.enableSSL&&(null===(t=n.props.agent.inputs)||void 0===t?void 0:t.includes(e.uuid))&&(r=!0)})),n.state={saveButtonDisabled:!0,helmCmd:"",helmCmdHistory:[],selectedHelmCmd:"",deleteAgent:!1,verboseSelected:!1,helmConfig:"",sslSecrets:[],errors:{agentName:!1,namespace:!1,configPath:!1},agent:n.props.agent,agentName:n.props.agent.name||"",namespace:n.props.agent.namespace||"",configPath:n.props.agent.configPath||"",useNodeSelector:n.props.useNodeSelector,selectedInputs:n.props.agent.inputs||[],showTLSInstructions:r,nodeSelectorLabelKey:n.props.useNodeSelector?n.props.agent.nodeSelector.split(".")[0]:"",nodeSelectorLabelValue:n.props.useNodeSelector?n.props.agent.nodeSelector.split(".")[1]:""},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.setSaveButtonDisabled=n.setSaveButtonDisabled.bind(Object(i.a)(n)),n.toggleNodeSelector=n.toggleNodeSelector.bind(Object(i.a)(n)),n.deleteAgent=n.deleteAgent.bind(Object(i.a)(n)),n.updateAgent=n.updateAgent.bind(Object(i.a)(n)),n.deleteAgentConfirm=n.deleteAgentConfirm.bind(Object(i.a)(n)),n.closeDeleteAgent=n.closeDeleteAgent.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(de().mark((function e(){var t,a,n,r,o,l,i,c;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/agent/").concat(this.props.agent.uuid,"/helmCmd"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,n=a.helmCmd,r=a.helmCmdHistory,e.next=11,fetch("".concat(this.context.apiUrl,"/agent/").concat(this.props.agent.uuid,"/helmConfig"),{credentials:"include"});case 11:return o=e.sent,e.next=14,o.json();case 14:l=e.sent,i=l.helmConfig,c=l.sslSecrets,this.setSaveButtonDisabled(),this.setState({helmCmd:n,helmConfig:i,sslSecrets:c,helmCmdHistory:r,selectedHelmCmd:r.length?r[0].uuid:""}),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(0);case 22:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"statusIcon",value:function(){return this.props.agent.agentInstallationDate?h.a.createElement(ie.a,{style:{color:W.a[500],fontSize:50}}):h.a.createElement(ce,{style:{color:G.a[500],fontSize:50}})}},{key:"setSaveButtonDisabled",value:function(){this.setState({saveButtonDisabled:!(this.state.agentName&&this.state.namespace&&this.state.configPath)})}},{key:"handleChange",value:function(e){var t=this,a={selectedInputs:this.state.selectedInputs};if(e.target.name.match(/^inputsource_/)){var n=e.target.name.replace(/^inputsource_/,"");e.target.checked&&!a.selectedInputs.includes(n)?a.selectedInputs.push(n):a.selectedInputs=a.selectedInputs.filter((function(e){return e!==n}))}else a[e.target.name]=e.target.value;this.setState(a,(function(){t.setSaveButtonDisabled()}))}},{key:"deleteAgent",value:function(){this.setState({deleteAgent:!0})}},{key:"deleteAgentConfirm",value:function(){var e=Object(r.a)(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.deleteAgent(this.props.agent.uuid);case 2:this.setState({deleteAgent:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeDeleteAgent",value:function(){this.setState({deleteAgent:!1})}},{key:"renderDeleteAgent",value:function(){var e="helm uninstall -n ".concat(this.state.namespace," redactics");return h.a.createElement(x.a,{mt:4},h.a.createElement(ge,{container:!0,justify:"space-between",mt:12},h.a.createElement(ge,{item:!0,xs:10}),h.a.createElement(ge,{item:!0},h.a.createElement(ye,{variant:"contained",color:"default",size:"small",onClick:this.deleteAgent},h.a.createElement(se.a,null),"\xa0 Delete Agent"))),h.a.createElement(P.a,{open:this.state.deleteAgent,onClose:this.closeDeleteAgent,"aria-labelledby":"delete-agent-title","aria-describedby":"legend-description"},h.a.createElement(I.a,{id:"delete-agent-title"},"Delete This Agent?"),h.a.createElement(D.a,null,h.a.createElement(Y.a,{id:"delete-agent-description"},"Clicking ",h.a.createElement("b",null,"Delete")," will delete the settings for this agent, but to remove this agent from your cluster locally, please enter the following (assuming this namespace contains only Redactics assets). Any workflows associated with this agent will need to be reassigned to a new agent for the config to be put to use.",h.a.createElement(x.a,{mt:4},h.a.createElement(g.CopyToClipboard,{text:e,onCopy:this.props.clipboardCopy},h.a.createElement(ye,{variant:"outlined",size:"small",color:"secondary"},h.a.createElement(H.a,null))),h.a.createElement("pre",null,e))),h.a.createElement(x.a,{mt:4},h.a.createElement(N.a,null,h.a.createElement(ye,{onClick:this.closeDeleteAgent},"Cancel"),h.a.createElement(ye,{color:"secondary",onClick:this.deleteAgentConfirm},"Delete"))))))}},{key:"toggleNodeSelector",value:function(e){this.setState({useNodeSelector:e.target.checked})}},{key:"updateAgent",value:function(){var e=Object(r.a)(de().mark((function e(){var t,a,n,r,o,l,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},a=this.state.agent.uuid,n=this.state.useNodeSelector?"".concat(this.state.nodeSelectorLabelKey,".").concat(this.state.nodeSelectorLabelValue):"",!this.props.handleErrors({agentName:this.state.agentName,namespace:this.state.namespace,useNodeSelector:this.state.useNodeSelector,nodeSelectorLabelKey:this.state.nodeSelectorLabelKey,nodeSelectorLabelValue:this.state.nodeSelectorLabelValue,configPath:this.state.configPath,errors:this.state.errors})){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,fetch("".concat(this.context.apiUrl,"/agent/").concat(a),{method:"put",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:this.state.agentName,namespace:this.state.namespace,nodeSelector:n,configPath:this.state.configPath,inputs:this.state.selectedInputs})});case 9:return e.next=11,fetch("".concat(this.context.apiUrl,"/agent/").concat(a,"/helmCmd"),{credentials:"include"});case 11:return r=e.sent,e.next=14,r.json();case 14:o=e.sent,l=o.helmCmd,i=o.helmCmdHistory,t.helmCmd=l,t.helmCmdHistory=i,this.props.updateAgentSnackbar(),this.setState(t),e.next=24;break;case 22:e.prev=22,e.t0=e.catch(6);case 24:case"end":return e.stop()}}),e,this,[[6,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"displayAgentStatus",value:function(){if(this.props.agent.agentInstallationDate){var e=this.props.agent.lastHeartBeatDate?h.a.createElement("div",null,"Last configuration update date: ",h.a.createElement("b",null,h.a.createElement(M.a,{fromNow:!0},new Date(this.props.agent.lastHeartBeatDate)))):"";return h.a.createElement(x.a,null,h.a.createElement(L.a,{variant:"h6",gutterBottom:!0},"Redactics Agent Info"),h.a.createElement(x.a,{mt:2},h.a.createElement("div",null,"Version: ",h.a.createElement("b",null,this.props.agent.lastAgentVersion)),h.a.createElement("div",null,"Initial installation date: ",h.a.createElement("b",null,h.a.createElement(M.a,{fromNow:!0},new Date(this.props.agent.agentInstallationDate)))),e))}return h.a.createElement(x.a,null,h.a.createElement(L.a,{variant:"h6",gutterBottom:!0},"Awaiting Agent Reporting..."))}},{key:"agentInfo",value:function(){var e=this;return h.a.createElement(h.a.Fragment,null,this.displayAgentStatus(),h.a.createElement(x.a,{mt:4},h.a.createElement(Z.a,{variant:"outlined"},h.a.createElement(Q.a,null,h.a.createElement(ee.a,{expandIcon:h.a.createElement(ue.a,null)},h.a.createElement(L.a,null,"Agent Settings")),h.a.createElement(fe,null,this.props.errors.JSX,h.a.createElement(x.a,{mt:2},h.a.createElement(me,{fullWidth:!0,variant:"outlined"},h.a.createElement(v.a,{error:this.state.errors.agentName,name:"agentName",label:"Agent Name",value:this.state.agentName,onChange:this.handleChange,InputProps:{endAdornment:h.a.createElement(k.a,{position:"end"},h.a.createElement(O.a,{title:"Unique name used to identify this agent (e.g. cluster or environment name)",placement:"right-start"},h.a.createElement(R.a,null)))}}))),h.a.createElement(x.a,{mt:4},h.a.createElement(me,{fullWidth:!0,variant:"outlined"},h.a.createElement(v.a,{error:this.state.errors.namespace,name:"namespace",label:"Kubernetes Namespace",value:this.state.namespace,onChange:this.handleChange,InputProps:{endAdornment:h.a.createElement(k.a,{position:"end"},h.a.createElement(O.a,{title:"Kubernetes namespace used for the Redactics Agent",placement:"right-start"},h.a.createElement(R.a,null)))}}))),h.a.createElement(x.a,{mt:4},h.a.createElement(j.a,{control:h.a.createElement(A.a,{checked:this.state.useNodeSelector,onChange:this.toggleNodeSelector,name:"useNodeSelector",color:"primary"}),label:"Assign Agent Pods to Specific Nodes (optional)"})," ",h.a.createElement(O.a,{title:"Optional Kubernetes nodeSelector label for Redactics Agent (allows prevent unwanted resource competition during export jobs), requires label key and value",placement:"right-start"},h.a.createElement(R.a,null))),h.a.createElement(x.a,{mt:4,display:this.state.useNodeSelector?"block":"none"},h.a.createElement(x.a,null,h.a.createElement(me,{fullWidth:!0,variant:"outlined"},h.a.createElement(v.a,{error:this.state.errors.nodeSelectorLabelKey,name:"nodeSelectorLabelKey",label:"Kubernetes Node Selector Label Key",value:this.state.nodeSelectorLabelKey,onChange:this.handleChange}))),h.a.createElement(x.a,{mt:4},h.a.createElement(me,{fullWidth:!0,variant:"outlined"},h.a.createElement(v.a,{error:this.state.errors.nodeSelectorLabelValue,name:"nodeSelectorLabelValue",label:"Kubernetes Node Selector Label Value",value:this.state.nodeSelectorLabelValue,onChange:this.handleChange})))),h.a.createElement(x.a,{mt:4},h.a.createElement(me,{fullWidth:!0,variant:"outlined"},h.a.createElement(v.a,{error:this.state.errors.configPath,name:"configPath",label:"Local Helm Config Path",value:this.state.configPath,onChange:this.handleChange,InputProps:{endAdornment:h.a.createElement(k.a,{position:"end"},h.a.createElement(O.a,{title:"Path to where you would like to save your Helm configuration file",placement:"right-start"},h.a.createElement(R.a,null)))}}))),h.a.createElement(x.a,{mt:8},h.a.createElement(L.a,{variant:"h4"},"Input Sources"),h.a.createElement(x.a,{mt:2},h.a.createElement(L.a,null,"Use the following Input Sources with this Agent:"),this.props.inputs.map((function(t){return h.a.createElement(j.a,{key:t.uuid,control:h.a.createElement(A.a,{name:"inputsource_"+t.uuid,color:"primary",onChange:e.handleChange,checked:e.state.selectedInputs.includes(t.uuid)}),label:t.inputName})})))),h.a.createElement(x.a,{mt:8},h.a.createElement(ye,{color:"secondary",variant:"contained",disabled:this.state.saveButtonDisabled,onClick:this.updateAgent},h.a.createElement(z.a,null),"\xa0Save Changes")))))),h.a.createElement(x.a,{mt:4,display:this.state.showTLSInstructions?"block":"none"},h.a.createElement(Z.a,{variant:"outlined"},h.a.createElement(Q.a,null,h.a.createElement(ee.a,{expandIcon:h.a.createElement(ue.a,null)},h.a.createElement(L.a,null,"Agent TLS/SSL Input Setup Instructions")),h.a.createElement(fe,null,"Enabling TLS/SSL encryption with your connectivity to your input sources requires performing the following steps. These steps (even upon completion) will remain available here for reference:",h.a.createElement("ol",null,h.a.createElement("li",null,"Figure out whether your database requires presenting only the root CA certificate, or the root CA as well as client cert and key files. Download these required files."),h.a.createElement("li",null,"Create a Kubernetes secret containing the certificates required by your database using the commands required below. Adjust the file paths to your downloaded certificates, and take out the ",h.a.createElement("code",null,"sslcert")," and ",h.a.createElement("code",null,"sslkey")," params if your server doesn't require access to these.")),h.a.createElement(te.a,null,h.a.createElement(ae.a,null,h.a.createElement(ne.a,null,h.a.createElement(re.a,null,"Input Source"),h.a.createElement(re.a,null,"Secret Creation Command"),h.a.createElement(re.a,null))),h.a.createElement(oe.a,null,this.state.sslSecrets.map((function(t,a){return h.a.createElement(ne.a,{key:a},h.a.createElement(re.a,null,t.inputSource),h.a.createElement(re.a,null,t.cmd),h.a.createElement(re.a,null,h.a.createElement(g.CopyToClipboard,{text:t.cmd,onCopy:e.props.clipboardCopy},h.a.createElement(ye,{variant:"outlined",size:"small",color:"secondary"},h.a.createElement(H.a,null)))))})))))))),h.a.createElement(x.a,{mt:4},h.a.createElement(Z.a,{variant:"outlined"},h.a.createElement(Q.a,null,h.a.createElement(ee.a,{expandIcon:h.a.createElement(ue.a,null)},h.a.createElement(L.a,null,"Agent Config File")),h.a.createElement(fe,null,h.a.createElement("p",null,"Please copy and paste this helm configuration file to ",h.a.createElement("b",null,this.state.configPath),", and change all of the ",h.a.createElement("b",null,"changemes")," in this file to real values. This configuration file will be automatically regenerated as you add/remove database inputs from your workflows, at which time you'll have to update this file with the provided updated configuration."),h.a.createElement(x.a,{mt:8},h.a.createElement(g.CopyToClipboard,{text:this.state.helmConfig,onCopy:this.props.clipboardCopy},h.a.createElement(ye,{variant:"outlined",size:"small",color:"secondary"},h.a.createElement(H.a,null)))),h.a.createElement(x.a,{mt:2},h.a.createElement("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all"}},this.state.helmConfig)))))),h.a.createElement(x.a,{mt:4},h.a.createElement(Z.a,{variant:"outlined"},h.a.createElement(Q.a,{defaultExpanded:!0},h.a.createElement(ee.a,{expandIcon:h.a.createElement(ue.a,null)},h.a.createElement(L.a,null,"Agent Helm Upgrade/Install Command")),h.a.createElement(fe,null,h.a.createElement(x.a,{mt:2},h.a.createElement(g.CopyToClipboard,{text:this.state.helmCmd.replace(/\\n/g,"\n"),onCopy:this.props.clipboardCopy},h.a.createElement(ye,{variant:"outlined",size:"small",color:"secondary"},h.a.createElement(H.a,null)))),h.a.createElement("pre",{style:{whiteSpace:"normal"}},this.state.helmCmd.split("\\n").map((function(e,t){return t?h.a.createElement("span",{key:t,style:{wordBreak:"break-all",paddingLeft:"15px"}},e,h.a.createElement("br",null)):h.a.createElement("span",{key:t,style:{wordBreak:"break-all"}},e,h.a.createElement("br",null))}))))))))}},{key:"render",value:function(){return h.a.createElement(he,{mb:6},h.a.createElement(le.a,null,h.a.createElement(ge,{justify:"space-between",container:!0,spacing:10},h.a.createElement(ge,{item:!0,xs:1},this.statusIcon()),h.a.createElement(ge,{item:!0,xs:11},h.a.createElement(L.a,{variant:"h4"},this.state.agentName," ",h.a.createElement("code",null,"(",this.props.agent.uuid,")")),h.a.createElement(x.a,{mt:4},this.agentInfo()),this.renderDeleteAgent()))))}}]),a}(h.a.Component);be.contextType=F.a;var ve,Ee,we=be;function Ce(){Ce=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,l=Object.create(o.prototype),i=new k(r||[]);return n(l,"_invoke",{value:w(e,a,i)}),l}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(A){return{type:"throw",arg:A}}}e.wrap=s;var d={};function h(){}function p(){}function m(){}var f={};c(f,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(O([])));y&&y!==t&&a.call(y,o)&&(f=y);var b=m.prototype=h.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function l(){return new t((function(r,l){!function n(r,o,l,i){var c=u(e[r],e,o);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,i)}))}i(c.arg)}(n,o,r,l)}))}return r=r?r.then(l,l):l()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return j()}for(a.method=r,a.arg=o;;){var l=a.delegate;if(l){var i=C(l,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var c=u(e,t,a);if("normal"===c.type){if(n=a.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n="completed",a.method="throw",a.arg=c.arg)}}}function C(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(E.prototype),c(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var l=new E(s(t,a,n,r),o);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},v(b),c(b,i,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Se=Object(p.c)(y.a)(V.b),xe=Object(p.c)(b.a)(V.b),ke=Object(p.c)(v.a)(V.b),Oe=Object(p.c)(ke)(ve||(ve=Object(u.a)(["\n  width: 400px;\n"]))),je=Object(p.c)(E.a)(V.b),Ae=Object(p.c)(je)(Ee||(Ee=Object(u.a)(["\n  min-width: 400px;\n  max-width: 800px;\n"]))),Le=Object(p.c)(w.a)(V.b),Ne=Object(p.c)(U.a)(V.b),Pe=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={namespace:"redactics",configPath:"~/.redactics/values.yaml",saveButtonDisabled:!0,agents:[],inputs:[],helmConfig:"",configMaxWidth:"md",newAgentId:"",illegalChars:!1,sampleDBSelected:!1,sampleAgentConfirmationDialog:!1,useNodeSelector:!1,nodeSelectorLabelKey:"nodePool",nodeSelectorLabelValue:"agent",showClipboardSnackbar:!1,showSaveSnackbar:!1,disableCancel:!1,agentName:"",nodeSelector:"",applyAgentInstallOption:"",helmArgs:{},errors:{agentName:!1,namespace:!1,configPath:!1,illegalChars:""},showAuthCmdsDialog:!1,showInstallAgentDialog:!1},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.handleAuthCmds=n.handleAuthCmds.bind(Object(i.a)(n)),n.handleInstallAgent=n.handleInstallAgent.bind(Object(i.a)(n)),n.handleClose=n.handleClose.bind(Object(i.a)(n)),n.handleErrors=n.handleErrors.bind(Object(i.a)(n)),n.deleteAgent=n.deleteAgent.bind(Object(i.a)(n)),n.clipboardCopy=n.clipboardCopy.bind(Object(i.a)(n)),n.updateAgentSnackbar=n.updateAgentSnackbar.bind(Object(i.a)(n)),n.handleSnackbarClose=n.handleSnackbarClose.bind(Object(i.a)(n)),n.toggleNodeSelector=n.toggleNodeSelector.bind(Object(i.a)(n)),n.saveNewAgent=n.saveNewAgent.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchAgents(),this.fetchInputs(),this.getAgentHeartbeatData()}},{key:"fetchAgents",value:function(){var e=Object(r.a)(Ce().mark((function e(){var t,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/agent"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({agents:a,showInstallAgentDialog:!a.length}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchInputs",value:function(){var e=Object(r.a)(Ce().mark((function e(){var t,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/input"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({inputs:a.inputs}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"clipboardCopy",value:function(){this.setState({showClipboardSnackbar:!0})}},{key:"updateAgentSnackbar",value:function(){this.setState({showSaveSnackbar:!0})}},{key:"handleSnackbarClose",value:function(){this.setState({showClipboardSnackbar:!1,showSaveSnackbar:!1})}},{key:"deleteAgent",value:function(){var e=Object(r.a)(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/agent/").concat(t),{credentials:"include",method:"delete"});case 3:this.fetchAgents(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!1,n=e||this.state,r=h.a.createElement(Ne,{mb:4,severity:"error"},"Kubernetes names must be no longer than 63 characters, must start and end with a lowercase letter or number, and may contain lowercase letters, numbers, and hyphens."),o=h.a.createElement(Ne,{mb:4,severity:"error"},"Invalid path"),l=h.a.createElement(Ne,{mb:4,severity:"error"},"An Agent Name is required"),i=["namespace"];return n.useNodeSelector&&(i.push("nodeSelectorLabelKey"),i.push("nodeSelectorLabelValue")),n.errors.JSX="",n.errors.agentName=!1,n.errors.configPath=!1,i.forEach((function(e){n.errors[e]=!1,a.isIllegalName(n[e])&&(n.errors[e]=!0,n[e]&&(n.errors.JSX=r),t=!0)})),a.isIllegalPath(n.configPath)?(n.errors.configPath=!0,n.errors.JSX=o,t=!0):n.errors.configPath=!1,n.agentName||(t=!0,n.errors.agentName=!0,n.errors.JSX=l),this.setState(n),t}},{key:"handleAuthCmds",value:function(){this.setState({showAuthCmdsDialog:!0})}},{key:"handleInstallAgent",value:function(){this.setState({showInstallAgentDialog:!0,agentName:"",namespace:"redactics",nodeSelector:"",useNodeSelector:!1,configPath:"~/.redactics/values.yaml"})}},{key:"handleClose",value:function(){this.setState({showAuthCmdsDialog:!1,showInstallAgentDialog:!1})}},{key:"toggleNodeSelector",value:function(e){this.setState({useNodeSelector:e.target.checked})}},{key:"clipboardSnackbar",value:function(){return h.a.createElement(C.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showClipboardSnackbar,autoHideDuration:8e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:h.a.createElement("span",{id:"message-id"},"This command has been copied to your clipboard"),action:[h.a.createElement(S.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},h.a.createElement(T.a,null))]})}},{key:"saveSnackbar",value:function(){return h.a.createElement(C.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSaveSnackbar,autoHideDuration:8e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:h.a.createElement("span",{id:"message-id"},"Your changes have been saved"),action:[h.a.createElement(S.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},h.a.createElement(T.a,null))]})}},{key:"saveNewAgent",value:function(){var e=Object(r.a)(Ce().mark((function e(){var t,a,n,r,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},a=this.state.useNodeSelector?"".concat(this.state.nodeSelectorLabelKey,".").concat(this.state.nodeSelectorLabelValue):"",!this.handleErrors()){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,fetch("".concat(this.context.apiUrl,"/agent"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:this.state.agentName,namespace:this.state.namespace,nodeSelector:a,configPath:this.state.configPath})});case 8:return n=e.sent,e.next=11,n.json();case 11:r=e.sent,(o=this.state.agents).push(r),t.showInstallAgentDialog=!1,t.showAuthCmdsDialog=1===o.length,this.setState(t),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(5);case 21:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"installAgent",value:function(){var e=this;return h.a.createElement(h.a.Fragment,null,h.a.createElement(x.a,null,h.a.createElement("p",null,"Redactics requires installation of the Redactics Agent helm chart onto a Kubernetes cluster which has network access to your application database(s). The agent is used for carrying out the work in the workflows you've defined here. Each Kubernetes cluster needs a single agent installed (a single agent can control multiple databases)."),this.state.illegalChars),this.state.errors.JSX,h.a.createElement(x.a,{mt:2},h.a.createElement(Ae,{fullWidth:!0,variant:"outlined"},h.a.createElement(Oe,{error:this.state.errors.agentName,name:"agentName",label:"Agent Name",value:this.state.agentName,onChange:this.handleChange,InputProps:{endAdornment:h.a.createElement(k.a,{position:"end"},h.a.createElement(O.a,{title:"Unique name used to identify this agent (e.g. cluster or environment name)",placement:"right-start"},h.a.createElement(R.a,null)))}}))),h.a.createElement(x.a,{mt:4},h.a.createElement(Ae,{fullWidth:!0,variant:"outlined"},h.a.createElement(Oe,{error:this.state.errors.namespace,name:"namespace",label:"Kubernetes Namespace",value:this.state.namespace,onChange:this.handleChange,InputProps:{endAdornment:h.a.createElement(k.a,{position:"end"},h.a.createElement(O.a,{title:"Kubernetes namespace used for the Redactics Agent",placement:"right-start"},h.a.createElement(R.a,null)))}}))),h.a.createElement(x.a,{mt:4},h.a.createElement(j.a,{control:h.a.createElement(A.a,{checked:this.state.useNodeSelector,onChange:this.toggleNodeSelector,name:"useNodeSelector",color:"primary"}),label:"Assign Agent Pods to Specific Nodes (optional)"})," ",h.a.createElement(O.a,{title:"Optional Kubernetes nodeSelector label for Redactics Agent (allows prevent unwanted resource competition during export jobs), requires label key and value",placement:"right-start"},h.a.createElement(R.a,null))),h.a.createElement(x.a,{mt:4,display:this.state.useNodeSelector?"block":"none"},h.a.createElement(x.a,null,h.a.createElement(Ae,{fullWidth:!0,variant:"outlined"},h.a.createElement(Oe,{name:"nodeSelectorLabelKey",label:"Kubernetes Node Selector Label Key",value:this.state.nodeSelectorLabelKey,onChange:this.handleChange}))),h.a.createElement(x.a,{mt:4},h.a.createElement(Ae,{fullWidth:!0,variant:"outlined"},h.a.createElement(Oe,{name:"nodeSelectorLabelValue",label:"Kubernetes Node Selector Label Value",value:this.state.nodeSelectorLabelValue,onChange:this.handleChange})))),h.a.createElement(x.a,{mt:4},h.a.createElement(Ae,{fullWidth:!0,variant:"outlined"},h.a.createElement(Oe,{error:this.state.errors.configPath,name:"configPath",label:"Local Helm Config Path",value:this.state.configPath,onChange:this.handleChange,InputProps:{endAdornment:h.a.createElement(k.a,{position:"end"},h.a.createElement(O.a,{title:"Path to where you would like to save your Helm configuration file",placement:"right-start"},h.a.createElement(R.a,null)))}}))),h.a.createElement(x.a,{mt:8},h.a.createElement(L.a,{variant:"h4"},"Input Sources"),h.a.createElement(x.a,{mt:2},h.a.createElement(L.a,null,"Use the following Input Sources with this Agent:"),this.state.inputs.map((function(t){return h.a.createElement(j.a,{key:t.uuid,control:h.a.createElement(A.a,{name:"inputsource_"+t.uuid,color:"primary",onChange:e.handleChange}),label:t.inputName})})))),h.a.createElement(N.a,null,h.a.createElement(Le,{color:"secondary",variant:"contained",onClick:this.saveNewAgent},"Save\xa0",h.a.createElement(z.a,null))))}},{key:"showAuthenticationCmds",value:function(){var e="helm repo add redactics ".concat(this.context.chartMuseumUrl),t="docker login ".concat(this.context.dockerRegistryUrl," -u ").concat(this.context.email);return h.a.createElement(x.a,null,h.a.createElement(xe,{justify:"space-between",container:!0,spacing:10},h.a.createElement(xe,{item:!0,xs:1},h.a.createElement(L.a,{variant:"h1"},"1")),h.a.createElement(xe,{item:!0,xs:11},h.a.createElement("p",null,"Add the Redactics Chartmuseum repo to your local Helm config. This allows Helm to pull the Redactics Helm chart from this repo."),h.a.createElement(x.a,{mt:4},h.a.createElement(g.CopyToClipboard,{text:e,onCopy:this.clipboardCopy},h.a.createElement(Le,{variant:"outlined",size:"small",color:"secondary"},h.a.createElement(H.a,null))),h.a.createElement("pre",null,e)))),h.a.createElement(xe,{justify:"space-between",container:!0,spacing:10},h.a.createElement(xe,{item:!0,xs:1},h.a.createElement(L.a,{variant:"h1"},"2")),h.a.createElement(xe,{item:!0,xs:11},h.a.createElement("p",null,"Authenticate to the Redactics registry. This will allow your Kubernetes cluster to pull the required Redactics container images from this registry."),h.a.createElement(x.a,{mt:4},h.a.createElement(g.CopyToClipboard,{text:t,onCopy:this.clipboardCopy},h.a.createElement(Le,{variant:"outlined",size:"small",color:"secondary"},h.a.createElement(H.a,null))),h.a.createElement("pre",null,t)),h.a.createElement(x.a,null,h.a.createElement("p",null,"When prompted for your password your password is your Redactics API key:"),h.a.createElement(g.CopyToClipboard,{text:this.context.apiKey,onCopy:this.clipboardCopy},h.a.createElement(Le,{variant:"outlined",size:"small",color:"secondary"},h.a.createElement(H.a,null))),h.a.createElement("pre",null,this.context.apiKey)))),h.a.createElement(N.a,null,h.a.createElement(Le,{color:"secondary",variant:"contained",onClick:this.handleClose},"Okay")))}},{key:"getAgentHeartbeatData",value:function(){}},{key:"render",value:function(){var e=this;return h.a.createElement(h.a.Fragment,null,h.a.createElement(P.a,{open:this.state.showAuthCmdsDialog,onClose:this.handleClose,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",maxWidth:this.state.configMaxWidth},h.a.createElement(I.a,{id:"dialog-title"},"Authentication Instructions"),h.a.createElement(D.a,null,this.showAuthenticationCmds())),h.a.createElement(P.a,{open:this.state.showInstallAgentDialog,onClose:this.handleClose,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",maxWidth:this.state.configMaxWidth},h.a.createElement(I.a,{id:"dialog-title"},"Configure Your Redactics Agent"),h.a.createElement(D.a,null,this.installAgent())),this.clipboardSnackbar(),this.saveSnackbar(),h.a.createElement(f.a,{title:"Agents"}),h.a.createElement(L.a,{variant:"h1",gutterBottom:!0,display:"inline"},"Agents"),h.a.createElement(Se,{my:6}),h.a.createElement(x.a,{mt:4},h.a.createElement(L.a,{variant:"body1",gutterBottom:!0},"Install the Redactics Agent adjacent to your input sources using the provided configuration and install command.")),h.a.createElement(x.a,{mt:8},h.a.createElement(xe,{justify:"space-between",container:!0,spacing:10},h.a.createElement(xe,{item:!0,xs:1,mb:6}),h.a.createElement(xe,{item:!0},h.a.createElement(x.a,{mb:4},h.a.createElement(Le,{variant:"contained",color:"secondary",size:"small",onClick:this.handleAuthCmds},h.a.createElement(B,null),"Authentication Instructions"),"\xa0",h.a.createElement(Le,{variant:"contained",color:"secondary",size:"small",onClick:this.handleInstallAgent},h.a.createElement(K.a,null),"Install New Agent"))))),this.state.agents.map((function(t){return h.a.createElement(we,{clipboardCopy:e.clipboardCopy,updateAgentSnackbar:e.updateAgentSnackbar,handleSnackbarClose:e.handleSnackbarClose,deleteAgent:e.deleteAgent,agent:t,inputs:e.state.inputs,key:t.uuid,useNodeSelector:!!t.nodeSelector,handleErrors:e.handleErrors,errors:e.state.errors})})))}}],[{key:"isIllegalName",value:function(e){return!e.match(/^[a-zA-Z0-9]([-a-zA-Z0-9]*[a-zA-Z0-9])?$/)}},{key:"isIllegalPath",value:function(e){return!e.match(/(\/|\\)/)}}]),a}(h.a.Component);Pe.contextType=F.a;t.default=Pe}}]);
//# sourceMappingURL=7.df182480.chunk.js.map