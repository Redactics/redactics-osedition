{"version":3,"sources":["pages/workflows/WorkflowRedactionRules.tsx","pages/workflows/WorkflowInputs.tsx","pages/workflows/WorkflowSchedule.tsx","pages/workflows/WorkflowExport.tsx","pages/workflows/WorkflowPostExport.tsx","pages/workflows/DatabaseMigrationSetup.tsx","pages/workflows/Workflow.tsx","pages/workflows/Main.tsx"],"names":["Grid","styled","MuiGrid","spacing","TextFieldSpacing","MuiTextField","FormControlSpacing","MuiFormControl","FormControl","TextField","Select","MuiSelect","Button","MuiButton","WorkflowPostExport","props","state","ruleLabelWidth","this","numMaskingRules","Table","size","style","width","TableBody","maskingRuleValues","map","row","TableRow","key","TableCell","paddingLeft","variant","margin","InputLabel","value","databaseTable","onChange","event","handleRuleChange","name","input","OutlinedInput","labelWidth","allDatabaseTables","dt","MenuItem","defaultValue","column","label","rule","maskingRules","val","Box","color","onClick","deleteMaskingRule","addMaskingRule","Add","Fragment","mt","Typography","gutterBottom","mb","container","item","xs","displayMaskingRules","React","Component","NWTableCell","withStyles","root","whiteSpace","WorkflowInputs","display","MuiExpansionPanelDetails","agent","agents","filter","a","uuid","workflow","agentId","length","configPath","namespace","errors","JSX","tables","table","pr","Chip","onDelete","deleteDatabaseTable","fullWidth","error","addTable","handleAddTable","triggerAddTable","inputs","workflowType","selectedInput","selectInputSource","agentInputs","inputName","Info","blue","fontSize","Link","href","target","TableHead","workflowInput","find","i","inputEnabled","enabled","join","Checkbox","checked","handleInputChanges","triggerEditInputDialog","Edit","title","Dialog","open","editInputDialog","onClose","hideInputDialog","maxWidth","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","editInputDialogContent","DialogActions","saveInputChanges","outputInputs","selectAdornment","marginRight","DatabaseSchedule","disabledAlert","RadioGroup","aria-label","handleExportSchedule","String","exportSchedule","FormControlLabel","disabled","control","Radio","htmlFor","handleSchedule","scheduleSelection","customSchedule","schedule","InputProps","endAdornment","InputAdornment","position","Tooltip","placement","rel","WorkflowExport","displayColumnData","bind","displayRowsData","genName","currentDatabaseTable","tableOutputOptions","exportColumns","handleTableOutputChanges","fields","field","deleteExportTableColumn","addColumn","addExportTableColumn","exportRows","sampleFields","numDays","createdAtField","updatedAtField","tableArr","split","push","showOutputOptions","hideOutputOptions","triggerOutputOptions","MedTextField","WideTextField","bold","fontWeight","Alert","MuiAlert","ExpansionPanelDetails","Paper","MuiPaper","engine","displayEngine","df","dataFeed","dataFeedSummary","uploadBucket","dataFeedConfig","S3UploadBucket","match","databaseEngine","enableDeltaUpdates","enablePostUpdatePreparedStatements","preparedStatementValues","postUpdateKeyValues","forEach","kv","uploadFileChecked","getS3UploadFileNames","image","tag","dataFeeds","dataFeedName","triggerEditDataFeed","deleteDataFeed","duplicateDataFeed","severity","invalidBucketName","invalidPostUpdateKeyValues","invalidSecret","namespaceTip","feedSecrets","editDataFeed","hideDataFeed","showErrors","List","component","ListItem","button","handleDataFeed","ListItemText","primary","primaryTypographyProps","secondary","handleDataFeedOptions","startAdornment","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpandMore","agentNamespace","enableSSL","getAgent","deltaUpdateField","idx","updateParameterValue","deleteParameterValue","addParameterValue","addAllToS3UploadList","addAllS3Uploads","align","f","scope","markAddToS3UploadList","includes","placeholder","shell","multiline","rowsMax","command","args","addSecret","secret","secretType","secretName","handleCustomSecret","secretKey","secretPath","handleDeleteSecret","envName","handleDataFeedBack","saveDataFeedChanges","handleDataFeedCancel","justify","addDataFeed","outputTable","DatabaseMigrationSetup","helmHook","migrationNamespace","migrationHelmHookWeight","script","handleWFChanges","className","classes","migrationDatabase","migrationDatabaseClone","migrationConfiguration","type","text","onCopy","clipboardCopy","wordBreak","Card","MuiCard","Workflow","handleSnackbarClose","setState","showSnackbar","showSnackbarEdit","showClipboardSnackbar","handleEditWorkflowSnackbarClose","saveChanges","hideHelmReminder","toggleHelmReminder","showLastReportedError","hideLastReportedError","hideErrorDialog","handleDeltaUpdate","validateRedactionRules","validateOutputSettings","validateForgetUserFields","deleteWorkflowConfirmation","cancelWorkflowConfirmation","handleSoftDeletionFields","handleSoftDeleteEmailAddressField","getExportFileNames","deleteWorkflow","transformExpansion","resetDataFeedErrors","redactrules","presetUuid","thisAgentSearch","userSearchEmailDBTable","userSearchEmailField","userSearchEmailColumn","newRuleKey","missingInput","transformExpanded","outputExpanded","saveButtonDisabled","showHelmReminder","helmReminderCheckbox","completeRedactRules","dupeRedactRuleFound","dupeTableExportFound","missingSchemaSelection","missingSecretField","invalidOutputSettingField","missingPostExportHookField","validSchedule","validName","validDiskSize","exportTableDataConfig","generateSoftDeleteQueries","displayExportTableSchema","displayExportTableData","S3UploadFileChecked","diskSize","numInputs","s3Bucket","datafeeds","showDialog","newInputKey","newDataFeedKey","exportTableSchemaAll","exportTableDataAll","ackHelmReminder","orphanedWorkflow","columnExclusionProhibited","invalidForgetUserFields","invalidMigrationFields","digitalTwinAdded","snackbarText","redactrulesets","redactKey","redactName","presets","preset","isDefault","presetName","c","Object","entries","cf","config","context","copied","copiedText","values","mr","workflowId","dataConfig","t","parseInt","payload","validateMigrationMockFields","fetch","apiUrl","method","headers","credentials","body","JSON","stringify","response","json","data","invalidSchedule","columnExclusion","Array","isArray","e","msg","param","window","location","r","redactRuleUuids","updateHelmConfig","rules","validFields","missingFields","legalName","validRules","invalidDBField","toLowerCase","lastStackTrace","index","preventDefault","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","message","action","IconButton","Close","tableName","fileName","filenames","keys","inputCopy","findInput","bucket","errorsFound","legalBucketName","s","expanded","d","replace","dataFeedCopy","isNaN","parseFloat","wf","CardContent","dbUUIDSnackbar","ml","alignItems","displayWorkflowType","displayLastReportedError","WorkflowRedactionRules","WorkflowSchedule","outputExpansion","autoFocus","lastTask","contextType","RedacticsContext","Divider","MuiDivider","Workflows","ruleLegendDialog","newWorkflowDialog","workflows","newWorkflowName","newWorkflowAgent","newWorkflowType","dbLimitError","handleChangeAdd","addWorkflow","ruleLegendOpen","ruleLegendClose","newWorkflowOpen","newWorkflowClose","refreshWorkflows","dbLimitErrorClose","my","FormatListBulleted","noValidate","autoComplete"],"mappings":"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","file":"static/js/13.0bccce4f.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nimport { spacing } from '@material-ui/system';\n\nimport {\n  Grid as MuiGrid,\n  Typography,\n  TextField as MuiTextField,\n  Select as MuiSelect,\n  FormControl as MuiFormControl,\n  Button as MuiButton,\n  InputLabel,\n  OutlinedInput,\n  MenuItem,\n  Box,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n} from '@material-ui/core';\n\nimport {\n  DeleteOutline as DeleteIcon,\n  Add as AddIcon,\n} from '@material-ui/icons';\n\nimport { RedactRule, WorkflowRecord } from '../../types/redactics';\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\ninterface IProps {\n  workflow: WorkflowRecord;\n  maskingRuleValues: RedactRule[];\n  handleRuleChange: any;\n  deleteMaskingRule: any;\n  numMaskingRules: number;\n  maskingRules: RedactRule[];\n  addMaskingRule: any;\n  allDatabaseTables: string[];\n}\n\ninterface IState {\n  ruleLabelWidth: number;\n}\n\nclass WorkflowPostExport extends React.Component<IProps, IState> {\n  constructor(props: IProps) {\n    super(props);\n\n    this.state = {\n      ruleLabelWidth: 30,\n    };\n  }\n\n  displayMaskingRules() {\n    if (!this.props.numMaskingRules) {\n      return (\n        <Box>\n          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addMaskingRule}>\n            <AddIcon />&nbsp;&nbsp;Add Database Field Containing PII\n          </Button>\n        </Box>\n      )\n    }\n    else {\n      return (\n        <Table size=\"small\" style={{ width: 'auto' }}>\n          <TableBody>\n            {this.props.maskingRuleValues.map((row:RedactRule) => (\n              <TableRow key={row.key}>\n                <TableCell style={{ paddingLeft: 0 }}>\n                  <FormControl variant=\"outlined\" margin=\"dense\">\n                    <InputLabel>\n                      Database and Table Name\n                    </InputLabel>\n                    <Select\n                      value={row.databaseTable}\n                      onChange={(event) => this.props.handleRuleChange(row.key, event)}\n                      name=\"databaseTable\"\n                      input={\n                        <OutlinedInput\n                          labelWidth={this.state.ruleLabelWidth}\n                          name=\"rule\"\n                        />\n                      }\n                    >\n                      {this.props.allDatabaseTables.map((dt:string) => (\n                        <MenuItem key={dt} value={dt}>{dt}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </TableCell>\n                <TableCell>\n                  <TextField name=\"column\" defaultValue={row.column} label=\"Column Name\" variant=\"outlined\" onChange={(event) => this.props.handleRuleChange(row.key, event)} margin=\"dense\" />\n                </TableCell>\n                <TableCell>\n                  <FormControl variant=\"outlined\" margin=\"dense\">\n                    <InputLabel>\n                      Rule\n                    </InputLabel>\n                    <Select\n                      value={row.rule}\n                      onChange={(event) => this.props.handleRuleChange(row.key, event)}\n                      name=\"rule\"\n                      input={\n                        <OutlinedInput\n                          labelWidth={this.state.ruleLabelWidth}\n                          name=\"rule\"\n                        />\n                      }\n                    >\n                      {this.props.maskingRules.map((rule:RedactRule) => (\n                        <MenuItem key={rule.key} value={rule.key}>{rule.val}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </TableCell>\n                <TableCell>\n                  <Box>\n                    <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.deleteMaskingRule(row.key)}>\n                      <DeleteIcon />&nbsp;&nbsp;Delete\n                    </Button>\n                  </Box>\n                </TableCell>\n              </TableRow>\n            ))}\n            <TableRow>\n              <TableCell></TableCell>\n              <TableCell></TableCell>\n              <TableCell></TableCell>\n              <TableCell>\n                <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addMaskingRule}>\n                  <AddIcon />&nbsp;&nbsp;Add\n                </Button>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      )\n    }\n  }\n\n  /* eslint-disable max-len */\n\n  render() {\n    return (\n      <React.Fragment>\n        <Box mt={8}>\n          <Typography variant=\"h6\" gutterBottom>\n            Database Fields Containing PII/Confidential Info\n          </Typography>\n\n          <Box mb={4}>\n            <Grid container>\n              <Grid item xs={8}>\n                <Typography variant=\"body1\" gutterBottom>\n                  You can use the Redactics PII Scanner to auto-detect your database fields containing PII, or else define your fields containing PII (and their redaction rules) here.\n                </Typography>\n              </Grid>\n            </Grid>\n          </Box>\n\n          {this.displayMaskingRules()}\n        </Box>\n\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WorkflowPostExport;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { spacing } from '@material-ui/system';\nimport { blue } from '@material-ui/core/colors';\n\nimport {\n  Button as MuiButton,\n  TextField as MuiTextField,\n  Select as MuiSelect,\n  FormControl as MuiFormControl,\n  InputLabel,\n  MenuItem,\n  Box,\n  Link,\n  FormControlLabel,\n  Checkbox,\n  Tooltip,\n  InputAdornment,\n  Typography,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Chip,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails as MuiExpansionPanelDetails,\n  Grid as MuiGrid,\n  Paper,\n  RadioGroup,\n  Radio,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  Edit as EditIcon,\n  HelpOutline as HelpIcon,\n  DeleteOutline as DeleteIcon,\n  ExpandMore as ExpandMoreIcon,\n  Info as InfoIcon,\n} from '@material-ui/icons';\n\nimport { AgentRecord, WorkflowRecord, AgentInputRecord, WorkflowInputRecord } from '../../types/redactics';\n\nconst Button = styled(MuiButton)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst NWTableCell = withStyles({\n  root: {\n    whiteSpace: 'nowrap',\n  },\n})(TableCell);\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst ExpansionPanelDetails = withStyles({\n  root: {\n    display: 'block',\n  },\n})(MuiExpansionPanelDetails);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  agents: AgentRecord[];\n  errors?: any;\n  workflow: WorkflowRecord;\n  agentInputs: AgentInputRecord[];\n  classes: any;\n  editInputDialog: boolean;\n  triggerEditInputDialog: any;\n  saveInputChanges: any;\n  input: WorkflowInputRecord;\n  inputs: WorkflowInputRecord[];\n  handleInputChanges: any;\n  selectInputSource: any;\n  handleAddTable: any;\n  addTable: string;\n  triggerAddTable: any;\n  hideInputDialog: any;\n  deleteDatabaseTable: any;\n  handleSnackbarClose: any;\n}\n\ninterface IState {\n \n}\n\nclass WorkflowInputs extends React.Component<IProps, IState> {\n  getAgent() {\n    const agent = this.props.agents.filter((a:AgentRecord) => (\n      (a.uuid === this.props.workflow.agentId)));\n    // set stub result if method is called before data has been populated,\n    // there should always be an agent found\n    return (agent.length) ? agent[0] : {\n      configPath: '',\n      namespace: '',\n    };\n  }\n\n  editInputDialogContent() { \n    return (\n      <Box>\n        {this.props.errors.JSX}\n\n        <Box mt={8}>\n          <Typography variant=\"h4\" gutterBottom>\n            Tables to Extract\n          </Typography>\n\n          <Box>\n            {this.props.input.tables.map((table: string) => (\n              <Box key={table} display=\"inline\" pr={1}>\n                <Chip\n                  key={table}\n                  label={table}\n                  onDelete={() => this.props.deleteDatabaseTable(table)}\n                />\n              </Box>\n            ))}\n          </Box>\n\n          <Box mt={4}>\n            <FormControl fullWidth>\n              <TextField\n                error={this.props.errors.addTable}\n                name=\"addTable\"\n                label=\"Add Table\"\n                value={this.props.addTable}\n                onChange={(event) => this.props.handleAddTable(event)}\n              />\n            </FormControl>\n            <Box mt={2}>\n              <Button color=\"secondary\" variant=\"outlined\" onClick={this.props.triggerAddTable}>\n                <AddIcon />&nbsp;Add\n              </Button>\n            </Box>\n          </Box>\n\n        </Box>\n      </Box>\n    ) \n  }\n\n  outputInputs() {\n    if (this.props.inputs.length) {\n      if (this.props.workflow.workflowType === \"mockDatabaseMigration\") {\n        const selectedInput = (this.props.inputs && this.props.inputs.length && this.props.inputs[0]) ? this.props.inputs[0].uuid : \"\";\n        return (\n          <Box>\n            <FormControl margin=\"dense\" fullWidth>\n              <InputLabel>\n                Input Source\n              </InputLabel>\n              <Select\n                value={selectedInput}\n                name=\"inputSource\"\n                onChange={(event) => this.props.selectInputSource(event)}\n              >\n                {this.props.agentInputs.map((input:AgentInputRecord) => (\n                  <MenuItem key={input.uuid} value={input.uuid}>{input.inputName}</MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </Box>\n        )\n      }\n      else {\n        return (\n          <Box>\n            <Box mb={4} display={(this.props.workflow.workflowType === \"multiTenantWebERL\") ? \"block\" : \"none\"}>\n              <InfoIcon style={{ color: blue[500], fontSize: 25 }} /> <b>This workflow is constrained to a preset sample database containing two tables. CSV table data: <Link href=\"https://raw.githubusercontent.com/Redactics/redactics-sampledatasets/master/2020-olympic-athletes/athletes.csv\" target=\"_blank\">athletes.csv</Link>, <Link href=\"https://raw.githubusercontent.com/Redactics/redactics-sampledatasets/master/marketing-campaign/marketing_campaign.csv\" target=\"_blank\">marketing_campaign.csv</Link>.</b>\n            </Box>\n\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Enabled</TableCell>\n                  <TableCell>Name</TableCell>\n                  <TableCell>Tables to Extract</TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {this.props.agentInputs.map((input:AgentInputRecord) => {\n                  let workflowInput:any = this.props.inputs.find((i:WorkflowInputRecord) => {\n                    return (i.uuid === input.uuid)\n                  });\n                  let inputEnabled:boolean = (workflowInput) ? workflowInput.enabled : false;\n                  let tables:string = (workflowInput && workflowInput.tables && workflowInput.tables.length) ? workflowInput.tables.join(', ') : \"\";\n                  return (\n                    <TableRow key={input.uuid}>\n                      <TableCell>\n                        <Checkbox\n                          checked={inputEnabled}\n                          name=\"enabled\"\n                          color=\"primary\"\n                          onChange={(event) => this.props.handleInputChanges(event, workflowInput)}\n                        />\n                      </TableCell>\n                      <TableCell>{input.inputName}</TableCell>\n                      <TableCell>{tables}</TableCell>\n                      <NWTableCell>\n                        <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.triggerEditInputDialog(workflowInput)}>\n                          <EditIcon/>&nbsp;Edit Table Selection\n                        </Button>\n                      </NWTableCell>\n                    </TableRow>\n                  )\n                })}\n              </TableBody>\n            </Table>\n          </Box>\n        )\n      }\n    }\n    else {\n      return (\n        <Box>\n          Workflows require at least one input source. Click on <b>Add Input Source</b> to select an input source.\n        </Box>\n      )\n    }\n  }\n\n  /* eslint-disable max-len */\n\n  render() {\n    const title = (this.props.workflow.workflowType === \"mockDatabaseMigration\") ? \"Input Source\" : \"Input Sources\";\n    return (\n      <React.Fragment>\n        <Box mt={4}>\n          <Typography variant=\"h4\" gutterBottom>\n            {title}\n          </Typography>\n        </Box>\n\n        <Dialog\n          open={this.props.editInputDialog}\n          onClose={this.props.hideInputDialog}\n          maxWidth=\"md\"\n          aria-labelledby=\"dialog-title\"\n          aria-describedby=\"dialog-description\"\n          fullWidth\n        >\n          <DialogTitle id=\"dialog-title\">Edit Table Selection</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"dialog-description\">\n              {this.editInputDialogContent()}\n            </DialogContentText>\n\n            <DialogActions>\n              <Button color=\"secondary\" variant=\"contained\" onClick={this.props.saveInputChanges}>\n                Update\n              </Button>\n            </DialogActions>\n          </DialogContent>\n        </Dialog>\n\n        <Box mt={8}>\n          {this.outputInputs()}\n        </Box>\n       \n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(WorkflowInputs);\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { spacing } from '@material-ui/system';\nimport { blue } from '@material-ui/core/colors';\n\nimport {\n  Typography,\n  TextField as MuiTextField,\n  Select as MuiSelect,\n  FormControl as MuiFormControl,\n  InputLabel,\n  MenuItem,\n  Box,\n  Link,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n  Tooltip,\n  InputAdornment,\n} from '@material-ui/core';\n\nimport {\n  HelpOutline as HelpIcon,\n  Info as InfoIcon,\n} from '@material-ui/icons';\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  handleExportSchedule: any;\n  exportSchedule: boolean;\n  schedule: string;\n  handleSchedule: any;\n  scheduleSelection: string;\n  customSchedule: boolean;\n  workflowType: string;\n  errors: any;\n}\n\ninterface IState {\n\n}\n\nclass DatabaseSchedule extends React.Component<IProps, IState> {\n  disabledAlert(workflowType:string) {\n    return (workflowType === \"multiTenantWebERL\") ? (\n      <Box mb={4}>\n        <InfoIcon style={{ color: blue[500], fontSize: 25 }} /> <b>Scheduling is not supported with web-based workflows, this job will run immediately once you click the \"Save and Run Workflow\" button, below.</b>\n      </Box>\n    ) : null;\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Box mt={8}>\n          <Typography variant=\"h4\" gutterBottom>\n            Workflow Schedule Options\n          </Typography>\n\n          <Box mt={4}>\n            {this.disabledAlert(this.props.workflowType)}\n            <RadioGroup aria-label=\"exportSchedule\" name=\"exportSchedule\" onChange={this.props.handleExportSchedule} value={String(this.props.exportSchedule)}>\n              <FormControlLabel disabled={this.props.workflowType === \"multiTenantWebERL\"} value=\"false\" control={<Radio />} label=\"Do Not Automate Workflow\" />\n              <FormControlLabel disabled={this.props.workflowType === \"multiTenantWebERL\"} value=\"true\" control={<Radio />} label=\"Schedule/Automate Workflow\" />\n            </RadioGroup>\n          </Box>\n\n          <Box mt={2} display={(this.props.exportSchedule === true) ? 'block' : 'none'}>\n            <Box>\n              <FormControl fullWidth>\n                <InputLabel htmlFor=\"scheduleSelection\">Schedule</InputLabel>\n                <Select\n                  name=\"scheduleSelection\"\n                  onChange={this.props.handleSchedule}\n                  value={this.props.scheduleSelection}\n                >\n                  <MenuItem key=\"none\" value=\"None\">None</MenuItem>\n                  <MenuItem key=\"hourly\" value=\"@hourly\">Hourly</MenuItem>\n                  <MenuItem key=\"daily\" value=\"@daily\">Daily</MenuItem>\n                  <MenuItem key=\"weekly\" value=\"@weekly\">Weekly</MenuItem>\n                  <MenuItem key=\"monthly\" value=\"@monthly\">Monthly</MenuItem>\n                  <MenuItem key=\"custom\" value=\"custom\">Custom</MenuItem>\n                </Select>\n              </FormControl>\n            </Box>\n\n            <Box mt={4} display={(this.props.customSchedule === true) ? 'block' : 'none'}>\n              <FormControl fullWidth>\n                <TextField\n                  error={this.props.errors.schedule}\n                  name=\"schedule\"\n                  label=\"Cronjob Schedule\"\n                  value={this.props.schedule}\n                  onChange={this.props.handleSchedule}\n                  InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Schedule time as a cron expression\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                />\n                <Box mt={1}>\n                  See <Link target=\"_blank\" rel=\"noreferrer\" href=\"https://crontab.guru\"><b>Crontab Guru</b></Link> for help with generating cron schedule expressions.\n                </Box>\n              </FormControl>\n            </Box>\n          </Box>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default DatabaseSchedule;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { spacing } from '@material-ui/system';\nimport { blue } from '@material-ui/core/colors';\n\nimport {\n  Typography,\n  TextField as MuiTextField,\n  FormControl as MuiFormControl,\n  Button as MuiButton,\n  Box,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n  Chip,\n  Select,\n  MenuItem,\n  Tooltip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  HelpOutline as HelpIcon,\n  Edit as EditIcon,\n  Info as InfoIcon,\n} from '@material-ui/icons';\n\nimport { WorkflowRecord } from '../../types/redactics';\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n  display: inline;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst Button = styled(MuiButton)(spacing);\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  workflow: WorkflowRecord;\n  deleteExportTableColumn: any;\n  addExportTableColumn: any;\n  tableOutputOptions: any;\n  handleTableOutputChanges: any;\n  allDatabaseTables: string[];\n  showOutputOptions: any;\n  currentDatabaseTable: string;\n  triggerOutputOptions: any;\n  hideOutputOptions: any;\n}\n\ninterface IState {\n\n}\n\nclass WorkflowExport extends React.Component<IProps, IState> {\n  constructor(props:IProps) {\n    super(props);\n\n    this.displayColumnData = this.displayColumnData.bind(this);\n    this.displayRowsData = this.displayRowsData.bind(this);\n    this.genName = this.genName.bind(this);\n  }\n\n  displayColumnData() {\n    const table = this.props.currentDatabaseTable;\n    if (!this.props.tableOutputOptions[table]) { return; }\n\n    return (\n      <Box>\n         <RadioGroup aria-label=\"exportColumns\" name=\"exportColumns\" value={this.props.tableOutputOptions[table].exportColumns} onChange={(event) => this.props.handleTableOutputChanges(event, table)}>\n          <FormControlLabel value=\"all\" control={<Radio />} label=\"Export All Columns\" />\n          <FormControlLabel value=\"specific\" control={<Radio />} label=\"Export Specific Columns\" />\n        </RadioGroup>\n\n        <Box mt={4} display={(this.props.tableOutputOptions[table].exportColumns === \"specific\") ? 'block' : 'none'}>\n          {this.props.tableOutputOptions[table].fields.map((field: string) => (\n            <Box key={field} display=\"inline\" pr={1}>\n              <Chip\n                key={field}\n                label={field}\n                onDelete={(event) => this.props.deleteExportTableColumn(event, table, field)}\n              />\n            </Box>\n          ))}\n\n          <Box mt={2}>\n            <FormControl fullWidth>\n              <TextField\n                error={this.props.tableOutputOptions[table].errors.addColumn}\n                name=\"addColumn\"\n                label=\"Add Column\"\n                value={this.props.tableOutputOptions[table].addColumn}\n                onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n              />\n            </FormControl>\n            <Box mt={2}>\n              <Button color=\"secondary\" variant=\"outlined\" onClick={(event) => this.props.addExportTableColumn(event, table)}>\n                <AddIcon />&nbsp;Add\n              </Button>\n            </Box>\n          </Box>\n        </Box>\n      </Box>\n    )\n  }\n\n  disabledAlert(workflowType:string) {\n    return (workflowType === \"multiTenantWebERL\") ? (\n      <Box mt={4}>\n        <InfoIcon style={{ color: blue[500], fontSize: 25 }} /> <b>Web-based workflows only support exporting all rows, and not rows from a specific time period.</b>\n      </Box>\n    ) : null;\n  }\n\n  displayRowsData() {\n    const table = this.props.currentDatabaseTable;\n    if (!this.props.tableOutputOptions[table]) { return; }\n\n    return (\n      <Box mt={4}>\n          {this.disabledAlert(this.props.workflow.workflowType)}\n         <RadioGroup aria-label=\"exportRows\" name=\"exportRows\" value={this.props.tableOutputOptions[table].exportRows} onChange={(event) => this.props.handleTableOutputChanges(event, table)}>\n          <FormControlLabel value=\"all\" control={<Radio />} label=\"All Rows\" />\n          <FormControlLabel disabled={!(this.props.workflow.workflowType === \"ERL\")} value=\"specific\" control={<Radio />} label=\"Rows From a Specific Time Period\" />\n        </RadioGroup>\n\n        <Box mt={4} display={(this.props.tableOutputOptions[table].exportRows === \"specific\") ? 'block' : 'none'}>\n          <FormControl>\n            <Select\n              name=\"sampleFields\"\n              value={this.props.tableOutputOptions[table].sampleFields}\n              onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n            >\n              <MenuItem key=\"created\" value=\"created\">Created</MenuItem>\n              <MenuItem key=\"updated\" value=\"updated\">Updated</MenuItem>\n              <MenuItem key=\"createdAndUpdated\" value=\"createdAndUpdated\">Created or updated</MenuItem>\n            </Select>&nbsp;&nbsp;in the last&nbsp;&nbsp;\n            <Select\n              name=\"numDays\"\n              value={this.props.tableOutputOptions[table].numDays}\n              onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n            >\n              <MenuItem key=\"1\" value=\"1\">day</MenuItem>\n              <MenuItem key=\"2\" value=\"2\">2 days</MenuItem>\n              <MenuItem key=\"3\" value=\"3\">3 days</MenuItem>\n              <MenuItem key=\"7\" value=\"7\">1 week</MenuItem>\n              <MenuItem key=\"14\" value=\"14\">2 weeks</MenuItem>\n              <MenuItem key=\"30\" value=\"30\">month</MenuItem>\n              <MenuItem key=\"60\" value=\"60\">2 months</MenuItem>\n              <MenuItem key=\"90\" value=\"90\">3 months</MenuItem>\n              <MenuItem key=\"180\" value=\"180\">6 months</MenuItem>\n              <MenuItem key=\"365\" value=\"365\">year</MenuItem>\n            </Select>\n          </FormControl>\n\n          <Box mt={4}>\n            <FormControl fullWidth variant=\"outlined\">\n              <TextField\n                error={this.props.tableOutputOptions[table].errors.createdAtField}\n                name=\"createdAtField\"\n                label=\"Created At Field Name\"\n                value={this.props.tableOutputOptions[table].createdAtField}\n                onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n                InputProps={{\n                  endAdornment: <Tooltip title=\"(Required) field name in this table used for tracking created at timestamp\" placement=\"right-start\"><HelpIcon /></Tooltip>,\n                }}\n              />\n            </FormControl>\n          </Box>\n\n          <Box mt={4}>\n            <FormControl fullWidth variant=\"outlined\">\n              <TextField\n                error={this.props.tableOutputOptions[table].errors.updatedAtField}\n                name=\"updatedAtField\"\n                label=\"Updated At Field Name\"\n                value={this.props.tableOutputOptions[table].updatedAtField}\n                onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n                InputProps={{\n                  endAdornment: <Tooltip title=\"(Required) field name in this table used for tracking updated at timestamp\" placement=\"right-start\"><HelpIcon /></Tooltip>,\n                }}\n              />\n            </FormControl>\n          </Box>\n        </Box>\n      </Box>\n    )\n  }\n\n  genName(dt:string) {\n    const display:string[] = [];\n    const tableArr:string[] = dt.split(': ');\n    const table:string = tableArr[(tableArr.length - 1)];\n    // let column:string = \"columns\";\n    // if (this.props.tableOutputOptions[table] && \n    //   this.props.tableOutputOptions[table].fields && \n    //   this.props.tableOutputOptions[table].fields.length === 1 &&\n    //   this.props.tableOutputOptions[table].exportColumns !== \"all\") {\n    //     column = \"column\";\n    // }\n    // display.push((this.props.tableOutputOptions[table] && \n    //   this.props.tableOutputOptions[table].fields && \n    //   this.props.tableOutputOptions[table].exportColumns !== \"all\") ? \n    //     this.props.tableOutputOptions[table].fields.length + \" \" + column + \",\" : \"all columns,\");\n    display.push((this.props.tableOutputOptions[table] && \n      this.props.tableOutputOptions[table].numDays && \n      this.props.tableOutputOptions[table].exportRows !== \"all\") ? \n        \"rows for the last \" + this.props.tableOutputOptions[table].numDays + \" days\" : \"all table rows\");\n    return display.join(' ');\n  }\n\n  render() {\n    if (!this.props.allDatabaseTables) {\n      return null;\n    }\n    return (\n      <React.Fragment>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n            Table Data Options\n          </Typography>\n\n          <Dialog\n            fullWidth\n            open={this.props.showOutputOptions}\n            onClose={this.props.hideOutputOptions}\n            maxWidth=\"md\"\n            aria-labelledby=\"dialog-title\"\n            aria-describedby=\"dialog-description\"\n          >\n            <DialogTitle id=\"dialog-title\">Table Options: {this.props.currentDatabaseTable}</DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"dialog-description\">\n                {/* <Box>\n                  <b>Columns</b>\n                </Box>\n\n                {this.displayColumnData()}\n\n                <Box mt={4}>\n                  <b>Rows</b>\n                </Box> */}\n\n                <Box>\n                  To limit the initial copy of your data to a specific time range, specify this time range below. This may be useful if older data is not particularly relevant to you and/or your output table is large.\n                </Box>\n\n                {this.displayRowsData()}\n              </DialogContentText>\n\n              <DialogActions>\n                <Button color=\"secondary\" variant=\"contained\" onClick={this.props.hideOutputOptions}>\n                  Update\n                </Button>\n              </DialogActions>\n            </DialogContent>\n          </Dialog>\n\n          <Box mt={8}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Table</TableCell>\n                  <TableCell>Summary</TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n              {this.props.allDatabaseTables.map((dt:string) => {\n                const tableArr:string[] = dt.split(': ');\n                const table:string = tableArr[(tableArr.length - 1)];\n                return (\n                  <TableRow key={table}>\n                    <TableCell>{table}</TableCell>\n                    <TableCell>{this.genName(dt)}</TableCell>\n                    <TableCell>\n                      <Button color=\"secondary\" size=\"small\" variant=\"contained\" onClick={(event) => this.props.triggerOutputOptions(event, table)}>\n                        <EditIcon />&nbsp;Edit\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                )\n              })}\n              </TableBody>\n            </Table>\n          </Box>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WorkflowExport;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { spacing } from '@material-ui/system';\nimport { blue } from '@material-ui/core/colors';\n\nimport {\n  Grid as MuiGrid,\n  Typography,\n  TextField as MuiTextField,\n  FormControl as MuiFormControl,\n  Button as MuiButton,\n  Box,\n  Link,\n  Checkbox,\n  Tooltip,\n  InputAdornment,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Paper as MuiPaper,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails as MuiExpansionPanelDetails,\n  List,\n  ListItem,\n  ListItemText,\n  Select,\n  InputLabel,\n  MenuItem,\n  FormControlLabel,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  DeleteOutline as DeleteIcon,\n  Edit as EditIcon,\n  HelpOutline as HelpIcon,\n  ExpandMore as ExpandMoreIcon,\n  Info as InfoIcon,\n} from '@material-ui/icons';\n\nimport {\n  HardDrive as HardDriveIcon,\n  Code as CodeIcon,\n} from 'react-feather';\n\nimport { CustomSecret, DataFeed, AgentRecord, WorkflowRecord, PostUpdateParam } from '../../types/redactics';\n\nimport { Alert as MuiAlert } from '@material-ui/lab';\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst MedTextField = styled(TextFieldSpacing)`\n  width: 400px;\n`;\n\nconst WideTextField = styled(TextFieldSpacing)`\n  width: 600px;\n`;\n\nconst bold = {\n  fontWeight: \"bold\"\n};\n\nconst Alert = styled(MuiAlert)(spacing);\n\nconst ExpansionPanelDetails = withStyles({\n  root: {\n    display: 'block',\n  },\n})(MuiExpansionPanelDetails);\n\nconst NWTableCell = withStyles({\n  root: {\n    whiteSpace: 'nowrap',\n  },\n})(TableCell);\n\nconst Paper = styled(MuiPaper)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  handleDeleteSecret: any;\n  markAddToS3UploadList: any;\n  addAllToS3UploadList: any;\n  addAllS3Uploads: boolean;\n  agentNamespace?: string;\n  dataFeeds: DataFeed[];\n  dataFeed: DataFeed;\n  hideDataFeed: any;\n  addDataFeed: any;\n  editDataFeed: boolean;\n  addParameterValue: any;\n  updateParameterValue: any;\n  deleteParameterValue: any;\n  handleDataFeed: any;\n  handleDataFeedBack: any;\n  handleDataFeedCancel: any;\n  getS3UploadFileNames: any;\n  handleDataFeedOptions: any;\n  saveDataFeedChanges: any;\n  triggerEditDataFeed: any;\n  deleteDataFeed: any;\n  errors: any;\n  handleCustomSecret: any;\n  addSecret: any;\n  agents: AgentRecord[];\n  workflow: WorkflowRecord;\n}\n\ninterface IState {\n\n}\n\nclass WorkflowPostExport extends React.Component<IProps, IState> {\n  /* eslint-disable max-len */\n\n  databaseEngine(engine:string) {\n    let displayEngine:string = \"\";\n    switch (engine) {\n      case 'postgresql':\n        displayEngine = \"PostgreSQL\";\n      break;\n\n      default:\n      break;\n    }\n\n    return displayEngine;\n  }\n\n  dataFeedName(df:string) {\n    let dataFeed:string = \"\";\n    switch (df) {\n      case 'dataRepository':\n        dataFeed = \"Push Data to your Internal Data Repository\";\n      break;\n\n      case 'digitalTwin':\n        dataFeed = \"Create a PII-free Digital Twin/Clone\";\n      break;\n      \n      case 's3upload':\n        dataFeed = \"Upload/Sync Data to an Amazon S3 bucket\";\n      break;\n\n      case 'custom':\n        dataFeed = \"Custom Container/Plugin\";\n      break;\n\n      default:\n      break;\n    }\n\n    return dataFeed;\n  }\n\n  dataFeedSummary(df:any) {\n    let dataFeedSummary:string = \"\";\n    let uploadBucket:string = df.dataFeedConfig.S3UploadBucket;\n    if (df.dataFeedConfig.S3UploadBucket && !df.dataFeedConfig.S3UploadBucket.match(/^s3:\\/\\//)) {\n      uploadBucket = \"s3://\" + df.dataFeedConfig.S3UploadBucket;\n    }\n    switch (df.dataFeed) {\n      case 'dataRepository':\n      dataFeedSummary = \"Add datasets to your data repository (hosted at \" + uploadBucket + \")\";\n      break;\n\n      case 'digitalTwin':\n      dataFeedSummary = \"Data will be cloned to your \" + this.databaseEngine(df.dataFeedConfig.databaseEngine) + \" database and will be \";\n      dataFeedSummary += (df.dataFeedConfig.enableDeltaUpdates) ? \"updated with new data\" : \"reset to match the original data\";\n      if (df.dataFeedConfig.enablePostUpdatePreparedStatements) {\n        let preparedStatementValues:string[] = [];\n        df.dataFeedConfig.postUpdateKeyValues.forEach((kv:PostUpdateParam) => {\n          if (kv.key && kv.value) {\n            preparedStatementValues.push(kv.value);\n          }\n        })\n        if (preparedStatementValues.length) {\n          dataFeedSummary+= \". After each time the workflow runs your data will be modified with the following values: \" + preparedStatementValues.join(', ') + \".\";\n        }\n      }\n      break;\n      \n      case 's3upload':\n      dataFeedSummary = \"Upload \";\n      dataFeedSummary += (df.dataFeedConfig.uploadFileChecked.length === this.props.getS3UploadFileNames().length)\n        ? \"all\" : df.dataFeedConfig.uploadFileChecked.length;\n      dataFeedSummary += (df.dataFeedConfig.uploadFileChecked.length === 1) ? \" table\" : \" tables\";\n      dataFeedSummary += \" to \" + uploadBucket;\n      break;\n\n      case 'custom':\n      dataFeedSummary = \"Invoke custom container \" + df.dataFeedConfig.image + \":\" + df.dataFeedConfig.tag;\n      break;\n\n      default:\n      break;\n    }\n\n    return dataFeedSummary;\n  }\n\n  outputTable() {\n    if (this.props.dataFeeds && this.props.dataFeeds.length) {\n      return (\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Data Feed</TableCell>\n              <TableCell>Summary</TableCell>\n              <TableCell></TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.props.dataFeeds.map((df:DataFeed) => (\n              <TableRow key={df.uuid}>\n                <TableCell>{this.dataFeedName(df.dataFeed)}</TableCell>\n                <TableCell>{this.dataFeedSummary(df)}</TableCell>\n                <NWTableCell>\n                  <Button disabled={this.props.workflow.workflowType === \"multiTenantWebERL\"} variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.triggerEditDataFeed(df)}>\n                    <EditIcon/>&nbsp;Edit\n                  </Button>&nbsp;\n                  <Button disabled={this.props.workflow.workflowType === \"multiTenantWebERL\"} variant=\"contained\" color=\"default\" size=\"small\" onClick={() => this.props.deleteDataFeed(df)}>\n                    <DeleteIcon />&nbsp;Delete\n                  </Button>\n                </NWTableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      )\n    }\n    else {\n      return (\n        <Box>\n          Click on <b>Add Data Feed</b> to define your first data feed.\n        </Box>\n      )\n    }\n  }\n\n  showErrors() {\n    if (this.props.errors.duplicateDataFeed) {\n      return (\n        <Alert mb={4} severity=\"error\">You can only create one of each type of Data Feed</Alert>\n      )\n    }\n    else if (this.props.errors.invalidBucketName) {\n      return (\n        <Alert mb={4} severity=\"error\">Invalid Amazon S3 bucket name. <Link target=\"_blank\" href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html\">Naming guidelines</Link></Alert>\n      )\n    }\n    else if (this.props.errors.invalidPostUpdateKeyValues) {\n      return (\n        <Alert mb={4} severity=\"error\">Invalid parameter key or value. Parameters must not be empty and must not contain %, (, or ) characters</Alert>\n      )\n    }\n    else if (this.props.errors.invalidSecret) {\n      return (\n        <Alert mb={4} severity=\"error\">One or more of your secrets is missing a value - all fields are required</Alert>\n      )\n    }\n    return null;\n  }\n\n  getAgent() {\n    const agent = this.props.agents.filter((a:AgentRecord) => (\n      (a.uuid === this.props.workflow.agentId)));\n    // set stub result if method is called before data has been populated,\n    // there should always be an agent found\n    return (agent.length) ? agent[0] : {\n      configPath: '',\n      namespace: '',\n    };\n  }\n\n  disabledAlert(workflowType:string) {\n    return (workflowType === \"multiTenantWebERL\") ? (\n      <Box mt={4}>\n        <InfoIcon style={{ color: blue[500], fontSize: 25 }} /> <b>Definable Data Feeds are not supported with web-based workflows.</b>\n      </Box>\n    ) : null;\n  }\n\n  render() {\n    const namespaceTip = this.props.dataFeed.feedSecrets.length ? (\n      <p>\n        Be sure that any secrets that need to be attached to your post-processing Docker container exist in this same Kubernetes namespace.\n      </p>\n    ) : '';\n\n    return (\n      <React.Fragment>\n        <Box mt={8}>\n          <Typography variant=\"h4\" gutterBottom>\n            Data Feeds\n          </Typography>\n\n          <Dialog\n            open={this.props.editDataFeed}\n            onClose={this.props.hideDataFeed}\n            fullWidth\n            maxWidth=\"md\"\n            aria-labelledby=\"dialog-title\"\n            aria-describedby=\"dialog-description\"\n          >\n            <DialogTitle id=\"dialog-title\">{(!this.props.dataFeed.uuid.match(/^new/)) ? \"Edit\" : \"Add\"} Data Feed</DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"dialog-description\">\n                {this.showErrors()}\n\n                <Box display={(this.props.dataFeed.dataFeed === '') ? 'block' : 'none'}>\n                  {this.disabledAlert(this.props.workflow.workflowType)}\n                  <List component=\"nav\" aria-label=\"data feed selection\">\n                    <ListItem disabled={!(this.props.workflow.workflowType === \"ERL\")} button onClick={() => this.props.handleDataFeed('dataRepository')}>\n                      <ListItemText\n                        primary=\"Push Data to your Internal Data Repository\"\n                        primaryTypographyProps={{ style: bold }}\n                        secondary=\"Uploads your PII-free datasets to an Amazon S3 bucket, and reports the dataset to your Data Repository page. The Data Repositories page includes instructions to automate the download and installation of these data sets. This approach makes developer testing against production data easy, and is an effective alternative to creating and maintaining developer seed data.\" \n                      />\n                    </ListItem>\n\n                    <ListItem disabled={!(this.props.workflow.workflowType === \"ERL\")} button onClick={() => this.props.handleDataFeed('digitalTwin')}>\n                      <ListItemText\n                        primary=\"Create a PII-free Digital Twin/Clone\"\n                        primaryTypographyProps={{ style: bold }}\n                        secondary=\"Creates a PII-free clone of your data to a target/output database. Any data written in the target tables is replaced by the data from your source/input.\" \n                      />\n                    </ListItem>\n\n                    <ListItem disabled={!(this.props.workflow.workflowType === \"ERL\")} button onClick={() => this.props.handleDataFeed('s3upload')}>\n                      <ListItemText\n                        primary=\"Upload/Sync Data to an Amazon S3 Bucket\"\n                        primaryTypographyProps={{ style: bold }}\n                        secondary=\"Upload your table data CSV files to an Amazon S3 bucket.\" \n                      />\n                    </ListItem>\n\n                    <ListItem disabled={!(this.props.workflow.workflowType === \"ERL\")} button onClick={() => this.props.handleDataFeed('custom')}>\n                      <ListItemText\n                        primary=\"Configure a Custom Container/Plugin\"\n                        primaryTypographyProps={{ style: bold }}\n                        secondary=\"Trigger your own custom container to carry out work of your choosing.\" \n                      />\n                    </ListItem>\n                  </List>\n                </Box>\n\n                <Box mt={8} display={(this.props.dataFeed.dataFeed === 'dataRepository') ? 'block' : 'none'}>\n                  <Typography variant=\"h4\" gutterBottom>\n                    Data Repository Options\n                  </Typography>\n\n                  <Box mt={8}>\n                    <FormControl fullWidth variant=\"outlined\">\n                      <MedTextField\n                        name=\"S3UploadBucket\"\n                        error={this.props.errors.invalidBucketName}\n                        onChange={(event) => this.props.handleDataFeedOptions(event)}\n                        value={this.props.dataFeed.dataFeedConfig.S3UploadBucket}\n                        label=\"S3 Bucket\"\n                        InputProps={{\n                          startAdornment: <InputAdornment position=\"start\"><b>S3://</b></InputAdornment>,\n                        }}\n                      />\n                    </FormControl>\n                  </Box>\n\n                  <Box mt={8}>\n                    <Paper variant=\"outlined\">\n                      <ExpansionPanel>\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                          <Typography>Plugin Requirements</Typography>\n                        </ExpansionPanelSummary>\n                        <ExpansionPanelDetails>\n                          <p>\n                            This plugin requires an AWS access key ID and secret access key pair to authenticate to the provided bucket. Create an AWS credentials file in the style of the <code>~/.aws/credentials</code> example provided <Link href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html\" target=\"_blank\">here</Link> and run the following command to create a secret in your Kubernetes cluster namespace as the contents of this file:\n                          </p>\n                          <p>\n                            <code>\n                              kubectl create secret generic aws -n {this.props.agentNamespace || 'unknown_namespace'} --from-file=/path/to/aws/credentials\n                            </code>\n                          </p>\n                        </ExpansionPanelDetails>\n                      </ExpansionPanel>\n                    </Paper>\n                  </Box>\n                </Box>\n\n                <Box mt={8} display={(this.props.dataFeed.dataFeed === 'digitalTwin') ? 'block' : 'none'}>\n                  <Typography variant=\"h4\" gutterBottom>\n                    Digital Twin Options\n                  </Typography>\n\n                  <p>Adding this data feed will require updating your Agent configuration file (provided within the <Link href=\"/agents\" target=\"_blank\">Agents</Link> page), replacing the \"changeme\"s for connection ID <code>{this.props.dataFeed.uuid}</code> with the specified connection info for this input source.</p>\n\n                  <Box mt={4}>\n                    <FormControl margin=\"dense\" fullWidth>\n                      <InputLabel>\n                        Input Source\n                      </InputLabel>\n                      <Select\n                        error={this.props.errors.databaseEngine}\n                        value={this.props.dataFeed.dataFeedConfig.databaseEngine}\n                        name=\"databaseEngine\"\n                        onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      >\n                        <MenuItem key=\"postgresql\" value=\"postgresql\">PostgreSQL</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Box>\n                 \n                  <Box mt={4}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.props.dataFeed.dataFeedConfig.enableSSL}\n                          onChange={(event) => this.props.handleDataFeedOptions(event)}\n                          name=\"enableSSL\"\n                          color=\"primary\"\n                        />\n                      }\n                      label=\"Database Connectivity Should Be TLS/SSL Encrypted\"\n                    />\n                  </Box>\n\n                  <Box mt={4} display={(this.props.dataFeed.uuid.match(/^new/) && this.props.dataFeed.dataFeedConfig.enableSSL) ? 'block' : 'none'}>\n                    Once this data feed has been saved (and assigned an ID), edit this input to find TLS/SSL encryption setup instructions\n                  </Box>\n\n                  <Box mt={4} display={(!this.props.dataFeed.uuid.match(/^new/) && this.props.dataFeed.dataFeedConfig.enableSSL) ? 'block' : 'none'}>\n                    <Paper variant=\"outlined\">\n                      <ExpansionPanel>\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                          <Typography>TLS/SSL Encryption Setup Instructions</Typography>\n                        </ExpansionPanelSummary>\n                        <ExpansionPanelDetails>\n                          Enabling TLS/SSL encryption requires having an engineer perform the following four steps. These steps (even upon completion) will remain available here for reference:\n\n                          <ol>\n                            <li>Figure out what <code>sslmode</code> option is required by your database host/provider. Possibilities include <code>allow, prefer, require, verify-ca, verify-full</code> (<Link href=\"https://www.postgresql.org/docs/12/libpq-ssl.html\" target=\"_blank\">more info</Link>). Also figure out whether your database requires presenting only the root CA certificate, or the root CA as well as client cert and key files. Download these required files - we&apos;ll need them for step 3.</li>\n                            <li>Update your Helm configuration file (i.e. <code>{this.getAgent().configPath}</code>) and add the following in the block (respecting proper indentation level) that includes <code>id: {this.props.dataFeed.uuid}</code>. Take out the <code>sslcert</code> and <code>sslkey</code> params if your server doesn&apos;t require these, and you can adjust the <code>sslmode</code> value as necessary:<br/><br/>\n                              <code>\n                                enableSSL: true<br/>\n                                extra: &apos;&#123;&quot;sslmode&quot;:&quot;verify-ca&quot;, &quot;sslrootcert&quot;:&quot;/pgcerts/{this.props.dataFeed.uuid}/sslrootcert&quot;, &quot;sslcert&quot;: &quot;/pgcerts/{this.props.dataFeed.uuid}/sslcert&quot;, &quot;sslkey&quot;: &quot;/pgcerts/{this.props.dataFeed.uuid}/sslkey&quot;&#125;&apos;\n                              </code><br/><br/>\n                              If, for whatever reason, you&apos;d like to disable this TLS/SSL connectivity you can simply comment out these two lines by entering a hash (i.e. <code>#</code>) character before each line.\n                            </li>\n                            <li>Create a Kubernetes secret containing the certificates required by your database. Adjust the file paths, and take out the <code>sslcert</code> and <code>sslkey</code> params if your server doesn&apos;t require these:<br/><br/>\n                              <code>\n                                kubectl create secret -n {this.getAgent().namespace} generic pgcert-{this.props.dataFeed.uuid} --from-file=sslrootcert=/path/to/server-ca.pem --from-file=sslcert=/path/to/client-cert.pem  --from-file=sslkey=/path/to/client-key.pem\n                              </code>\n                            </li>\n                            <li>Visit the Agent page and reapply the provided configuration to your cluster, which will update all agent database connections to use the updated configuration you&apos;ve provided in your Helm configuration file.</li>\n                          </ol>\n                        </ExpansionPanelDetails>\n                      </ExpansionPanel>\n                    </Paper>\n                  </Box>\n\n                  <Box mt={4}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.props.dataFeed.dataFeedConfig.enableDeltaUpdates}\n                          onChange={(event) => this.props.handleDataFeedOptions(event)}\n                          name=\"enableDeltaUpdates\"\n                          color=\"primary\"\n                        />\n                      }\n                      label=\"Enable Delta Updates\"\n                    />\n                    <Box>\n                      After your initial job has run your workflow performance can be increased substantially by only transferring changed data, rather than recreating tables from scratch. Leave this disabled to hard-reset your data each time your workflow runs.\n                    </Box>\n                  </Box>\n\n                  <Box mt={4} display={(this.props.dataFeed.dataFeedConfig.enableDeltaUpdates) ? 'block' : 'none'}>\n                    <FormControl fullWidth>\n                      <TextField \n                        name=\"deltaUpdateField\"\n                        value={this.props.dataFeed.dataFeedConfig.deltaUpdateField}\n                        onChange={(event) => this.props.handleDataFeedOptions(event)}\n                        label=\"Updated Date Field Name\"\n                        InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Field name in your table that contains the timestamp tracking the last updated date, e.g. &quot;updated_at&quot;\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                      />\n                    </FormControl>\n                  </Box>\n\n                  <Box mt={4}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.props.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements}\n                          onChange={(event) => this.props.handleDataFeedOptions(event)}\n                          name=\"enablePostUpdatePreparedStatements\"\n                          color=\"primary\"\n                        />\n                      }\n                      label=\"Enable Custom Data Updates\"\n                    />\n                    <Box>\n                      Run custom SQL commands after your workflows run to make custom updates to your data. One use case for this is personalizing demos (e.g. to specify the name and logo of the company you are demoing to). To do so, you'll need to define a prepared SQL statement (i.e. an SQL command supporting parameters), as well as the values for these parameters.\n                    </Box>\n\n                    <Box mt={4} display={(this.props.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements) ? 'block' : 'none'}>\n                      <Box>\n                        As an example, in <code>UPDATE company SET name=%(company_name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s</code>, the three parameters in this prepared SQL statement are <code>company_name</code>, <code>logo</code>, and <code>company_id</code>. See below for the instructions for defining your prepared statements, and click on the <b>Add Parameter Value</b> button below these instructions to define the key/value pairs for each parameter in your prepared statement(s). For example, for the company_name parameter your parameter key would be <code>company_name</code>, and your parameter value: <code>Company we are demoing to</code>.\n                      </Box>\n\n                      <Box mt={4}>\n                        <Paper variant=\"outlined\">\n                          <ExpansionPanel>\n                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                              <Typography>Prepared Statement Setup Instructions</Typography>\n                            </ExpansionPanelSummary>\n                            <ExpansionPanelDetails>\n                              <Box>\n                                Prepared statements are SQL commands saved as Kubernetes secrets. Here is an example prepared statement: <code>UPDATE company SET name=%(name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s</code>. In this example <code>name</code>, <code>logo</code> and <code>company_id</code> are placeholder parameters requiring values, which you'll set below. Parameter key/value pairs are required rather than entire SQL commands for security reasons, and to make it easy for anybody in your company to change these values without running the risk of corrupting your data. To create this secret as per this example:<br/><br/>\n                                <code>kubectl create secret -n {this.getAgent().namespace} generic digital-twin --from-literal=prepared-statements=\"UPDATE company SET name=%(name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s;\"</code><br/><br/>\n                                Create your own prepared statements by replacing what is quoted here.<br/><br/>Multiple SQL commands are supported, separated by semicolons, and please note that the format of <code>%(your_variable)s</code> is required for all variable types (including non-strings) - the correct type will be automatically cast. All paraemters require that a value is provided.\n                              </Box>\n                            </ExpansionPanelDetails>\n                          </ExpansionPanel>\n                        </Paper>\n                      </Box>\n\n                      <Box mt={4}>\n                        <Table size=\"small\" style={{ width: 'auto' }}>\n                          <TableBody>\n                            {this.props.dataFeed.dataFeedConfig.postUpdateKeyValues.map((kv:PostUpdateParam, idx:number) => (\n                              <TableRow key={idx}>\n                                <TableCell style={{ paddingLeft: 0 }}>\n                                  <FormControl>\n                                    <TextField\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      name=\"parameterKey\"\n                                      value={kv.key}\n                                      onChange={(event) => this.props.updateParameterValue(idx, event)}\n                                      label=\"Parameter Key\"\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl>\n                                    <TextField\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      name=\"parameterValue\"\n                                      value={kv.value}\n                                      onChange={(event) => this.props.updateParameterValue(idx, event)}\n                                      label=\"Parameter Value\"\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.deleteParameterValue(idx)}>\n                                    <DeleteIcon />\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            ))}\n                          </TableBody>\n                        </Table>\n                        <Box mt={4}>\n                          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addParameterValue}>\n                            <AddIcon />&nbsp;&nbsp;Add Parameter Value\n                          </Button>\n                        </Box>\n                      </Box>\n                    </Box>\n                  </Box>\n                </Box>\n\n                <Box mt={8} display={(this.props.dataFeed.dataFeed === 's3upload') ? 'block' : 'none'}>\n                  <Typography variant=\"h4\" gutterBottom>\n                    Amazon S3 File Upload Options\n                  </Typography>\n\n                  <Box mt={8}>\n                    <Typography variant=\"h6\" gutterBottom>\n                      Data Files to Upload\n                    </Typography>\n\n                    <Grid container>\n                      <Grid item xs={8}>\n                        <Box mt={8}>\n                          <Paper variant=\"outlined\">\n                            <Box mt={4}>\n                              <Table>\n                                <TableHead>\n                                  <TableRow>\n                                    <TableCell><Checkbox onClick={this.props.addAllToS3UploadList} checked={this.props.dataFeed.dataFeedConfig.addAllS3Uploads} /> Add All Files</TableCell>\n                                    <TableCell align=\"left\">File</TableCell>\n                                  </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                {this.props.getS3UploadFileNames().map((f:string) => (\n                                  <TableRow key={f}>\n                                    <TableCell component=\"th\" scope=\"row\">\n                                      <Checkbox onClick={(event) => this.props.markAddToS3UploadList(event, f)} checked={!!(this.props.dataFeed.dataFeedConfig.uploadFileChecked && \n                                        this.props.dataFeed.dataFeedConfig.uploadFileChecked.includes(f))} />\n                                    </TableCell>\n                                    <TableCell align=\"left\">{f}</TableCell>\n                                  </TableRow>\n                                ))}\n                                </TableBody>\n                              </Table>\n                            </Box>\n                          </Paper>\n                        </Box>\n                      </Grid>\n                    </Grid>\n                  </Box>\n\n                  <Box mt={8}>\n                    <FormControl fullWidth variant=\"outlined\">\n                      <MedTextField\n                        name=\"S3UploadBucket\"\n                        error={this.props.errors.invalidBucketName}\n                        onChange={(event) => this.props.handleDataFeedOptions(event)}\n                        value={this.props.dataFeed.dataFeedConfig.S3UploadBucket}\n                        label=\"S3 Bucket\"\n                        InputProps={{\n                          startAdornment: <InputAdornment position=\"start\"><b>S3://</b></InputAdornment>,\n                        }}\n                      />\n                    </FormControl>\n                  </Box>\n                  \n                  <Box mt={8}>\n                    <Paper variant=\"outlined\">\n                      <ExpansionPanel>\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                          <Typography>Plugin Requirements</Typography>\n                        </ExpansionPanelSummary>\n                        <ExpansionPanelDetails>\n                          <p>\n                            This plugin requires an AWS access key ID and secret access key pair to authenticate to the provided bucket. Create an AWS credentials file in the style of the <code>~/.aws/credentials</code> example provided <Link href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html\" target=\"_blank\">here</Link> and run the following command to create a secret in your Kubernetes cluster namespace as the contents of this file:\n                          </p>\n                          <p>\n                            <code>\n                              kubectl create secret generic aws -n {this.props.agentNamespace || 'unknown_namespace'} --from-file=/path/to/aws/credentials\n                            </code>\n                          </p>\n                        </ExpansionPanelDetails>\n                      </ExpansionPanel>\n                    </Paper>\n                  </Box>\n                  \n                </Box>\n\n                <Box mt={8} display={(this.props.dataFeed.dataFeed === 'custom') ? 'block' : 'none'}>\n                  <Box>\n                    <Typography variant=\"h4\" gutterBottom>\n                      Custom Container/Plugin Configuration\n                    </Typography>\n\n                    <p>The filenames that will be exported are as follows: <b>{this.props.getS3UploadFileNames().join(', ')}</b>. Some documentation for developing your own custom container/plugin can be found on the <Link href=\"/developers\" target=\"_blank\">developers page</Link>.\n                    </p>\n                  </Box>\n\n                  <Box mt={4}>\n                    <MedTextField\n                      name=\"image\"\n                      error={this.props.errors.image}\n                      value={this.props.dataFeed.dataFeedConfig.image}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Docker Image\"\n                      placeholder=\"amazon/aws-cli\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Docker image URL (Dockerhub example: 'amazon/aws-cli')\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n                  <Box mt={4}>\n                    <MedTextField\n                      name=\"tag\"\n                      error={this.props.errors.tag}\n                      value={this.props.dataFeed.dataFeedConfig.tag}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Docker Image Tag\"\n                      placeholder=\"latest\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Image tag/version (e.g. 'latest', '5.0.0')\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n                  <Box mt={4}>\n                    <MedTextField\n                      name=\"shell\"\n                      error={this.props.errors.shell}\n                      value={this.props.dataFeed.dataFeedConfig.shell}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Shell Path\"\n                      placeholder=\"/bin/bash\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Custom container commands will be prefaced with this shell path, i.e. <shell path> -c '<command>' '<args>'\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n                  <Box mt={4}>\n                    <WideTextField\n                      name=\"command\"\n                      multiline\n                      rowsMax=\"4\"\n                      value={this.props.dataFeed.dataFeedConfig.command}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Command (optional)\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Optional command to override container default, in Docker this field name is 'entrypoint'.\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n\n                  <Box mt={4}>\n                    <WideTextField\n                      name=\"args\"\n                      multiline\n                      rowsMax=\"4\"\n                      value={this.props.dataFeed.dataFeedConfig.args}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Args (optional)\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Optional command to override container default, in Docker this field name is 'cmd'.\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n\n                  <Button variant=\"contained\" color=\"secondary\" mt={4} size=\"small\" onClick={() => { this.props.addSecret('volume'); }}>\n                    <HardDriveIcon />&nbsp;\n                    Attach Secret Disk/Volume to Container\n                  </Button>&nbsp;<Button variant=\"contained\" color=\"secondary\" mt={4} size=\"small\" onClick={() => { this.props.addSecret('env'); }}>\n                    <CodeIcon />&nbsp;\n                    Attach Environment Variable to Container\n                  </Button>\n\n                  <Box mt={8}>\n                    {namespaceTip}\n                    <Table size=\"small\" style={{ width: 'auto' }}>\n                      <TableBody>\n                        {this.props.dataFeed.feedSecrets.map((secret:CustomSecret, idx:number) => {\n                          if (secret.secretType === 'volume') {\n                            return (\n                              <TableRow key={idx}>\n                                <TableCell style={{ paddingLeft: 0 }}>\n                                  <HardDriveIcon />\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretName\"\n                                      value={secret.secretName}\n                                      label=\"Secret Name\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret name as it appears in 'kubectl get secrets'\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretKey\"\n                                      value={secret.secretKey}\n                                      label=\"Secret Key\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret key contained within this secret\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretPath\"\n                                      value={secret.secretPath}\n                                      label=\"Secret Container Path\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Path to mount this secret within your container\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <Button variant=\"contained\" size=\"small\" color=\"secondary\" onClick={() => this.props.handleDeleteSecret(idx)}>\n                                    <DeleteIcon />&nbsp;&nbsp;Delete\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            );\n                          }\n                          if (secret.secretType === 'env') {\n                            return (\n                              <TableRow>\n                                <TableCell style={{ paddingLeft: 0 }}>\n                                  <CodeIcon />\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretName\"\n                                      value={secret.secretName}\n                                      label=\"Secret Name\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret name as it appears in 'kubectl get secrets'\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretKey\"\n                                      value={secret.secretKey}\n                                      label=\"Secret Key\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret key contained within this secret\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"envName\"\n                                      value={secret.envName}\n                                      label=\"Variable Name\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Environment variable name to be presented to this container, often in all caps\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <Button variant=\"contained\" size=\"small\" color=\"secondary\" onClick={() => this.props.handleDeleteSecret(idx)}>\n                                    <DeleteIcon />&nbsp;&nbsp;Delete\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            );\n                          }\n\n                          return null;\n                        })}\n                      </TableBody>\n                    </Table>\n                  </Box>\n              </Box>\n              </DialogContentText>\n\n              <DialogActions>\n                <Box display={(this.props.dataFeed.dataFeed !== '') ? 'block' : 'none'}>\n                  <Button\n                    color=\"default\"\n                    variant=\"contained\"\n                    onClick={this.props.handleDataFeedBack}\n                  >\n                    Back\n                  </Button>&nbsp;\n                  <Button\n                    color=\"secondary\"\n                    variant=\"contained\"\n                    onClick={this.props.saveDataFeedChanges}\n                  >\n                    Update\n                  </Button>\n                </Box>\n                <Box display={(this.props.dataFeed.dataFeed === '') ? 'block' : 'none'}>\n                  <Button color=\"secondary\" onClick={this.props.handleDataFeedCancel}>\n                    Cancel\n                  </Button>\n                </Box>\n              </DialogActions>\n            </DialogContent>\n          </Dialog>\n\n          <Grid container>\n            <Grid item xs={8}>\n              <Typography variant=\"body1\" gutterBottom>\n                Data feeds provide several options for populating and/or syncing data with your No PII Zone on a recurring basis and sharing data with your internal and external stakeholders. With or without a data feed you can retrieve output files via the <code>Download Export</code> command provided by the <Link href=\"/developers\" target=\"_blank\">Redactics Agent CLI</Link>.\n              </Typography>\n            </Grid>\n          </Grid>\n\n          <Box mt={8}>\n            <Grid\n              justify=\"space-between\"\n              container\n              spacing={10}\n            >\n              <Grid item></Grid>\n              <Grid item mb={6}>\n                <div>\n                  <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addDataFeed}>\n                    <AddIcon />&nbsp;\n                    Add Data Feed\n                  </Button>\n                </div>\n              </Grid>\n            </Grid>\n\n            {this.outputTable()}\n          </Box>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WorkflowPostExport;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { spacing } from '@material-ui/system';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nimport {\n  TextField as MuiTextField,\n  FormControl as MuiFormControl,\n  Button,\n  Box,\n  Link,\n  Select,\n  MenuItem,\n  Tooltip,\n  InputAdornment,\n  InputLabel,\n  Paper,\n  ExpansionPanel,\n  ExpansionPanelDetails as MuiExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n} from '@material-ui/core';\n\nimport {\n  HelpOutline as HelpIcon,\n  ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\n\nimport {\n  Clipboard as ClipboardIcon,\n} from 'react-feather';\n\nimport { WorkflowRecord } from '../../types/redactics';\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst ExpansionPanelDetails = withStyles({\n  root: {\n    display: 'block',\n  },\n})(MuiExpansionPanelDetails);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable no-useless-escape */\n\ninterface IProps {\n  workflow: WorkflowRecord;\n  handleWFChanges: any;\n  classes: any;\n  inputs: any;\n  agentNamespace: string;\n  clipboardCopy: any;\n}\n\ninterface IState {\n\n}\n\nclass DatabaseMigrationSetup extends React.Component<IProps, IState> {\n  render() {\n    const helmHook = `\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: trigger-db-migration-mock-{{ .Release.Revision }}\n  namespace: ${this.props.workflow.migrationNamespace || \"default\"}\n  annotations:\n    \"helm.sh/hook\": pre-upgrade\n    \"helm.sh/hook-weight\": \"${this.props.workflow.migrationHelmHookWeight || \"0\"}\"\n    \"helm.sh/hook-delete-policy\": hook-succeeded\nspec:\n  template:\n    spec:\n      restartPolicy: Never\n      containers:\n        - name: trigger-db-migration-mock\n          image: redactics/airflow-dagrun-poller:1.1.0\n          imagePullPolicy: Always\n          args:\n          - bash\n          - -c\n          - |\n              DAG_RUN_ID=$(curl -s -X POST -d \"{\\\\\"workflowType\\\\\": \\\\\"mockDatabaseMigration\\\\\", \\\\\"workflowId\\\\\": \\\\\"\\${WORKFLOW_ID}\\\\\"}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -H \"x-api-key: \\${REDACTICS_API_KEY}\" \\${REDACTICS_API_URL}/workflow/jobs | jq -r '.uuid')\n              curl -s -X POST -H \"Authorization: Basic \\${BASIC_AUTH}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d \"{\\\\\"dag_run_id\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\", \\\\\"conf\\\\\": {\\\\\"workflowJobId\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\"}}\" \\${API_URL}/api/v1/dags/\\${DAG_ID}/dagRuns\n              DAG_RUN_ID=\\${DAG_RUN_ID} /poller.sh\n              if [ $? -ne 0 ]; then\n                exit 1\n              fi\n          env:\n          - name: REDACTICS_API_URL\n            value: https://api.redactics.com\n          - name: API_URL\n            value: http://redactics-webserver.${this.props.agentNamespace}.svc.cluster.local:8080\n          - name: DAG_ID\n            value: ${this.props.workflow.uuid}-migrationmocking\n          - name: TAIL_TASK_ID\n            value: clone-db\n          - name: WORKFLOW_ID\n            value: ${this.props.workflow.uuid}\n          - name: REDACTICS_API_KEY\n            valueFrom:\n              secretKeyRef:\n                name: redactics\n                key: api-key\n          - name: BASIC_AUTH\n            valueFrom:\n              secretKeyRef:\n                name: redactics\n                key: basic-auth\n    `\n    const script = `\n#!/bin/bash\n\n# change values as necessary, this script will work when running inside a Kubernetes container, and when the\n# variables REDACTICS_API_KEY and BASIC_AUTH are set outside of this script from values stored as Kubernetes secrets.\n# The open source libraries \"curl\" and \"jq\" must be available within this environment, in addition to the poller.sh script.\n\nexport REDACTICS_API_URL=https://api.redactics.com\nexport API_URL=http://redactics-webserver.${this.props.agentNamespace}.svc.cluster.local:8080\nexport DAG_ID=${this.props.workflow.uuid}-migrationmocking\nexport TAIL_TASK_ID=clone-db\nexport WORKFLOW_ID=${this.props.workflow.uuid}\nexport POLLER_PATH=/poller.sh\n\nDAG_RUN_ID=$(curl -s -X POST -d \"{\\\\\"workflowType\\\\\": \\\\\"mockDatabaseMigration\\\\\", \\\\\"workflowId\\\\\": \\\\\"\\${WORKFLOW_ID}\\\\\"}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -H \"x-api-key: \\${REDACTICS_API_KEY}\" \\${REDACTICS_API_URL}/workflow/jobs | jq -r '.uuid')\ncurl -s -X POST -H \"Authorization: Basic \\${BASIC_AUTH}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d \"{\\\\\"dag_run_id\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\", \\\\\"conf\\\\\": { \\\\\"workflowJobId\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\"}}\" \\${API_URL}/api/v1/dags/\\${DAG_ID}/dagRuns\nDAG_RUN_ID=\\${DAG_RUN_ID} \\${POLLER_PATH}\n    `\n    \n    return (\n      <React.Fragment>\n        <Box>\n          Performing a dry run of your migrations requires your adding a step to your CI/CD pipeline (or manual process) to trigger a workflow installed in the Redactics Agent. This workflow clones your database to prepare for your database migration dry-run against this clone. Once this step is complete you can then run your migration using an environment variable to override your database that would normally be used with your cloned database.\n        </Box>\n\n        <Box mt={4}>\n          One way to put together a complete working flow is to add some sort of flag in your CI/CD workflow that triggers this alteration to your normal workflow when a database migration dry-run option is selected, followed by the database migration against the clone. This can be done by triggering a script that runs on your server hosting your app, or if your database migration is triggered via a Helmchart hook, adding an additional hook that runs before your normal migration hook.\n        </Box>\n\n        <Box mt={4}>\n          Using the values you provide here, we will generate the code needed to perform this middle step which you can customize this as needed. We will also generate a secret containing your Redactics API key (used to show progress in <Link href=\"/workflows/jobs\">Workflows -&gt; Jobs</Link> as well as report issues to the notification bell icon in the upper right of this page), and an authentication token for the REST API embedded into the Redactics Agent. These secrets will be installed into your Kubernetes namespace (as you've provided below) the next time you upgrade your Redactics Agent software.\n        </Box>\n\n        <Box mt={8}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationNamespace}\n              name=\"migrationNamespace\"\n              label=\"Kubernetes Namespace\"\n              value={this.props.workflow.migrationNamespace}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Kubernetes namespace where your database migrations run\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={4}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationDatabase}\n              name=\"migrationDatabase\"\n              label=\"Database Name\"\n              value={this.props.workflow.migrationDatabase}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Database name of database that should be cloned\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={4}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationDatabaseClone}\n              name=\"migrationDatabaseClone\"\n              label=\"Cloned Database Name\"\n              value={this.props.workflow.migrationDatabaseClone}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Database name for your clone\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={4}>\n          <FormControl fullWidth>\n            <InputLabel htmlFor=\"agent\">Generate Configuration For</InputLabel>\n            <Select\n              //error={this.props.errors.migrationConfiguration}\n              name=\"migrationConfiguration\"\n              value={this.props.workflow.migrationConfiguration}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n            >\n              <MenuItem key=\"helmhook\" value=\"helmhook\">Sample Helmchart Hook</MenuItem>\n              <MenuItem key=\"script\" value=\"script\">Sample Script</MenuItem>\n            </Select>\n          </FormControl>\n        </Box>\n\n        <Box mt={4} display={(this.props.workflow.migrationConfiguration === \"helmhook\") ? \"block\" : \"none\"}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationDatabaseClone}\n              name=\"migrationHelmHookWeight\"\n              type=\"number\"\n              label=\"Helmchart Hook Weight\"\n              value={this.props.workflow.migrationHelmHookWeight || \"0\"}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Helmchart hook weight (hooks are executed in ascending order)\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={8} display={(this.props.workflow.migrationConfiguration === \"helmhook\") ? \"block\" : \"none\"}>\n          <Paper variant=\"outlined\">\n            <ExpansionPanel>\n              <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography>Sample Helmchart Hook</Typography>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails>\n                <Box>\n                  <CopyToClipboard text={helmHook} onCopy={() => this.props.clipboardCopy(\"sampleMigrationHook\")}>\n                    <Button variant=\"outlined\" size=\"small\" color=\"secondary\"><ClipboardIcon /></Button>\n                  </CopyToClipboard>\n                </Box>\n                <Box mt={2}>\n                  <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-all' }}>\n                    {helmHook}\n                  </pre>\n                </Box>\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          </Paper>\n        </Box>\n\n        <Box mt={8} display={(this.props.workflow.migrationConfiguration === \"script\") ? \"block\" : \"none\"}>\n          <Paper variant=\"outlined\">\n            <ExpansionPanel>\n              <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography>Sample Script</Typography>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails>\n                <Box>\n                  <CopyToClipboard text={script} onCopy={() => this.props.clipboardCopy(\"sampleMigrationScript\")}>\n                    <Button variant=\"outlined\" size=\"small\" color=\"secondary\"><ClipboardIcon /></Button>\n                  </CopyToClipboard>\n                </Box>\n                <Box mt={2}>\n                  <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-all' }}>\n                    {script}\n                  </pre>\n                </Box>\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          </Paper>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(DatabaseMigrationSetup);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\n// import { red, green, blue } from \"@material-ui/core/colors\";\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nimport {\n  Card as MuiCard,\n  CardContent,\n  Grid as MuiGrid,\n  Typography,\n  Button as MuiButton,\n  Box,\n  Snackbar,\n  IconButton,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Paper,\n  ExpansionPanel,\n  ExpansionPanelDetails as MuiExpansionPanelDetails,\n  ExpansionPanelSummary,\n  FormControl as MuiFormControl,\n  InputLabel,\n  Select as MuiSelect,\n  MenuItem,\n} from '@material-ui/core';\n\nimport {\n  ExpandMore as ExpandMoreIcon,\n  DeleteOutline as DeleteIcon,\n  Close as CloseIcon,\n} from '@material-ui/icons';\n\nimport {\n  Save as SaveIcon,\n  Clipboard as ClipboardIcon,\n} from 'react-feather';\n\nimport { Alert as MuiAlert } from '@material-ui/lab';\n\nimport { spacing } from '@material-ui/system';\nimport RedacticsContext from '../../contexts/RedacticsContext';\n\nimport WorkflowRedactionRules from './WorkflowRedactionRules';\nimport WorkflowInputs from './WorkflowInputs';\n//import WorkflowCompliance from './WorkflowCompliance';\nimport WorkflowSchedule from './WorkflowSchedule';\nimport WorkflowExport from './WorkflowExport';\nimport WorkflowPostExport from './WorkflowPostExport';\nimport DatabaseMigrationSetup from './DatabaseMigrationSetup';\n\nimport {\n  RedactRule, CustomSecret, WorkflowRecord, WorkflowUpdate, PostUpdateParam,\n  AgentRecord, RedactRulePreset, RedactRuleSet, DataFeed, AgentInputRecord, WorkflowInputRecord,\n} from '../../types/redactics';\n\nconst Card = styled(MuiCard)(spacing);\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst ExpansionPanelDetails = withStyles({\n  root: {\n    display: 'block',\n  },\n})(MuiExpansionPanelDetails);\n\nconst Alert = styled(MuiAlert)(spacing);\n\ninterface IProps {\n  deleteWorkflow: any;\n  handleWFChanges: any;\n  workflow: WorkflowRecord;\n  agentInputs: AgentInputRecord[];\n  agents: AgentRecord[];\n  presets?: RedactRulePreset[];\n  redactrulesets: RedactRuleSet[];\n  redactrules?: RedactRule[];\n  classes: any;\n}\n\ninterface IState {\n  errors: any;\n  agentId: string;\n  saveButtonDisabled: boolean;\n  agentNamespace?: string;\n  addAllS3Uploads: boolean;\n  S3UploadBucket: string;\n  tableOutputOptions: any;\n  exportTableSchemaAll: boolean;\n  exportTableDataAll: boolean;\n  S3UploadFileChecked: string[];\n  exportTableDataConfig: any;\n  displayExportTableData: string;\n  displayExportTableSchema: string;\n  customSchedule: boolean;\n  scheduleSelection: string;\n  schedule: string;\n  exportSchedule: boolean;\n  userSearchEmailField: string;\n  userSearchEmailDBTable: string;\n  userSearchEmailColumn: string;\n  maskingRuleValues: RedactRule[];\n  maskingRules: RedactRule[];\n  generateSoftDeleteQueries: boolean;\n  numMaskingRules: number;\n  newRuleKey: number;\n  input: WorkflowInputRecord;\n  inputs: WorkflowInputRecord[];\n  dataFeed: DataFeed;\n  dataFeeds: DataFeed[];\n  newInputKey: number;\n  newDataFeedKey: number;\n  addTable: string;\n  missingInput: boolean;\n  transformExpanded: boolean;\n  outputExpanded: boolean;\n  allDatabaseTables: string[];\n  currentDatabaseTable: string;\n  numInputs: number;\n  workflowType: string;\n  deltaUpdateField: string;\n  snackbarText: string;\n  // dialog toggles\n  showDialog: boolean;\n  showSnackbar: boolean;\n  helmReminderCheckbox: boolean;\n  showHelmReminder: boolean;\n  validDiskSize: boolean;\n  validName: boolean;\n  validSchedule: boolean;\n  missingSecretField: boolean;\n  invalidOutputSettingField: boolean;\n  missingPostExportHookField: boolean;\n  missingSchemaSelection: boolean;\n  dupeTableExportFound: boolean;\n  dupeRedactRuleFound: boolean;\n  completeRedactRules: boolean;\n  deleteWorkflowConfirmation: boolean;\n  showLastReportedError: boolean;\n  ackHelmReminder: boolean;\n  orphanedWorkflow: boolean;\n  editInputDialog: boolean;\n  showSnackbarEdit: boolean;\n  showOutputOptions: boolean;\n  editDataFeed: boolean;\n  columnExclusionProhibited: boolean;\n  invalidForgetUserFields: boolean;\n  invalidMigrationFields: boolean;\n  digitalTwinAdded: boolean;\n  // snackbar toggles\n  showClipboardSnackbar: boolean;\n}\n\nclass Workflow extends React.Component<IProps, IState> {\n  static contextType = RedacticsContext;\n\n  constructor(props:IProps) {\n    super(props);\n\n    this.saveChanges = this.saveChanges.bind(this);\n    this.hideHelmReminder = this.hideHelmReminder.bind(this);\n    this.toggleHelmReminder = this.toggleHelmReminder.bind(this);\n    this.addMaskingRule = this.addMaskingRule.bind(this);\n    this.deleteMaskingRule = this.deleteMaskingRule.bind(this);\n    this.handleRuleChange = this.handleRuleChange.bind(this);\n    this.showLastReportedError = this.showLastReportedError.bind(this);\n    this.hideLastReportedError = this.hideLastReportedError.bind(this);\n    this.addSecret = this.addSecret.bind(this);\n    this.handleDeleteSecret = this.handleDeleteSecret.bind(this);\n    this.hideErrorDialog = this.hideErrorDialog.bind(this);\n    this.handleExportSchedule = this.handleExportSchedule.bind(this);\n    this.handleSchedule = this.handleSchedule.bind(this);\n    this.handleDeltaUpdate = this.handleDeltaUpdate.bind(this);\n    this.handleCustomSecret = this.handleCustomSecret.bind(this);\n    this.validateRedactionRules = this.validateRedactionRules.bind(this);\n    this.addExportTableColumn = this.addExportTableColumn.bind(this);\n    this.deleteExportTableColumn = this.deleteExportTableColumn.bind(this);\n    this.handleTableOutputChanges = this.handleTableOutputChanges.bind(this);\n    this.validateOutputSettings = this.validateOutputSettings.bind(this);\n    this.validateForgetUserFields = this.validateForgetUserFields.bind(this);\n    this.deleteWorkflowConfirmation = this.deleteWorkflowConfirmation.bind(this);\n    this.cancelWorkflowConfirmation = this.cancelWorkflowConfirmation.bind(this);\n    this.clipboardCopy = this.clipboardCopy.bind(this);\n    this.handleSnackbarClose = this.handleSnackbarClose.bind(this);\n    this.handleSoftDeletionFields = this.handleSoftDeletionFields.bind(this);\n    this.handleSoftDeleteEmailAddressField = this.handleSoftDeleteEmailAddressField.bind(this);\n    this.markAddToS3UploadList = this.markAddToS3UploadList.bind(this);\n    this.addAllToS3UploadList = this.addAllToS3UploadList.bind(this);\n    this.getExportFileNames = this.getExportFileNames.bind(this);\n    this.saveInputChanges = this.saveInputChanges.bind(this);\n    this.triggerEditInputDialog = this.triggerEditInputDialog.bind(this);\n    this.handleInputChanges = this.handleInputChanges.bind(this);\n    this.selectInputSource = this.selectInputSource.bind(this);\n    this.handleAddTable = this.handleAddTable.bind(this);\n    this.triggerAddTable = this.triggerAddTable.bind(this);\n    this.hideInputDialog = this.hideInputDialog.bind(this);\n    this.deleteDatabaseTable = this.deleteDatabaseTable.bind(this);\n    this.deleteWorkflow = this.deleteWorkflow.bind(this);\n    this.transformExpansion = this.transformExpansion.bind(this);\n    this.triggerOutputOptions = this.triggerOutputOptions.bind(this);\n    this.hideOutputOptions = this.hideOutputOptions.bind(this);\n    this.addDataFeed = this.addDataFeed.bind(this);\n    this.hideDataFeed = this.hideDataFeed.bind(this);\n    this.handleDataFeed = this.handleDataFeed.bind(this);\n    this.addParameterValue = this.addParameterValue.bind(this);\n    this.updateParameterValue = this.updateParameterValue.bind(this);\n    this.deleteParameterValue = this.deleteParameterValue.bind(this);\n    this.handleDataFeedBack = this.handleDataFeedBack.bind(this);\n    this.handleDataFeedCancel = this.handleDataFeedCancel.bind(this);\n    this.getS3UploadFileNames = this.getS3UploadFileNames.bind(this);\n    this.handleDataFeedOptions = this.handleDataFeedOptions.bind(this);\n    this.saveDataFeedChanges = this.saveDataFeedChanges.bind(this);\n    this.triggerEditDataFeed = this.triggerEditDataFeed.bind(this);\n    this.deleteDataFeed = this.deleteDataFeed.bind(this);\n    this.resetDataFeedErrors = this.resetDataFeedErrors.bind(this);\n    //this.saveFeedback = this.saveFeedback.bind(this);\n\n    const maskingRuleValues:RedactRule[] = [];\n    if (this.props.workflow.redactrules && this.props.workflow.redactrules.length) {\n      this.props.workflow.redactrules.forEach((rule:RedactRule) => {\n        maskingRuleValues.push({\n          key: rule.uuid,\n          table: rule.table,\n          databaseTable: rule.databaseTable,\n          column: rule.column,\n          rule: rule.rule,\n          presetUuid: rule.presetUuid,\n        });\n      });\n    }\n\n    // const availableUserEmailRelations:string[] = [];\n    // if (this.props.workflow.redactrules && this.props.workflow.redactrules.length) {\n    //   const userSearchEmailField = (this.props.workflow.userSearchEmailField) ? this.props.workflow.userSearchEmailField.split('.')[0] : '';\n    //   const usedTables = (this.props.workflow.userSearchEmailRelations && this.props.workflow.userSearchEmailRelations.length) ? this.props.workflow.userSearchEmailRelations.map((r:string) => r.split('.')[0]) : [];\n    //   this.props.workflow.redactrules.forEach((rule:RedactRule) => {\n    //     if (rule.table !== userSearchEmailField && !usedTables.includes(rule.table)\n    //       && !availableUserEmailRelations.includes(rule.table)) {\n    //       availableUserEmailRelations.push(rule.table);\n    //     }\n    //   });\n    // }\n\n    const thisAgentSearch = this.props.agents.find(\n      (a:AgentRecord) => ((a.uuid === this.props.workflow.agentId)),\n    );\n    const agentNamespace = (thisAgentSearch) ? thisAgentSearch.namespace : '';\n\n    const userSearchEmailDBTable = (this.props.workflow.userSearchEmailField) ? this.props.workflow.userSearchEmailDBTable : '';\n    const userSearchEmailColumn = (this.props.workflow.userSearchEmailField) ? this.props.workflow.userSearchEmailColumn : '';\n\n    const state:IState = {\n      agentId: this.props.workflow.agentId,\n      newRuleKey: 0,\n      missingInput: (this.props.workflow.allDatabaseTables && this.props.workflow.allDatabaseTables.length) ? false : true,\n      transformExpanded: (this.props.workflow.allDatabaseTables && this.props.workflow.allDatabaseTables.length) ? true : false,\n      outputExpanded: false,\n      allDatabaseTables: this.props.workflow.allDatabaseTables,\n      saveButtonDisabled: false,\n      showHelmReminder: false,\n      helmReminderCheckbox: false,\n      showLastReportedError: false,\n      maskingRules: [],\n      maskingRuleValues,\n      completeRedactRules: true,\n      dupeRedactRuleFound: false,\n      dupeTableExportFound: false,\n      missingSchemaSelection: false,\n      missingSecretField: false,\n      invalidOutputSettingField: false,\n      missingPostExportHookField: false,\n      validSchedule: true,\n      validName: true,\n      validDiskSize: true,\n      numMaskingRules: maskingRuleValues.length,\n      exportSchedule: !!((this.props.workflow.schedule && this.props.workflow.schedule !== 'None')),\n      scheduleSelection: (this.props.workflow.schedule && !this.props.workflow.schedule.match(/^@/) && this.props.workflow.schedule !== 'None') ? 'custom' : this.props.workflow.schedule || '',\n      customSchedule: !!((this.props.workflow.schedule && !this.props.workflow.schedule.match(/^@/) && this.props.workflow.schedule !== 'None')),\n      schedule: this.props.workflow.schedule || 'None',\n      tableOutputOptions: [],\n      exportTableDataConfig: this.props.workflow.exportTableDataConfig || [],\n      generateSoftDeleteQueries: this.props.workflow.generateSoftDeleteQueries || false,\n      userSearchEmailField: this.props.workflow.userSearchEmailField || '',\n      userSearchEmailDBTable: userSearchEmailDBTable || \"\",\n      userSearchEmailColumn: userSearchEmailColumn || \"\",\n      addTable: '',\n      displayExportTableSchema: 'none',\n      displayExportTableData: 'none',\n      showClipboardSnackbar: false,\n      agentNamespace,\n      S3UploadFileChecked: [],\n      S3UploadBucket: '',\n      errors: {\n        schedule: false,\n        name: false,\n        diskSize: false,\n        duplicateDataFeed: false,\n      },\n      input: {\n        uuid: \"\",\n        inputName: \"\",\n        enabled: true,\n        tables: [],\n      },\n      inputs: this.props.workflow.inputs,\n      numInputs: this.props.workflow.inputs.length,\n      dataFeed: {\n        uuid: \"\",\n        dataFeed: \"\",\n        dataFeedConfig: {\n          uploadFileChecked: [],\n          addAllS3Uploads: false,\n          s3Bucket: \"\",\n          postUpdateKeyValues: []\n        },\n        feedSecrets: [],\n      },\n      dataFeeds: this.props.workflow.datafeeds,\n      editInputDialog: false,\n      showDialog: false,\n      showSnackbarEdit: false,\n      newInputKey: 0,\n      newDataFeedKey: 0,\n      addAllS3Uploads: false,\n      exportTableSchemaAll: false,\n      exportTableDataAll: false,\n      showSnackbar: false,\n      deleteWorkflowConfirmation: false,\n      ackHelmReminder: false,\n      orphanedWorkflow: false,\n      currentDatabaseTable: \"\",\n      showOutputOptions: false,\n      editDataFeed: false,\n      columnExclusionProhibited: false,\n      invalidForgetUserFields: false,\n      invalidMigrationFields: false,\n      digitalTwinAdded: false,\n      workflowType: '',\n      deltaUpdateField: this.props.workflow.deltaUpdateField || \"\",\n      snackbarText: \"\"\n    };\n\n    this.props.redactrulesets.forEach((rule:RedactRuleSet) => {\n      state.maskingRules.push({\n        table: '',\n        databaseTable: '',\n        column: '',\n        rule: '',\n        key: rule.redactKey,\n        val: rule.redactName,\n      });\n    });\n\n    if (this.props.presets && this.props.presets.length) {\n      this.props.presets.forEach((preset:RedactRulePreset) => {\n        if (!preset.isDefault) {\n          state.maskingRules.push({\n            table: '',\n            databaseTable: '',\n            column: '',\n            rule: '',\n            key: `preset-${preset.uuid}`,\n            val: `Preset: ${preset.presetName}`,\n            presetUuid: preset.uuid,\n          });\n        }\n      });\n    }\n\n    // set default table output options\n    this.props.workflow.inputs.forEach((input:WorkflowInputRecord) => {\n      if (input.tables && input.tables.length) {\n        input.tables.forEach((table:string) => {\n          state.tableOutputOptions[table] = {\n            errors: {\n              addColumn: false\n            },\n            addColumn: '',\n            exportColumns: \"all\",\n            exportRows: \"all\",\n            fields: [],\n            numDays: 30,\n            sampleFields: \"createdAndUpdated\",\n            createdAtField: \"created_at\",\n            updatedAtField: \"updated_at\",\n          }\n        })\n      }\n    })\n\n    // replace table output options with recorded values    \n    this.props.workflow.exportTableDataConfig.forEach((c:any) => {\n      Object.entries(c).forEach((cf:any) => {\n        const [table, config] = cf;\n        if (!config.updatedAtField) {\n          // default to delta update field, fallback to \"updated_at\" if this doesn't exist\n          config.updatedAtField = state.deltaUpdateField;\n        }\n        state.tableOutputOptions[table] = {\n          errors: {\n            addColumn: false\n          },\n          addColumn: '',\n          exportColumns: (config.fields && config.fields.length) ? \"specific\" : \"all\",\n          exportRows: (config.numDays) ? \"specific\" : \"all\",\n          fields: config.fields || [],\n          numDays: config.numDays || 30,\n          sampleFields: config.sampleFields || \"createdAndUpdated\",\n          createdAtField: config.createdAtField || \"created_at\",\n          updatedAtField: config.updatedAtField || \"updated_at\",\n        }\n      })\n    })\n\n    // look for orphaned workflows\n    if (this.props.workflow.workflowType === \"ERL\" && !this.props.workflow.agentId) {\n      state.orphanedWorkflow = true;\n    }\n\n    // init state\n    this.state = state;\n  }\n\n  componentDidMount() {\n    // copy context data into component state\n    this.setState({\n      ackHelmReminder: this.context.ackHelmReminder,\n    });\n  }\n\n  clipboardCopy(copied:string) {\n    let copiedText:string = \"\";\n    switch (copied) {\n      case 'dbuuid':\n      copiedText = \"This workflow UUID has been copied to your clipboard\";\n      break;\n\n      case 'sampleMigrationHook':\n      copiedText = \"This sample Helmchart hook has been copied to your clipboard\";\n      break;\n\n      case 'sampleMigrationScript':\n      copiedText = \"This sample script has been copied to your clipboard\";\n      break;\n    }\n    this.setState({\n      showClipboardSnackbar: true,\n      snackbarText: copiedText,\n    });\n  }\n\n  handleRuleChange(key:string, event:any) {\n    const { maskingRuleValues } = this.state;\n    const values = this.state.maskingRuleValues.filter((value:RedactRule) => value.key === key);\n\n    maskingRuleValues.map((row:RedactRule) => {\n      if (row.key === key && event.target.name === 'databaseTable') {\n        values[0].databaseTable = event.target.value;\n      } else if (row.key === key && event.target.name === 'column') {\n        values[0].column = event.target.value;\n      } else if (row.key === key && event.target.name === 'rule') {\n        values[0].rule = event.target.value;\n        if (event.target.value.match(/^preset-/)) {\n          const preset = this.state.maskingRules.filter((mr:RedactRule) => {\n            if (mr.key === event.target.value) {\n              return mr;\n            }\n\n            return false;\n          });\n          values[0].presetUuid = preset[0].presetUuid;\n        } else {\n          values[0].presetUuid = '';\n        }\n      }\n\n      return values;\n    });\n\n    this.setState({\n      maskingRuleValues,\n    });\n\n    // console.log(maskingRuleValues)\n  }\n\n  // saveFeedback() {\n  //   let showDialog = (this.state.numInputs === this.state.inputs.length) ? false : true;\n  //   const digitalTwinAdded = this.state.dataFeeds.find((df:DataFeed) => {\n  //     return (df.dataFeed === \"digitalTwin\" && df.uuid.match(/^new/)) ? true : false;\n  //   }) ? true : false;\n  //   if (digitalTwinAdded) { showDialog = true; }\n\n  //   this.setState({\n  //     showDialog,\n  //   });\n\n  //   if (showDialog) {\n  //     return 'dialog';\n  //   }\n  //   else {\n  //     return 'snackbar';\n  //   }\n  // }\n\n  async saveChanges(workflowId:string) {\n    // console.log(this.state);\n\n    this.setState({\n      saveButtonDisabled: true,\n      errors: {},\n    });\n\n    // prep exportTableDataConfig\n    const dataConfig:any = {};\n    this.state.allDatabaseTables.forEach((t:string) => {\n      const tableArr:string[] = t.split(': ');\n      const table:string = tableArr[(tableArr.length - 1)];\n      dataConfig[table] = {\n        table: table,\n        fields: (this.state.tableOutputOptions[table].exportColumns === \"all\") ? [] : this.state.tableOutputOptions[table].fields,\n        numDays: (this.state.tableOutputOptions[table].exportRows === \"all\") ? null : parseInt(this.state.tableOutputOptions[table].numDays),\n        sampleFields: (this.state.tableOutputOptions[table].exportRows === \"all\") ? null : this.state.tableOutputOptions[table].sampleFields,\n        createdAtField: (this.state.tableOutputOptions[table].exportRows === \"all\") ? null : this.state.tableOutputOptions[table].createdAtField,\n        updatedAtField: (this.state.tableOutputOptions[table].exportRows === \"all\") ? null : this.state.tableOutputOptions[table].updatedAtField,\n      }\n    })\n\n    const payload:WorkflowUpdate = {\n      name: this.props.workflow.name,\n      agentId: this.props.workflow.agentId,\n      workflowType: this.props.workflow.workflowType,\n      inputs: this.state.inputs,\n      dataFeeds: this.state.dataFeeds,\n      maskingRules: this.state.maskingRuleValues,\n      schedule: this.state.schedule,\n      exportTableDataConfig: [dataConfig],\n      generateSoftDeleteQueries: !!(this.state.generateSoftDeleteQueries),\n      userSearchEmailField: this.state.userSearchEmailField,\n      userSearchEmailDBTable: this.state.userSearchEmailDBTable,\n      userSearchEmailColumn: this.state.userSearchEmailColumn,\n      deltaUpdateField: this.state.deltaUpdateField,\n      migrationNamespace: this.props.workflow.migrationNamespace,\n      migrationDatabase: this.props.workflow.migrationDatabase,\n      migrationDatabaseClone: this.props.workflow.migrationDatabaseClone,\n      migrationConfiguration: this.props.workflow.migrationConfiguration,\n      migrationHelmHookWeight: this.props.workflow.migrationHelmHookWeight,\n    };\n\n    //console.log('PAYLOAD', payload);\n    //console.log(this.state);\n\n    if (this.validateRedactionRules() && this.validateOutputSettings() && \n      this.validateForgetUserFields() && this.validateMigrationMockFields()) {\n      try {\n        const response = await fetch(`${this.context.apiUrl}/workflow/${workflowId}`, {\n          method: 'put',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          credentials: 'include',\n          body: JSON.stringify(payload),\n        });\n\n        this.setState({\n          saveButtonDisabled: false,\n        });\n\n        const data = await response.json();\n\n        if (data.errors) {\n          let invalidSchedule:boolean = false;\n          let orphanedWorkflow:boolean = false;\n          let columnExclusion:boolean = false;\n          const invalidScheduleError = \"Invalid schedule\";\n          const orphanedWorkflowError = \"Invalid agent ID\";\n          const columnExclusionError = \"Data feed does not permit column exclusion\";\n          \n          if (Array.isArray(data.errors)) {\n            // multiple errors found\n            invalidSchedule = data.errors.find((e:any) => ((e.msg === invalidScheduleError)));\n            orphanedWorkflow = data.errors.find((e:any) => ((e.msg === orphanedWorkflowError) && e.param === 'agentId'));\n            columnExclusion = data.errors.find((e:any) => ((e.msg === columnExclusionError)));\n          }\n          else {\n            // single error returned as string\n            invalidSchedule = (data.errors === invalidScheduleError) ? true : false;\n            orphanedWorkflow = (data.errors === orphanedWorkflowError) ? true : false;\n            columnExclusion = (data.errors === columnExclusionError) ? true : false;\n          }\n          if (invalidSchedule) {\n            this.setState({\n              validSchedule: false,\n              errors: {\n                schedule: true,\n              },\n            });\n          } else if (orphanedWorkflow) {\n            this.setState({\n              orphanedWorkflow: true,\n              errors: {\n                agentId: true,\n              },\n            });\n          } else if (columnExclusion) {\n            this.setState({\n              columnExclusionProhibited: true,\n            });\n          }\n          return;\n        }\n\n        if (this.props.workflow.workflowType === \"multiTenantWebERL\") {\n          // redirect to jobs page\n          window.location.href = \"/workflows/jobs\";\n          return;\n        }\n\n        // attach new redact rule UUIDs to state\n        const maskingRuleValues = this.state.maskingRuleValues.map((r:RedactRule, idx:number) => {\n          const rule = r;\n          rule.key = data.redactRuleUuids[idx];\n          return rule;\n        });\n\n        this.setState({\n          showDialog: (data.updateHelmConfig) ? true : false,\n          showSnackbar: (data.updateHelmConfig) ? false : true,\n          maskingRuleValues,\n          saveButtonDisabled: false,\n          numInputs: this.state.inputs.length,\n        });\n      } catch (err) {\n        // console.log('CATCH ERR', error);\n\n        this.setState({\n          saveButtonDisabled: false,\n        });\n      }\n    } else {\n      this.setState({\n        saveButtonDisabled: false,\n      });\n    }\n  }\n\n  async hideHelmReminder() {\n    if (this.state.helmReminderCheckbox) {\n      // record acknowledgement of reminder (for embedded agent config feature)\n      await fetch(`${this.context.apiUrl}/workflow/ackReminder`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n      });\n\n      this.setState({\n        ackHelmReminder: true,\n        showDialog: false,\n      });\n    } else {\n      this.setState({\n        showDialog: false,\n      });\n    }\n  }\n\n  toggleHelmReminder(event:any) {\n    this.setState({\n      helmReminderCheckbox: event.target.checked,\n    });\n  }\n\n  validateRedactionRules() {\n    // skip validation if GUI disabled\n    if (this.state.missingInput) { return true; }\n\n    const rules:string[] = [];\n    let dupeRedactRuleFound = false;\n\n    const validFields = this.state.maskingRuleValues.filter((rule:RedactRule) => {\n      let missingFields:number = 0;\n\n      if (rules.includes(`${rule.databaseTable}.${rule.column}`)) {\n        dupeRedactRuleFound = true;\n      } else {\n        rules.push(`${rule.databaseTable}.${rule.column}`);\n      }\n\n      if (!rule.databaseTable) { missingFields++; }\n      if (!rule.column) { missingFields++; }\n      if (!rule.rule) { missingFields++; }\n\n      if (missingFields === 1 || missingFields === 2 || !this.legalName(rule.column)) {\n        // allow blanks and complete sets\n        return rule;\n      }\n\n      return false;\n    });\n\n    const validRules = !((validFields.length || dupeRedactRuleFound));\n    const completeRedactRules = !validFields.length;\n\n    this.setState({\n      completeRedactRules,\n      dupeRedactRuleFound,\n    });\n    return validRules;\n  }\n\n  validateOutputSettings() {\n    let invalidDBField:boolean = false;\n    this.state.allDatabaseTables.forEach((t:string) => {\n      const tableArr:string[] = t.split(': ');\n      const table:string = tableArr[(tableArr.length - 1)];\n      if (this.state.tableOutputOptions[table].exportRows !== \"all\") {\n        if (this.state.tableOutputOptions[table].sampleFields.toLowerCase().match(/created/) &&\n          (!this.state.tableOutputOptions[table].createdAtField || !this.legalName(this.state.tableOutputOptions[table].createdAtField))) {\n          invalidDBField = true;\n        }\n        else if (this.state.tableOutputOptions[table].sampleFields.toLowerCase().match(/updated/) &&\n          (!this.state.tableOutputOptions[table].updatedAtField || !this.legalName(this.state.tableOutputOptions[table].updatedAtField))) {\n          invalidDBField = true;\n        }\n      }\n    })\n\n    if (invalidDBField) {\n      this.setState({\n        invalidOutputSettingField: true\n      })\n      return false;\n    }\n\n    return true;\n  }\n\n  validateForgetUserFields() {\n    if (this.state.generateSoftDeleteQueries) {\n      if (!this.state.userSearchEmailDBTable || !this.state.userSearchEmailColumn || \n        !this.legalName(this.state.userSearchEmailColumn)) {\n        this.setState({\n          invalidForgetUserFields: true\n        })\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  validateMigrationMockFields() {\n    if (this.props.workflow.workflowType === \"mockDatabaseMigration\") {\n      if (!this.props.workflow.migrationNamespace || !this.props.workflow.migrationDatabase || \n        !this.props.workflow.migrationDatabaseClone || !this.props.workflow.migrationConfiguration) {\n        this.setState({\n          invalidMigrationFields: true\n        })\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  hideErrorDialog() {\n    this.setState({\n      completeRedactRules: true,\n      dupeRedactRuleFound: false,\n      dupeTableExportFound: false,\n      validSchedule: true,\n      validName: true,\n      validDiskSize: true,\n      missingSchemaSelection: false,\n      missingPostExportHookField: false,\n      missingSecretField: false,\n      invalidOutputSettingField: false,\n      orphanedWorkflow: false,\n      columnExclusionProhibited: false,\n      invalidForgetUserFields: false,\n      invalidMigrationFields: false,\n    });\n  }\n\n  deleteMaskingRule(key:string) {\n    const maskingRuleValues = this.state.maskingRuleValues.filter(\n      (row:RedactRule) => (row.key !== key),\n    );\n\n    this.setState({\n      numMaskingRules: (this.state.numMaskingRules - 1),\n      maskingRuleValues,\n    });\n  }\n\n  addMaskingRule() {\n    const { maskingRuleValues } = this.state;\n\n    const numMaskingRules = this.state.numMaskingRules + 1;\n    const newRuleKey = this.state.newRuleKey + 1; // random array idx value\n    maskingRuleValues.push({\n      key: `new${newRuleKey}`,\n      databaseTable: '',\n      table: '',\n      column: '',\n      rule: '',\n    });\n\n    this.setState({\n      maskingRuleValues,\n      numMaskingRules,\n      newRuleKey,\n    });\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({\n      showSnackbar: false,\n      showSnackbarEdit: false,\n      showClipboardSnackbar: false,\n    });\n  };\n\n  deleteWorkflowConfirmation() {\n    this.setState({\n      deleteWorkflowConfirmation: true,\n    });\n  }\n\n  cancelWorkflowConfirmation() {\n    this.setState({\n      deleteWorkflowConfirmation: false,\n    });\n  }\n\n  displayLastReportedError() {\n    return this.props.workflow.lastStackTrace ? this.props.workflow.lastStackTrace.split('\\n').map((text:string, index:number) => <React.Fragment key={`${text}-${index}`}>\n        {text}\n        <br />\n      </React.Fragment>) : '';\n  }\n\n  showLastReportedError(event:any) {\n    event.preventDefault();\n\n    this.setState({\n      showLastReportedError: true,\n    });\n  }\n\n  hideLastReportedError() {\n    this.setState({\n      showLastReportedError: false,\n    });\n  }\n\n  static displayStatus(lastTask:string) {\n    if (lastTask) {\n      return (\n        <Box mt={8}>\n          <Typography variant=\"h6\" gutterBottom>\n            Status\n          </Typography>\n\n          Last task: <b>{lastTask}</b>\n        </Box>\n      );\n    }\n\n    return null;\n  }\n\n  handleDataTableDelete(table:string) {\n    const exportTableDataConfig = this.state.exportTableDataConfig.filter(\n      (t:string) => t !== table,\n    );\n\n    this.setState({\n      exportTableDataConfig,\n    });\n  }\n\n  handleCustomSecret(event:any, idx:number) {\n    const state:IState = this.state;\n    state.dataFeed.feedSecrets[idx][event.target.name] = event.target.value;\n\n    this.setState({\n      dataFeed: state.dataFeed,\n    });\n  }\n\n  addSecret(secretType:string) {\n    const state:IState = this.state;\n    state.dataFeed.feedSecrets.push({\n      secretType,\n      secretName: '',\n      secretKey: '',\n      secretPath: '',\n    });\n\n    this.setState({\n      dataFeed: state.dataFeed,\n    });\n  }\n\n  handleDeleteSecret(idx:number) {\n    const state:IState = this.state;\n    state.dataFeed.feedSecrets = state.dataFeed.feedSecrets.filter(\n      (secret:any, i:number) => i !== idx,\n    );\n\n    this.setState({\n      dataFeed: state.dataFeed,\n    });\n  }\n\n  handleExportSchedule(event:any) {\n    if (event.target.value === 'false') {\n      this.setState({\n        exportSchedule: false,\n        schedule: 'None',\n      });\n    } else {\n      this.setState({\n        exportSchedule: true,\n        schedule: '* 0 * * *',\n      });\n    }\n  }\n\n  handleSchedule(event:any) {\n    const state:any = {};\n    if (event.target.name === 'scheduleSelection') {\n      state.scheduleSelection = event.target.value;\n      state.customSchedule = (event.target.value === 'custom');\n    }\n    state.schedule = (event.target.value === 'custom') ? '* 0 * * *' : event.target.value;\n    this.setState(state);\n  }\n\n  handleDeltaUpdate(event:any) {\n    this.setState({\n      deltaUpdateField: event.target.value\n    });\n  }\n\n  dbUUIDSnackbar() {\n    return (\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        open={this.state.showClipboardSnackbar}\n        autoHideDuration={8000}\n        onClose={this.handleSnackbarClose}\n        ContentProps={{\n          'aria-describedby': 'message-id',\n        }}\n        message={<span id=\"message-id\">{this.state.snackbarText}</span>}\n        action={[\n          <IconButton\n            key=\"close\"\n            aria-label=\"Close\"\n            color=\"inherit\"\n            onClick={this.handleSnackbarClose}\n          >\n            <CloseIcon />\n          </IconButton>,\n        ]}\n      />\n    );\n  }\n\n  handleSoftDeletionFields(event:any) {\n    const state:any = {};\n    if (event.target.name === 'generateSoftDeleteQueries') {\n      state[event.target.name] = event.target.checked;\n    } else {\n      state[event.target.name] = event.target.value;\n    }\n\n    this.setState(state);\n  }\n\n  handleSoftDeleteEmailAddressField(event:any) {\n    const state:IState = this.state;\n    let tableName:string = \"\";\n    if (event.target.name === \"userSearchEmailDBTable\") {\n      let tableArr:string[] = event.target.value.split(': ');\n      tableName = tableArr[(tableArr.length - 1)];\n\n      state.userSearchEmailField = tableName + \".\" + state.userSearchEmailColumn;\n      state.userSearchEmailDBTable = event.target.value;\n    }\n    else if (event.target.name === \"userSearchEmailColumn\") {\n      let tableArr:string[] = state.userSearchEmailDBTable.split(': ');\n      tableName = tableArr[(tableArr.length - 1)];\n\n      state.userSearchEmailField = tableName + \".\" + event.target.value;\n      state.userSearchEmailColumn = event.target.value;\n    }\n\n    this.setState(state);\n  }\n\n  markAddToS3UploadList(event:any, fileName:string) {\n    const state:IState = this.state;\n\n    if (event.target.checked) {\n      // add to list\n      state.dataFeed.dataFeedConfig.uploadFileChecked.push(fileName);\n\n      if (state.dataFeed.dataFeedConfig.uploadFileChecked.length === this.getS3UploadFileNames().length) {\n        state.dataFeed.dataFeedConfig.addAllS3Uploads = true;\n      }\n    } else {\n      state.dataFeed.dataFeedConfig.uploadFileChecked = state.dataFeed.dataFeedConfig.uploadFileChecked.filter(\n        (f:string) => ((f !== fileName)),\n      );\n      state.dataFeed.dataFeedConfig.addAllS3Uploads = false;\n    }\n\n    this.setState(state);\n  }\n\n  getExportFileNames() {\n    const filenames:string[] = [];\n    this.state.exportTableDataConfig.forEach((t:string) => {\n      filenames.push(`table-${t}.csv`);\n    });\n\n    return filenames;\n  }\n\n  getS3UploadFileNames() {\n    const filenames:string[] = [];\n    if (!this.state.allDatabaseTables) { return []; }\n    this.state.allDatabaseTables.forEach((dt:string) => {\n      const tableArr = dt.split(\": \");\n      const table = tableArr[(tableArr.length - 1)];\n      filenames.push(`table-${table}.csv`);\n    });\n\n    return filenames;\n  }\n\n  addAllToS3UploadList(event:any) {\n    const state:IState = this.state;\n\n    if (event.target.checked) {\n      // check all\n      state.dataFeed.dataFeedConfig.uploadFileChecked = [];\n      this.getS3UploadFileNames().forEach((f) => {\n        state.dataFeed.dataFeedConfig.uploadFileChecked.push(f);\n      });\n\n      state.dataFeed.dataFeedConfig.addAllS3Uploads = true;\n    } else {\n      state.dataFeed.dataFeedConfig.uploadFileChecked = [];\n      state.dataFeed.dataFeedConfig.addAllS3Uploads = false;\n    }\n\n    this.setState(state);\n  }\n\n  addExportTableColumn(event:any, table:string) {\n    const state:IState = this.state;\n    if (!state.tableOutputOptions[table].addColumn) { return; }\n    else if (!this.legalName(state.tableOutputOptions[table].addColumn)) {\n      state.tableOutputOptions[table].errors.addColumn = true;\n    }\n    else {\n      state.tableOutputOptions[table].fields.push(state.tableOutputOptions[table].addColumn);\n      state.tableOutputOptions[table].addColumn = \"\";\n      state.tableOutputOptions[table].errors.addColumn = false;\n    }\n    this.setState(state);\n  }\n\n  deleteExportTableColumn(event:any, table:string, field:string) {\n    const state:IState = this.state;\n\n    state.tableOutputOptions[table].fields = state.tableOutputOptions[table].fields.filter((f:string) => {\n      return (f === field) ? false : true;\n    })\n    this.setState(state);\n  }\n\n  handleTableOutputChanges(event:any, table:string) {\n    const state:IState = this.state;\n    \n    state.tableOutputOptions[table][event.target.name] = event.target.value;\n\n    // transfer data that should be saved to exportTableDataConfig\n    switch (event.target.name) {\n      case 'createdAtField':\n      case 'fields':\n      case 'numDays':\n      case 'sampleFields':\n      case 'updatedAtField':\n        state.exportTableDataConfig = state.exportTableDataConfig.map((config:any) => {\n          const table = Object.keys(config)[0]\n          config[table][event.target.name] = event.target.value;\n          return config;\n        })\n        break;\n\n      default:  \n        break;\n    }\n    this.setState(state);\n  }\n\n  triggerEditInputDialog(input:WorkflowInputRecord, workflowType:string) {\n    // dereference\n    const inputCopy:WorkflowInputRecord = {\n      inputName: input.inputName,\n      uuid: input.uuid,\n      enabled: input.enabled,\n      tables: input.tables,\n    }\n    this.setState({\n      input: inputCopy,\n      workflowType,\n      editInputDialog:true\n    });\n  }\n\n  handleInputChanges(event:any, input:WorkflowInputRecord) {\n    const state:any = this.state;\n    state.inputs = state.inputs.map((i:any) => {\n      if (i.uuid === input.uuid) {\n        i[event.target.name] = (event.target.name === \"enabled\") ? event.target.checked : event.target.value;\n      }\n      return i;\n    })\n    this.setState(state);\n  }\n\n  selectInputSource(event:any) {\n    const state:any = this.state;\n    const findInput = this.props.agentInputs.find((input:AgentInputRecord) => {\n      return (input.uuid === event.target.value)\n    })\n    if (findInput) {\n      state.inputs = [{\n        uuid: findInput.uuid,\n        enabled: true,\n        inputName: findInput.inputName,\n      }]\n      this.setState(state);\n    }\n  }\n\n  handleAddTable(event:any) {\n    this.setState({\n      addTable: event.target.value\n    })\n  }\n\n  triggerAddTable() {\n    const state:IState = this.state;\n    state.errors.addTable = false;\n\n    if (!state.addTable) {\n      return;\n    }\n    else if (!this.legalName(this.state.addTable)) {\n      state.errors.addTable = true;\n      this.setState({\n        errors: state.errors\n      })\n      return;\n    }\n    const input = this.state.input;\n    if (!input.tables) {\n      input.tables = [];\n    }\n    input.tables.push(this.state.addTable);\n\n    this.setState({\n      errors: state.errors,\n      input:input,\n      addTable:\"\",\n    })\n  }\n\n  legalName(name:string) {\n    // skip if no name is provided\n    if (!name) { return true; }\n    return (name.match(/^[a-zA-Z_][a-zA-Z0-9_]{1,30}$/)) ? true : false;\n  }\n\n  deleteWorkflow(input:WorkflowInputRecord) {\n    const state:IState = this.state;\n    state.inputs = state.inputs.filter((i:WorkflowInputRecord) => {\n      return (i.uuid === input.uuid) ? false : true\n    });\n\n     // update listing of tables\n    state.allDatabaseTables = [];\n    state.inputs.forEach((input:WorkflowInputRecord) => {\n      if (!input.tables) {\n        input.tables = [];\n      }\n      input.tables.forEach((table:string) => {\n        state.allDatabaseTables.push(state.input.inputName + \": \" + table);\n      });\n    })\n\n    state.missingInput = (state.inputs.length) ? false : true;\n\n    this.setState({\n      transformExpanded: (state.missingInput) ? false : true,\n      outputExpanded: (state.missingInput) ? false : true,\n      missingInput: state.missingInput,\n      allDatabaseTables: state.allDatabaseTables,\n      inputs: state.inputs\n    });\n  }\n\n  hideInputDialog() {\n    this.setState({\n      editInputDialog:false\n    })\n  }\n\n  deleteDatabaseTable(table:string) {\n    const input = this.state.input;\n    if (!input.tables) {\n      input.tables = [];\n    }\n    input.tables = input.tables.filter((t) => {\n      return (table === t) ? false : true\n    });\n\n    this.setState({\n      input:input\n    })\n  }\n\n  handleEditWorkflowSnackbarClose = () => {\n    this.setState({\n      showSnackbarEdit: false,\n    });\n  };\n\n\n  saveInputChanges() {\n    const state:IState = this.state;\n    let errorsFound:boolean = false;\n    let inputs:WorkflowInputRecord[] = this.state.inputs;\n\n    if (!state.input.tables) {\n      state.input.tables = [];\n    }\n\n    // find and update existing input in inputs listing\n    state.allDatabaseTables = [];\n    inputs = inputs.map((input) => {\n      if (!input.tables) {\n        input.tables = [];\n      }\n\n      // update listing of tables\n      input.tables.forEach((table:string) => {\n        state.allDatabaseTables.push(state.input.inputName + \": \" + table);\n\n        if (!state.tableOutputOptions[table]) {\n          // init default settings\n          state.tableOutputOptions[table] = {\n            errors: {\n              addColumn: false\n            },\n            addColumn: '',\n            exportColumns: \"all\",\n            exportRows: \"all\",\n            fields: [],\n            numDays: 30,\n            sampleFields: \"createdAndUpdated\",\n            createdAtField: \"created_at\",\n            updatedAtField: \"updated_at\",\n          }\n        }\n      });\n\n      return input;\n    });\n\n    // remove maskingrules that contain rules for tables that no longer exist\n    state.maskingRuleValues = state.maskingRuleValues.filter((rule:RedactRule) => {\n      return (state.allDatabaseTables.includes(rule.databaseTable)) ? true : false;\n    })\n    state.numMaskingRules = state.maskingRuleValues.length;\n\n    state.errors.JSX = null;\n    //console.log(\"INPUTS\", inputs);\n    //console.log(\"STATE\", state)\n\n    if (this.state.input.uuid.match(/^new/)) {\n      this.setState({\n        missingInput: false,\n        tableOutputOptions: state.tableOutputOptions,\n        allDatabaseTables: state.allDatabaseTables,\n        errors: state.errors,\n        inputs: inputs,\n        editInputDialog: false,\n        showSnackbarEdit: true,\n        newInputKey: state.newInputKey,\n      })\n    }\n    else {\n      this.setState({\n        missingInput: false,\n        maskingRuleValues: state.maskingRuleValues,\n        numMaskingRules: state.numMaskingRules,\n        allDatabaseTables: state.allDatabaseTables,\n        errors: state.errors,\n        inputs: inputs,\n        editInputDialog: false,\n        showSnackbarEdit: true,\n      })\n    }\n  }\n\n  legalBucketName(bucket:string) {\n    if (!bucket.match(/^[a-zA-Z0-9]{1}[a-zA-Z0-9.-]{1,61}[a-zA-Z0-9]{1}$/)) {\n      return false;\n    }\n    else if (bucket.match(/^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$/)) {\n      // IP address\n      return false;\n    }\n    else if (bucket.match(/^xn--/) || bucket.match(/-s3alias$/)) {\n      return false;\n    }\n    return true;\n  }\n\n  saveDataFeedChanges() {\n    const state:IState = this.state;\n    var errorsFound:boolean = false;\n    var dataFeeds:DataFeed[] = this.state.dataFeeds;\n\n    if (!state.dataFeed.dataFeed) {\n      // no selection, close dialog\n      this.setState({\n        editDataFeed: false,\n      })\n      return; \n    }\n\n    switch (state.dataFeed.dataFeed) {\n      case 's3upload':\n        if (!state.dataFeed.dataFeedConfig.S3UploadBucket || !this.legalBucketName(state.dataFeed.dataFeedConfig.S3UploadBucket)) {\n          state.errors.invalidBucketName = true;\n          errorsFound = true;\n        }\n        else {\n          state.errors.invalidBucketName = false;\n        }\n      break;\n\n      case 'digitalTwin':\n        if (!state.dataFeed.dataFeedConfig.databaseEngine) {\n          state.errors.databaseEngine = true;\n          errorsFound = true;\n        }\n        if (state.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements && state.dataFeed.dataFeedConfig.postUpdateKeyValues.length) {\n          // validate prepared statements\n          const findInvalid = state.dataFeed.dataFeedConfig.postUpdateKeyValues.find((kv:PostUpdateParam) => {\n            //eslint-disable-next-line\n            return (!kv.key || !String(kv.value) || String(kv.key).match(/[%\\(\\)]+/) || String(kv.value).match(/[%\\(\\)]+/)) ? true : false;\n          })\n          if (findInvalid) {\n            state.errors.invalidPostUpdateKeyValues = true;\n            errorsFound = true;\n          }\n          else {\n            state.errors.invalidPostUpdateKeyValues = false;\n          }\n        }\n      break;\n\n      case 'custom':\n        if (!state.dataFeed.dataFeedConfig.image) {\n          state.errors.image = true;\n          errorsFound = true;\n        }\n        if (!state.dataFeed.dataFeedConfig.tag) {\n          state.errors.tag = true;\n          errorsFound = true;\n        }\n        if (!state.dataFeed.dataFeedConfig.shell) {\n          state.errors.shell = true;\n          errorsFound = true;\n        }\n\n        if (this.state.dataFeed.feedSecrets && this.state.dataFeed.feedSecrets.length) {\n          this.state.dataFeed.feedSecrets.forEach((s: CustomSecret) => {\n            if (s.secretType === 'volume' && (!s.secretName || !s.secretKey || !s.secretPath)) {\n              state.errors.invalidSecret = true;\n              errorsFound = true;\n            } else if (s.secretType === 'env' && (!s.secretName || !s.secretKey || !s.envName)) {\n              state.errors.invalidSecret = true;\n              errorsFound = true;\n            }\n          });\n        }\n\n      break;\n\n      default:\n      break;\n    }\n\n    if (errorsFound) {\n      this.setState({\n        errors: state.errors,\n      })\n      return;\n    }\n\n    if (state.dataFeed.uuid === \"new\") {\n      state.newDataFeedKey++;\n      state.dataFeed.uuid = \"new\" + state.newDataFeedKey;\n\n      dataFeeds.push(state.dataFeed);\n    }\n    else {\n      // update existing datafeed\n      dataFeeds = dataFeeds.map((df:DataFeed) => {\n        if (df.uuid === state.dataFeed.uuid) {\n          df.dataFeed = state.dataFeed.dataFeed;\n          df.dataFeedConfig = state.dataFeed.dataFeedConfig;\n          df.feedSecrets = state.dataFeed.feedSecrets;\n        }\n        return df;\n      })\n    }\n\n    this.setState({\n      dataFeeds,\n      editDataFeed: false,\n      showSnackbarEdit: true\n    })\n  }\n\n  transformExpansion(event:any, expanded:boolean) {\n    this.setState({\n      //transformExpanded: (expanded && !this.state.missingInput) ? true : false\n      transformExpanded: (expanded) ? true : false\n    })\n  }\n\n  outputExpansion(event:any, expanded:boolean) {\n    this.setState({\n      //outputExpanded: (expanded && !this.state.missingInput) ? true : false\n      outputExpanded: (expanded) ? true : false\n    })\n  }\n\n  triggerOutputOptions(event:any, databaseTable:string) {\n    this.setState({\n      currentDatabaseTable: databaseTable,\n      showOutputOptions: true\n    })\n  }\n\n  hideOutputOptions() {\n    this.setState({\n      showOutputOptions: false\n    })\n  }\n\n  resetDataFeedErrors() {\n    const state:IState = this.state;\n    state.errors.duplicateDataFeed = false;\n    state.errors.invalidBucketName = false;\n    state.errors.invalidPostUpdateKeyValues = false;\n    state.errors.invalidSecret = false;\n\n    this.setState({\n      errors: state.errors\n    })\n  }\n\n  addDataFeed() {\n    this.resetDataFeedErrors();\n    const state:IState = this.state;\n\n    state.dataFeed.uuid = \"new\";\n    state.dataFeed.dataFeed = \"\";\n    state.dataFeed.feedSecrets = [];\n\n    this.setState({\n      editDataFeed: true,\n      dataFeed: state.dataFeed\n    })\n  }\n\n  triggerEditDataFeed(df:DataFeed) {\n    this.resetDataFeedErrors();\n    const state:IState = this.state;\n\n    const dataFeed = this.state.dataFeeds.filter((d:DataFeed) => {\n      return (d.uuid === df.uuid) ? true : false;\n    })\n\n    // remove S3 prefix\n    if (dataFeed[0].dataFeed === \"s3upload\" || dataFeed[0].dataFeed === \"dataRepository\") {\n      dataFeed[0].dataFeedConfig.S3UploadBucket = dataFeed[0].dataFeedConfig.S3UploadBucket.replace(/^s3:\\/\\//,'');\n    }\n    if (!dataFeed[0].dataFeedConfig.postUpdateKeyValues) {\n      dataFeed[0].dataFeedConfig.postUpdateKeyValues = [];\n    }\n\n    switch (dataFeed[0].dataFeed) {\n      case 'dataRepository':\n      // reset table listing\n      dataFeed[0].dataFeedConfig.uploadFileChecked = [];\n      this.getS3UploadFileNames().forEach((f) => {\n        dataFeed[0].dataFeedConfig.uploadFileChecked.push(f);\n      });\n      break;\n    }\n\n    // dereference\n    const dataFeedCopy:DataFeed = {\n      uuid: dataFeed[0].uuid,\n      dataFeed: dataFeed[0].dataFeed,\n      dataFeedConfig: dataFeed[0].dataFeedConfig,\n      feedSecrets: dataFeed[0].feedSecrets,\n    }\n\n    this.setState({\n      editDataFeed: true,\n      dataFeed: dataFeedCopy,\n      errors: state.errors,\n    })\n  }\n\n  hideDataFeed() {\n    this.setState({\n      editDataFeed: false\n    })\n  }\n\n  handleDataFeed(dataFeed:string) {\n    const state:IState = this.state;\n\n    // prevent creation of duplicate data feed\n    if (state.dataFeeds && state.dataFeeds.find((df:DataFeed) => {\n      return (df.dataFeed === dataFeed) ? true : false\n    })) {\n      state.errors.duplicateDataFeed = true;\n      state.dataFeed.dataFeed = \"\";\n      this.setState({\n        errors: state.errors,\n        dataFeed: state.dataFeed,\n      });\n      return;\n    }\n\n    state.dataFeed.dataFeed = dataFeed;\n    state.errors.duplicateDataFeed = false;\n\n    // init config\n    switch (dataFeed) {\n      case 'dataRepository':\n      // add all tables\n      state.dataFeed.dataFeedConfig.uploadFileChecked = [];\n      this.getS3UploadFileNames().forEach((f) => {\n        state.dataFeed.dataFeedConfig.uploadFileChecked.push(f);\n      });\n      break;\n\n      case 'digitalTwin':\n      state.dataFeed.dataFeedConfig = {\n        databaseEngine: \"\",\n        enableSSL: false,\n        enableDeltaUpdates: false,\n        enablePostUpdatePreparedStatements: false,\n        postUpdateKeyValues: [],\n      }\n      break;\n\n      case 's3upload':\n      state.dataFeed.dataFeedConfig = {\n        uploadFileChecked: [],\n        addAllS3Uploads: false\n      }\n      break;\n\n      case 'custom':\n      state.dataFeed.dataFeedConfig = {\n        image: \"\",\n        tag: \"\",\n        shell: \"\",\n        command: \"\",\n      }\n      break;\n    }\n    \n    this.setState({\n      dataFeed: state.dataFeed,\n      errors: state.errors,\n    })\n  }\n\n  handleDataFeedBack() {\n    const state:IState = this.state;\n\n    state.dataFeed.dataFeed = \"\";\n    this.setState({\n      dataFeed: state.dataFeed\n    })\n  }\n\n  handleDataFeedCancel() {\n    this.setState({\n      editDataFeed: false\n    })\n  }\n\n  addParameterValue() {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig.postUpdateKeyValues.push({\n      key: \"\",\n      value: \"\"\n    })\n    this.setState(state);\n  }\n\n  updateParameterValue(key:number, event:any) {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig.postUpdateKeyValues = state.dataFeed.dataFeedConfig.postUpdateKeyValues.map((kv:PostUpdateParam, idx:number) => {\n      if (idx === key && event.target.name === \"parameterKey\") {\n        kv.key = event.target.value;\n      }\n      else if (idx === key && event.target.name === \"parameterValue\") {\n        kv.value = (!event.target.value || isNaN(event.target.value)) ? event.target.value : parseFloat(event.target.value);\n      }\n      return kv;\n    })\n    this.setState(state); \n  }\n\n  deleteParameterValue(key:number) {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig.postUpdateKeyValues = state.dataFeed.dataFeedConfig.postUpdateKeyValues.filter((kv:PostUpdateParam, idx:number) => {\n      return (idx === key) ? false : true;\n    });\n    this.setState(state);\n  }\n\n  deleteDataFeed(dataFeed:DataFeed) {\n    const state:IState = this.state;\n    state.dataFeeds = state.dataFeeds.filter((df:DataFeed) => {\n      return (df.uuid === dataFeed.uuid) ? false : true;\n    })\n\n    this.setState({\n      dataFeeds: state.dataFeeds,\n      showSnackbarEdit: true\n    })\n  }\n\n  handleDataFeedOptions(event:any) {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig[event.target.name] = (event.target.name.match(/^enable/)) ? event.target.checked : event.target.value;\n\n    this.setState(state);\n  }\n\n  displayWorkflowType(wf:string) {\n    switch (wf) {\n      case 'ERL':\n      return 'ERL (Extract, Redact, Load)';\n\n      case 'multiTenantWebERL':\n      return 'Web-based ERL Testing (Multi-tenant)';\n\n      case 'mockDatabaseMigration':\n      return 'Database Clone for Migration Dry-run';\n\n      default:\n      break;\n    }\n  }\n\n  /* eslint-disable max-len */\n\n  render() {\n    return (\n      <Card mb={6}>\n        <CardContent>\n          {this.dbUUIDSnackbar()}\n          <Typography variant=\"h4\">\n            {this.props.workflow.name} <code>({this.props.workflow.uuid})</code>\n            <Box display=\"inline\" ml={2}>\n              <CopyToClipboard text={this.props.workflow.uuid} onCopy={() => this.clipboardCopy(\"dbuuid\")}>\n                <Button variant=\"outlined\" size=\"small\" color=\"secondary\"><ClipboardIcon /></Button>\n              </CopyToClipboard>\n            </Box>\n          </Typography>\n\n          <Box>\n            <Grid\n              container\n              justify=\"space-between\"\n              alignItems=\"center\"\n            >\n              <Grid item xs={4}>\n                <Box display={(this.props.workflow.workflowType.match(/^(ERL|mockDatabaseMigration)/)) ? 'block' : 'none'}>\n                  <FormControl margin=\"dense\" fullWidth>\n                    <InputLabel>\n                      Redactics Agent\n                    </InputLabel>\n                    <Select\n                      value={this.props.workflow.agentId}\n                      name=\"agentId\"\n                      onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n                    >\n                      {this.props.agents.map((agent:AgentRecord) => (\n                        <MenuItem key={agent.uuid} value={agent.uuid}>{agent.name}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Box>\n                <Box mt={4}>\n                  Workflow Type: <b>{this.displayWorkflowType(this.props.workflow.workflowType)}</b>\n                </Box>\n              </Grid>\n            </Grid>\n          </Box>\n\n          <Dialog\n            open={this.state.showLastReportedError}\n            onClose={this.hideLastReportedError}\n            maxWidth=\"lg\"\n            aria-labelledby=\"dialog-title\"\n            aria-describedby=\"dialog-description\"\n          >\n            <DialogTitle id=\"dialog-title\">Last Reported Error for: {this.props.workflow.name}</DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"dialog-description\">\n                {this.displayLastReportedError()}\n              </DialogContentText>\n\n              <DialogActions>\n                <Button color=\"primary\" onClick={this.hideLastReportedError}>\n                  Close\n                </Button>\n              </DialogActions>\n            </DialogContent>\n          </Dialog>\n\n          <Box mt={12}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Input Settings</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <WorkflowInputs\n                    errors={this.state.errors}\n                    workflow={this.props.workflow}\n                    agentInputs={this.props.agentInputs}\n                    agents={this.props.agents}\n                    input={this.state.input}\n                    inputs={this.state.inputs}\n                    saveInputChanges={this.saveInputChanges}\n                    selectInputSource={this.selectInputSource}\n                    editInputDialog={this.state.editInputDialog}\n                    triggerEditInputDialog={this.triggerEditInputDialog}\n                    handleInputChanges={this.handleInputChanges}\n                    handleAddTable={this.handleAddTable}\n                    addTable={this.state.addTable}\n                    triggerAddTable={this.triggerAddTable}\n                    hideInputDialog={this.hideInputDialog}\n                    deleteDatabaseTable={this.deleteDatabaseTable}\n                    handleSnackbarClose={this.handleEditWorkflowSnackbarClose}\n                  />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n                  \n\n          <Box mt={4} display={(this.props.workflow.workflowType.match(/^(ERL|multiTenantWebERL)/)) ? 'block' : 'none'}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel disabled={this.state.missingInput} expanded={this.state.transformExpanded} onChange={(event, expanded) => this.transformExpansion(event, expanded)}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Processing/Transformation Settings</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <WorkflowRedactionRules\n                    workflow={this.props.workflow}\n                    allDatabaseTables={this.state.allDatabaseTables}\n                    maskingRuleValues={this.state.maskingRuleValues}\n                    handleRuleChange={this.handleRuleChange}\n                    deleteMaskingRule={this.deleteMaskingRule}\n                    numMaskingRules={this.state.numMaskingRules}\n                    maskingRules={this.state.maskingRules}\n                    addMaskingRule={this.addMaskingRule}\n                  />\n\n                  <WorkflowSchedule\n                    handleExportSchedule={this.handleExportSchedule}\n                    exportSchedule={this.state.exportSchedule}\n                    schedule={this.state.schedule || '* 0 * * *'}\n                    handleSchedule={this.handleSchedule}\n                    scheduleSelection={this.state.scheduleSelection}\n                    customSchedule={this.state.customSchedule}\n                    workflowType={this.props.workflow.workflowType}\n                    errors={this.state.errors}\n                  />\n\n                  {/* <WorkflowCompliance\n                    generateSoftDeleteQueries={this.state.generateSoftDeleteQueries}\n                    handleSoftDeletionFields={this.handleSoftDeletionFields}\n                    handleSoftDeleteEmailAddressField={this.handleSoftDeleteEmailAddressField}\n                    maskingRuleValues={this.state.maskingRuleValues}\n                    userSearchEmailField={this.state.userSearchEmailField}\n                    allDatabaseTables={this.state.allDatabaseTables}\n                    userSearchEmailDBTable={this.state.userSearchEmailDBTable}\n                    userSearchEmailColumn={this.state.userSearchEmailColumn}\n                    workflowType={this.props.workflow.workflowType}\n                  /> */}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n\n          <Box mt={4} display={(this.props.workflow.workflowType.match(/^(ERL|multiTenantWebERL)/)) ? 'block' : 'none'}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel disabled={(this.state.allDatabaseTables && this.state.allDatabaseTables.length) ? false : true} expanded={this.state.outputExpanded} onChange={(event, expanded) => this.outputExpansion(event, expanded)}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Output Settings</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <WorkflowExport\n                    workflow={this.props.workflow}\n                    showOutputOptions={this.state.showOutputOptions}\n                    hideOutputOptions={this.hideOutputOptions}\n                    triggerOutputOptions={this.triggerOutputOptions}\n                    currentDatabaseTable={this.state.currentDatabaseTable}\n                    allDatabaseTables={this.state.allDatabaseTables}\n                    tableOutputOptions={this.state.tableOutputOptions}\n                    handleTableOutputChanges={this.handleTableOutputChanges}\n                    addExportTableColumn={this.addExportTableColumn}\n                    deleteExportTableColumn={this.deleteExportTableColumn}\n                  />\n\n                  <WorkflowPostExport\n                    dataFeeds={this.state.dataFeeds}\n                    dataFeed={this.state.dataFeed}\n                    addParameterValue={this.addParameterValue}\n                    updateParameterValue={this.updateParameterValue}\n                    deleteParameterValue={this.deleteParameterValue}\n                    agents={this.props.agents}\n                    workflow={this.props.workflow}\n                    hideDataFeed={this.hideDataFeed}\n                    addDataFeed={this.addDataFeed}\n                    editDataFeed={this.state.editDataFeed}\n                    handleDataFeed={this.handleDataFeed}\n                    handleDataFeedBack={this.handleDataFeedBack}\n                    handleDataFeedCancel={this.handleDataFeedCancel}\n                    getS3UploadFileNames={this.getS3UploadFileNames}\n                    handleDataFeedOptions={this.handleDataFeedOptions}\n                    saveDataFeedChanges={this.saveDataFeedChanges}\n                    triggerEditDataFeed={this.triggerEditDataFeed}\n                    deleteDataFeed={this.deleteDataFeed}\n                    errors={this.state.errors}\n                    handleCustomSecret={this.handleCustomSecret}\n                    addSecret={this.addSecret}\n                    handleDeleteSecret={this.handleDeleteSecret}\n                    markAddToS3UploadList={this.markAddToS3UploadList}\n                    addAllToS3UploadList={this.addAllToS3UploadList}\n                    addAllS3Uploads={this.state.addAllS3Uploads}\n                    agentNamespace={this.state.agentNamespace}\n                  />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n\n          <Box mt={4} display={(this.props.workflow.workflowType === \"mockDatabaseMigration\") ? 'block' : 'none'}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel expanded={this.state.outputExpanded} onChange={(event, expanded) => this.outputExpansion(event, expanded)}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Setup Instructions</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <DatabaseMigrationSetup\n                    workflow={this.props.workflow}\n                    handleWFChanges={this.props.handleWFChanges}\n                    inputs={this.state.inputs}\n                    agentNamespace={this.state.agentNamespace || \"default\"}\n                    clipboardCopy={this.clipboardCopy}\n                  />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n\n          <Grid\n            container\n            justify=\"space-between\"\n            alignItems=\"center\"\n            mt={12}\n          >\n            <Grid item xs={10}>\n              <Button variant=\"contained\" color=\"primary\" size=\"large\" disabled={this.state.saveButtonDisabled} onClick={() => this.saveChanges(this.props.workflow.uuid)}>\n                <SaveIcon />&nbsp;\n                {(this.props.workflow.workflowType === \"multiTenantWebERL\") ? 'Save and Run Workflow' : 'Save Changes'}\n              </Button>\n            </Grid>\n            <Grid item>\n              <Button variant=\"contained\" color=\"default\" size=\"small\" onClick={this.deleteWorkflowConfirmation}>\n                <DeleteIcon />&nbsp;\n                Delete Workflow\n              </Button>\n            </Grid>\n\n            <Dialog\n              open={this.state.deleteWorkflowConfirmation}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Delete Workflow</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Are you sure you want to delete this workflow configuration?\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button onClick={this.cancelWorkflowConfirmation}>\n                    Cancel\n                  </Button>\n                  <Button color=\"primary\" onClick={() => this.props.deleteWorkflow(this.props.workflow.uuid)}>\n                    Yes, delete\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.orphanedWorkflow}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Workflow <b>{this.props.workflow.name}</b> is not associated with a Redactics Agent. Please correct this by selecting an agent in your workflow configuration.\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.columnExclusionProhibited}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  <p>This workflow includes a <b>Push Data to your Internal Data Repository</b> data feed configuration. This data feed creates a (PII free) clone (or digital twin) of its original database whereby this clone's schema is intended to be identical to the original. Your Table Data Options specifies that one or more tables should have certain columns excluded. By allowing this configuration, this clone will contain incomplete data.</p>\n\n                  <p>To correct this problem, either remove this data feed, or update your table data options so that each table exports all columns.</p>\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.completeRedactRules}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  One or more of your redaction rules contains a blank value or invalid column name (field names must contain only letters, numbers and underscores and most start with a letter or underscore)\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.dupeRedactRuleFound}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  One or more of your redaction rules contains a duplicate table and column name\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.dupeTableExportFound}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You&apos;ve already selected this table/column for export\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.missingSchemaSelection}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide some table names for schema export\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.missingPostExportHookField}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide valid custom data feed container info\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.missingSecretField}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide details about your secrets/environment variables\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.invalidOutputSettingField}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  One or more \"created\" or \"updated\" field settings are missing or contain illegal characters\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.invalidForgetUserFields}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Your Forget User Request \"Database and Table Name\" or \"Email Field\" are either missing or contain an invalid field name (field names must contain only letters, numbers and underscores and most start with a letter or underscore).\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.invalidMigrationFields}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Your Setup Instructions fields are missing one or more values.\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.validSchedule}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  <p>\n                    Your custom schedule is invalid. Please abide by the standard crontab format:\n                  </p>\n\n                  <p>\n                    <b>\n                      [minute](0-59)[hour](0-23)\n                      [day of the month](1-31)\n                      [month](1-12)\n                      [day of the week](0-6)\n                    </b>\n                  </p>\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.validName}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide a workflow name\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.validDiskSize}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide a disk space allocation for your input source\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.showDialog}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Your changes have been saved!</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  <Box>\n                    However, your workflow will not work until you update your Helm configuration file,&nbsp;\n                    which can be found in the <b>Agents</b> section.\n                  </Box>\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button onClick={this.hideHelmReminder} color=\"primary\" autoFocus>\n                    Okay\n                  </Button>\n                </DialogActions>\n\n              </DialogContent>\n            </Dialog>\n\n            <Snackbar\n              anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              open={this.state.showSnackbar}\n              autoHideDuration={8000}\n              onClose={this.handleSnackbarClose}\n              ContentProps={{\n                'aria-describedby': 'message-id',\n              }}\n              message={<span id=\"message-id\"><b>Your changes have been saved!</b></span>}\n              action={[\n                <IconButton\n                  key=\"close\"\n                  aria-label=\"Close\"\n                  color=\"inherit\"\n                  onClick={this.handleSnackbarClose}\n                >\n                  <CloseIcon />\n                </IconButton>,\n              ]}\n            />\n\n            <Snackbar\n              anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              open={this.state.showSnackbarEdit}\n              autoHideDuration={8000}\n              onClose={this.handleSnackbarClose}\n              ContentProps={{\n                'aria-describedby': 'message-id',\n              }}\n              message={<span id=\"message-id\">Click on &quot;Save Changes&quot; at the bottom of this section to save your changes...</span>}\n              action={[\n                <IconButton\n                  key=\"close\"\n                  aria-label=\"Close\"\n                  color=\"inherit\"\n                  onClick={this.handleSnackbarClose}\n                >\n                  <CloseIcon />\n                </IconButton>\n              ]}\n            />\n          </Grid>\n\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nexport default withStyles(styles)(Workflow);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Helmet from 'react-helmet';\n\n// import { red, green, blue } from \"@material-ui/core/colors\";\n\nimport {\n  Divider as MuiDivider,\n  FormControl as MuiFormControl,\n  Grid as MuiGrid,\n  Typography,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  TextField as MuiTextField,\n  Button as MuiButton,\n  InputLabel,\n  Select as MuiSelect,\n  MenuItem,\n  Box,\n  InputAdornment,\n  Tooltip,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  ExpandMore as ExpandMoreIcon,\n  FormatListBulleted as FormatListBulletedIcon,\n  HelpOutline as HelpIcon,\n} from '@material-ui/icons';\n\nimport {\n  Save as SaveIcon,\n} from 'react-feather';\n\nimport { spacing } from '@material-ui/system';\nimport {\n  WorkflowRecord, AgentInputRecord, AgentRecord, RedactRuleSet, RedactRulePreset,\n} from '../../types/redactics';\nimport RedacticsContext from '../../contexts/RedacticsContext';\n\nimport Workflow from './Workflow';\n\nconst Divider = styled(MuiDivider)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 400px;\n  max-width: 400px;\n`;\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 400px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  classes: any;\n}\n\ninterface IState {\n  saveButtonDisabled: boolean;\n  ruleLegendDialog: boolean;\n  newWorkflowDialog: boolean;\n  workflows: WorkflowRecord[];\n  agentInputs: AgentInputRecord[];\n  presets: RedactRulePreset[];\n  redactrulesets: RedactRuleSet[];\n  agents: AgentRecord[];\n  newWorkflowName: string;\n  newWorkflowAgent: string;\n  newWorkflowType: string;\n  dbLimitError: boolean;\n  // dialog toggles\n  deleteWorkflowConfirmation: boolean;\n}\n\nclass Workflows extends React.Component<IProps, IState> {\n  static contextType = RedacticsContext;\n\n  constructor(props: IProps) {\n    super(props);\n\n    this.state = {\n      saveButtonDisabled: true,\n      ruleLegendDialog: false,\n      newWorkflowDialog: false,\n      workflows: [],\n      agentInputs: [],\n      presets: [],\n      redactrulesets: [],\n      agents: [],\n      newWorkflowName: '',\n      newWorkflowAgent: '',\n      newWorkflowType: '',\n      dbLimitError: false,\n      deleteWorkflowConfirmation: false,\n    };\n\n    this.handleChangeAdd = this.handleChangeAdd.bind(this);\n    this.handleWFChanges = this.handleWFChanges.bind(this);\n    this.addWorkflow = this.addWorkflow.bind(this);\n    this.ruleLegendOpen = this.ruleLegendOpen.bind(this);\n    this.ruleLegendClose = this.ruleLegendClose.bind(this);\n    this.newWorkflowOpen = this.newWorkflowOpen.bind(this);\n    this.newWorkflowClose = this.newWorkflowClose.bind(this);\n    this.refreshWorkflows = this.refreshWorkflows.bind(this);\n    this.deleteWorkflow = this.deleteWorkflow.bind(this);\n    this.dbLimitErrorClose = this.dbLimitErrorClose.bind(this);\n  }\n\n  async refreshWorkflows() {\n    try {\n      const response = await fetch(`${this.context.apiUrl}/workflow`, {\n        credentials: 'include',\n      });\n\n      const data = await response.json();\n\n      data.workflows.map((workflow:any) => {\n        // set some defaults\n        workflow.migrationNamespace = workflow.migrationNamespace || \"default\";\n        workflow.migrationDatabaseClone = workflow.migrationDatabaseClone || \"redactics_clone\";\n\n        return workflow;\n      });\n\n      this.setState({\n        workflows: data.workflows,\n        agentInputs: data.agentInputs,\n        presets: data.presets,\n        redactrulesets: data.redactrulesets,\n        agents: data.agents,\n      });\n    } catch (err) {\n      // console.log('CATCH ERR', error);\n    }\n  }\n\n  componentDidMount() {\n    this.refreshWorkflows();\n  }\n\n  handleChangeAdd(event:any) {\n    const state:IState = this.state;\n\n    switch (event.target.name) {\n      case 'name':\n        state.newWorkflowName = event.target.value;\n        state.saveButtonDisabled = (state.newWorkflowType === \"ERL\")\n          ? !(event.target.value && state.newWorkflowAgent)\n          : !(event.target.value && state.newWorkflowType);\n        this.setState(state);\n        break;\n\n      case 'agentId':\n        state.newWorkflowAgent = event.target.value;\n        state.saveButtonDisabled = !(state.newWorkflowName);\n        this.setState(state);\n        break;\n\n      case 'workflowType':\n        state.newWorkflowType = event.target.value;\n        state.saveButtonDisabled = (event.target.value === \"ERL\")\n        ? !(state.newWorkflowName && state.newWorkflowAgent)\n        : !(state.newWorkflowName && state.newWorkflowType);\n        this.setState(state);\n        break;\n\n      default:\n    }\n  }\n\n  async addWorkflow() {\n    this.setState({\n      saveButtonDisabled: true,\n    });\n\n    try {\n      const response = await fetch(`${this.context.apiUrl}/workflow`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          name: this.state.newWorkflowName,\n          agentId: this.state.newWorkflowAgent,\n          workflowType: this.state.newWorkflowType,\n        }),\n      });\n\n      const data = await response.json();\n      const { workflows } = this.state;\n      if (this.state.newWorkflowType === \"multiTenantWebERL\") {\n        // handle preset input\n        data.inputs[0].tables.forEach((table:string) => {\n          data.allDatabaseTables.push(data.inputs[0].inputName + \": \" + table);\n        })\n      }\n      workflows.push(data);\n\n      this.setState({\n        workflows,\n        newWorkflowDialog: false,\n        newWorkflowName: '',\n        newWorkflowAgent: '',\n      });\n    } catch (err) {\n      // console.log('CATCH ERR', error);\n    }\n  }\n\n  async deleteWorkflow(workflowId:string) {\n    try {\n      await fetch(`${this.context.apiUrl}/workflow/${workflowId}`, {\n        method: 'delete',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n      });\n\n      this.refreshWorkflows();\n\n      this.setState({\n        deleteWorkflowConfirmation: false,\n      });\n    } catch (err) {\n      this.setState({\n        deleteWorkflowConfirmation: false,\n      });\n    }\n  }\n\n  newWorkflowOpen() {\n    this.setState({\n      newWorkflowDialog: true,\n    });\n  }\n\n  newWorkflowClose() {\n    this.setState({\n      newWorkflowDialog: false,\n    });\n  }\n\n  dbLimitErrorClose() {\n    this.setState({\n      dbLimitError: false,\n    });\n  }\n\n  ruleLegendOpen() {\n    this.setState({\n      ruleLegendDialog: true,\n    });\n  }\n\n  ruleLegendClose() {\n    this.setState({\n      ruleLegendDialog: false,\n    });\n  }\n\n  handleWFChanges(event:any, workflowId:string) {\n    const workflows = this.state.workflows.map((d:any) => {\n      const workflow = d;\n      if (workflow.uuid === workflowId) {\n        workflow[event.target.name] = event.target.value;\n      }\n\n      return workflow;\n    });\n\n    this.setState({\n      workflows,\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Helmet title=\"Workflow Configurations\" />\n\n        <Grid\n          justify=\"space-between\"\n          container\n          spacing={10}\n        >\n          <Grid item xs={4} mb={6}>\n            <Typography variant=\"h1\" gutterBottom display=\"inline\">\n              Workflow Configurations\n            </Typography>\n          </Grid>\n        </Grid>\n\n        <Divider my={6} />\n\n        <Box mt={4}>\n          <Typography variant=\"body1\" gutterBottom>\n            Build and maintain your data management workflows here. Configuration changes will be picked up by your Agent install usually within a few minutes.\n          </Typography>\n        </Box>\n\n        <Grid\n          justify=\"space-between\"\n          container\n          spacing={10}\n          mt={8}\n        >\n          <Grid item></Grid>\n          <Grid item mb={6}>\n            <div>\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.ruleLegendOpen}>\n                <FormatListBulletedIcon />&nbsp;\n                PII Ruleset Legend\n              </Button>&nbsp;\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.newWorkflowOpen}>\n                <AddIcon />&nbsp;\n                Define New Workflow\n              </Button>\n            </div>\n          </Grid>\n        </Grid>\n\n        <Dialog\n          open={this.state.ruleLegendDialog}\n          onClose={this.ruleLegendClose}\n          aria-labelledby=\"legend-title\"\n          aria-describedby=\"legend-description\"\n        >\n          <DialogTitle id=\"legend-title\">PII Ruleset Legend</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"legend-description\">\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Redact Email</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Transform emails to unique email address derived from the row&apos;s primary\n                    key, constructed based on provided prefix and domain - i.e.\n                    <code>[prefix][primarykey]@[domain]</code>\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Destruction</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Replace data with a null value\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Replacement</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Replace data with a provided value\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Random String</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Replace data with a random alphanumeric string of a provided length\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </DialogContentText>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog\n          open={this.state.newWorkflowDialog}\n          onClose={this.newWorkflowClose}\n          aria-labelledby=\"dialog-title\"\n          aria-describedby=\"dialog-description\"\n        >\n          <DialogTitle id=\"dialog-title\">Add Workflow</DialogTitle>\n          <DialogContent>\n            <form noValidate autoComplete=\"off\">\n              <Box>\n                Create a name for this workflow, and assign a Redactics Agent to carry out the work defined by this workflow.\n              </Box>\n\n              <Box mt={4}>\n                <FormControl fullWidth>\n                  <TextField\n                    name=\"name\"\n                    label=\"Workflow Name\"\n                    onChange={this.handleChangeAdd}\n                    value={this.state.newWorkflowName}\n                  />\n                </FormControl>\n              </Box>\n\n              <Box mt={4}>\n                <FormControl margin=\"dense\" fullWidth>\n                  <InputLabel>\n                    Workflow Type\n                  </InputLabel>\n                  <Select\n                    value={this.state.newWorkflowType}\n                    name=\"workflowType\"\n                    onChange={this.handleChangeAdd}\n                    endAdornment={\n                      <InputAdornment className={this.props.classes.selectAdornment} position=\"end\">\n                        <Tooltip title=\"The web-based ERL testing option allows you to test ERL workflows with some preset sample dataset options without having to install the Redactics Agent into your own infrastructure. This option is multi-tenant, but a single-tenant mode is available you can run with your own datasets - contact us for more info.\" placement=\"right-start\"><HelpIcon /></Tooltip>\n                      </InputAdornment>\n                    }\n                  >\n                    <MenuItem key=\"ERL\" value=\"ERL\">ERL (Extract, Redact, Load)</MenuItem>\n                    <MenuItem key=\"multiTenantWebERL\" value=\"multiTenantWebERL\">Web-based ERL Testing</MenuItem>\n                    <MenuItem key=\"mockDatabaseMigration\" value=\"mockDatabaseMigration\">Database Clone for Migration Dry-run</MenuItem>\n                  </Select>\n                </FormControl>\n              </Box>\n\n              <Box mt={4} display={(this.state.newWorkflowType.match(/^(ERL|mockDatabaseMigration)/)) ? 'block' : 'none'}>\n                <FormControl fullWidth>\n                  <InputLabel htmlFor=\"agentId\">Redactics Agent</InputLabel>\n                  <Select\n                    name=\"agentId\"\n                    onChange={this.handleChangeAdd}\n                    value={this.state.newWorkflowAgent}\n                  >\n                    {this.state.agents.map((agent:AgentRecord) => (\n                      <MenuItem key={agent.uuid} value={agent.uuid}>{agent.name}</MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Box>\n\n              <Box mt={8}>\n                <DialogActions>\n                  <Button color=\"secondary\" onClick={this.newWorkflowClose}>\n                    Cancel\n                  </Button>\n\n                  <Button color=\"secondary\" variant=\"contained\" disabled={this.state.saveButtonDisabled} onClick={this.addWorkflow}>\n                    Save&nbsp;<SaveIcon />\n                  </Button>\n                </DialogActions>\n              </Box>\n            </form>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog\n          open={this.state.dbLimitError}\n          onClose={this.dbLimitErrorClose}\n          aria-labelledby=\"dialog-title\"\n          aria-describedby=\"dialog-description\"\n        >\n          <DialogTitle id=\"dialog-title\">You&apos;ve Reached Your Account Limit</DialogTitle>\n          <DialogContent>\n            <Box>\n              This Redactics account is currently limited to support defining only a single\n              database. Please contact us if you wish to upgrade this account.\n            </Box>\n\n            <DialogActions>\n              <Button color=\"secondary\" onClick={this.dbLimitErrorClose}>\n                Okay\n              </Button>\n            </DialogActions>\n          </DialogContent>\n        </Dialog>\n\n        {this.state.workflows.map((workflow:WorkflowRecord) => <Workflow\n          workflow={workflow}\n          presets={this.state.presets}\n          redactrulesets={this.state.redactrulesets}\n          agents={this.state.agents}\n          agentInputs={this.state.agentInputs}\n          key={workflow.uuid}\n          handleWFChanges={this.handleWFChanges}\n          deleteWorkflow={this.deleteWorkflow}\n        />)}\n\n      </React.Fragment>\n    );\n  }\n}\n\n\nexport default withStyles(styles)(Workflows);"],"sourceRoot":""}