/*! For license information please see 13.0bccce4f.chunk.js.LICENSE.txt */
(this.webpackJsonpredactics=this.webpackJsonpredactics||[]).push([[13],{604:function(e,t,a){"use strict";a.r(t);var n,r,l,o,i,s,c,d,u,p,m,h,f,g,b,E=a(97),y=a(79),k=a(80),w=a(55),v=a(82),C=a(81),F=a(14),S=a(0),O=a.n(S),D=a(10),T=a(6),x=a(194),R=a.n(x),A=a(556),j=a(588),I=a(519),L=a(612),W=a(606),U=a(515),P=a(78),N=a(532),_=a(510),B=a(511),V=a(512),H=a(513),K=a(551),M=a(550),z=a(566),q=a(616),G=a(590),$=a(617),Y=a(559),Q=a(514),J=a(603),X=a(592),Z=a(525),ee=a(591),te=a(597),ae=a(536),ne=a(119),re=a(142),le=a(543),oe=a(555),ie=a(611),se=a(477),ce=a(560),de=a(188),ue=a(598),pe=a(596),me=a(571),he=a(607),fe=a(593),ge=a(595),be=a(506),Ee=a(589),ye=a(615),ke=Object(D.c)(I.a)(ae.b),we=Object(D.c)(L.a)(ae.b),ve=Object(D.c)(j.a)(ae.b),Ce=Object(D.c)(ve)(n||(n=Object(F.a)(["\n  min-width: 200px;\n  max-width: 200px;\n"]))),Fe=Object(D.c)(we)(r||(r=Object(F.a)(["\n  width: 200px;\n"]))),Se=Object(D.c)(W.a)(ae.b),Oe=Object(D.c)(U.a)(ae.b),De=function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).state={ruleLabelWidth:30},n}return Object(k.a)(a,[{key:"displayMaskingRules",value:function(){var e=this;return this.props.numMaskingRules?O.a.createElement(fe.a,{size:"small",style:{width:"auto"}},O.a.createElement(ge.a,null,this.props.maskingRuleValues.map((function(t){return O.a.createElement(be.a,{key:t.key},O.a.createElement(Ee.a,{style:{paddingLeft:0}},O.a.createElement(Ce,{variant:"outlined",margin:"dense"},O.a.createElement(q.a,null,"Database and Table Name"),O.a.createElement(Se,{value:t.databaseTable,onChange:function(a){return e.props.handleRuleChange(t.key,a)},name:"databaseTable",input:O.a.createElement(ye.a,{labelWidth:e.state.ruleLabelWidth,name:"rule"})},e.props.allDatabaseTables.map((function(e){return O.a.createElement(Y.a,{key:e,value:e},e)}))))),O.a.createElement(Ee.a,null,O.a.createElement(Fe,{name:"column",defaultValue:t.column,label:"Column Name",variant:"outlined",onChange:function(a){return e.props.handleRuleChange(t.key,a)},margin:"dense"})),O.a.createElement(Ee.a,null,O.a.createElement(Ce,{variant:"outlined",margin:"dense"},O.a.createElement(q.a,null,"Rule"),O.a.createElement(Se,{value:t.rule,onChange:function(a){return e.props.handleRuleChange(t.key,a)},name:"rule",input:O.a.createElement(ye.a,{labelWidth:e.state.ruleLabelWidth,name:"rule"})},e.props.maskingRules.map((function(e){return O.a.createElement(Y.a,{key:e.key,value:e.key},e.val)}))))),O.a.createElement(Ee.a,null,O.a.createElement(N.a,null,O.a.createElement(Oe,{variant:"contained",color:"secondary",size:"small",onClick:function(){return e.props.deleteMaskingRule(t.key)}},O.a.createElement(pe.a,null),"\xa0\xa0Delete"))))})),O.a.createElement(be.a,null,O.a.createElement(Ee.a,null),O.a.createElement(Ee.a,null),O.a.createElement(Ee.a,null),O.a.createElement(Ee.a,null,O.a.createElement(Oe,{variant:"contained",color:"secondary",size:"small",onClick:this.props.addMaskingRule},O.a.createElement(X.a,null),"\xa0\xa0Add"))))):O.a.createElement(N.a,null,O.a.createElement(Oe,{variant:"contained",color:"secondary",size:"small",onClick:this.props.addMaskingRule},O.a.createElement(X.a,null),"\xa0\xa0Add Database Field Containing PII"))}},{key:"render",value:function(){return O.a.createElement(O.a.Fragment,null,O.a.createElement(N.a,{mt:8},O.a.createElement(P.a,{variant:"h6",gutterBottom:!0},"Database Fields Containing PII/Confidential Info"),O.a.createElement(N.a,{mb:4},O.a.createElement(ke,{container:!0},O.a.createElement(ke,{item:!0,xs:8},O.a.createElement(P.a,{variant:"body1",gutterBottom:!0},"You can use the Redactics PII Scanner to auto-detect your database fields containing PII, or else define your fields containing PII (and their redaction rules) here.")))),this.displayMaskingRules()))}}]),a}(O.a.Component),Te=a(150),xe=a(539),Re=a(562),Ae=a(594),je=a(534),Ie=a(600),Le=a(568),We=Object(D.c)(U.a)(ae.b),Ue=Object(D.c)(L.a)(ae.b),Pe=Object(D.c)(j.a)(ae.b),Ne=Object(D.c)(Pe)(l||(l=Object(F.a)(["\n  min-width: 200px;\n  max-width: 200px;\n"]))),_e=Object(D.c)(Ue)(o||(o=Object(F.a)(["\n  width: 200px;\n"]))),Be=Object(T.a)({root:{whiteSpace:"nowrap"}})(Ee.a),Ve=Object(D.c)(W.a)(ae.b),He=(Object(D.c)(I.a)(ae.b),Object(T.a)({root:{display:"block"}})(z.a),function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"getAgent",value:function(){var e=this,t=this.props.agents.filter((function(t){return t.uuid===e.props.workflow.agentId}));return t.length?t[0]:{configPath:"",namespace:""}}},{key:"editInputDialogContent",value:function(){var e=this;return O.a.createElement(N.a,null,this.props.errors.JSX,O.a.createElement(N.a,{mt:8},O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Tables to Extract"),O.a.createElement(N.a,null,this.props.input.tables.map((function(t){return O.a.createElement(N.a,{key:t,display:"inline",pr:1},O.a.createElement(xe.a,{key:t,label:t,onDelete:function(){return e.props.deleteDatabaseTable(t)}}))}))),O.a.createElement(N.a,{mt:4},O.a.createElement(Ne,{fullWidth:!0},O.a.createElement(_e,{error:this.props.errors.addTable,name:"addTable",label:"Add Table",value:this.props.addTable,onChange:function(t){return e.props.handleAddTable(t)}})),O.a.createElement(N.a,{mt:2},O.a.createElement(We,{color:"secondary",variant:"outlined",onClick:this.props.triggerAddTable},O.a.createElement(X.a,null),"\xa0Add")))))}},{key:"outputInputs",value:function(){var e=this;if(this.props.inputs.length){if("mockDatabaseMigration"===this.props.workflow.workflowType){var t=this.props.inputs&&this.props.inputs.length&&this.props.inputs[0]?this.props.inputs[0].uuid:"";return O.a.createElement(N.a,null,O.a.createElement(Ne,{margin:"dense",fullWidth:!0},O.a.createElement(q.a,null,"Input Source"),O.a.createElement(Ve,{value:t,name:"inputSource",onChange:function(t){return e.props.selectInputSource(t)}},this.props.agentInputs.map((function(e){return O.a.createElement(Y.a,{key:e.uuid,value:e.uuid},e.inputName)})))))}return O.a.createElement(N.a,null,O.a.createElement(N.a,{mb:4,display:"multiTenantWebERL"===this.props.workflow.workflowType?"block":"none"},O.a.createElement(Ie.a,{style:{color:Te.a[500],fontSize:25}})," ",O.a.createElement("b",null,"This workflow is constrained to a preset sample database containing two tables. CSV table data: ",O.a.createElement(Re.a,{href:"https://raw.githubusercontent.com/Redactics/redactics-sampledatasets/master/2020-olympic-athletes/athletes.csv",target:"_blank"},"athletes.csv"),", ",O.a.createElement(Re.a,{href:"https://raw.githubusercontent.com/Redactics/redactics-sampledatasets/master/marketing-campaign/marketing_campaign.csv",target:"_blank"},"marketing_campaign.csv"),".")),O.a.createElement(fe.a,null,O.a.createElement(Ae.a,null,O.a.createElement(be.a,null,O.a.createElement(Ee.a,null,"Enabled"),O.a.createElement(Ee.a,null,"Name"),O.a.createElement(Ee.a,null,"Tables to Extract"),O.a.createElement(Ee.a,null))),O.a.createElement(ge.a,null,this.props.agentInputs.map((function(t){var a=e.props.inputs.find((function(e){return e.uuid===t.uuid})),n=!!a&&a.enabled,r=a&&a.tables&&a.tables.length?a.tables.join(", "):"";return O.a.createElement(be.a,{key:t.uuid},O.a.createElement(Ee.a,null,O.a.createElement(je.a,{checked:n,name:"enabled",color:"primary",onChange:function(t){return e.props.handleInputChanges(t,a)}})),O.a.createElement(Ee.a,null,t.inputName),O.a.createElement(Ee.a,null,r),O.a.createElement(Be,null,O.a.createElement(We,{variant:"contained",color:"secondary",size:"small",onClick:function(){return e.props.triggerEditInputDialog(a)}},O.a.createElement(Le.a,null),"\xa0Edit Table Selection")))})))))}return O.a.createElement(N.a,null,"Workflows require at least one input source. Click on ",O.a.createElement("b",null,"Add Input Source")," to select an input source.")}},{key:"render",value:function(){var e="mockDatabaseMigration"===this.props.workflow.workflowType?"Input Source":"Input Sources";return O.a.createElement(O.a.Fragment,null,O.a.createElement(N.a,{mt:4},O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},e)),O.a.createElement(_.a,{open:this.props.editInputDialog,onClose:this.props.hideInputDialog,maxWidth:"md","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",fullWidth:!0},O.a.createElement(B.a,{id:"dialog-title"},"Edit Table Selection"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},this.editInputDialogContent()),O.a.createElement(Q.a,null,O.a.createElement(We,{color:"secondary",variant:"contained",onClick:this.props.saveInputChanges},"Update")))),O.a.createElement(N.a,{mt:8},this.outputInputs()))}}]),a}(O.a.Component)),Ke=Object(T.a)({selectAdornment:{marginRight:"-30px"}})(He),Me=a(618),ze=a(516),qe=a(608),Ge=Object(D.c)(L.a)(ae.b),$e=Object(D.c)(j.a)(ae.b),Ye=Object(D.c)($e)(i||(i=Object(F.a)(["\n  min-width: 200px;\n  max-width: 200px;\n"]))),Qe=Object(D.c)(Ge)(s||(s=Object(F.a)(["\n  width: 200px;\n"]))),Je=Object(D.c)(W.a)(ae.b),Xe=function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"disabledAlert",value:function(e){return"multiTenantWebERL"===e?O.a.createElement(N.a,{mb:4},O.a.createElement(Ie.a,{style:{color:Te.a[500],fontSize:25}})," ",O.a.createElement("b",null,'Scheduling is not supported with web-based workflows, this job will run immediately once you click the "Save and Run Workflow" button, below.')):null}},{key:"render",value:function(){return O.a.createElement(O.a.Fragment,null,O.a.createElement(N.a,{mt:8},O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Workflow Schedule Options"),O.a.createElement(N.a,{mt:4},this.disabledAlert(this.props.workflowType),O.a.createElement(Me.a,{"aria-label":"exportSchedule",name:"exportSchedule",onChange:this.props.handleExportSchedule,value:String(this.props.exportSchedule)},O.a.createElement(ze.a,{disabled:"multiTenantWebERL"===this.props.workflowType,value:"false",control:O.a.createElement(qe.a,null),label:"Do Not Automate Workflow"}),O.a.createElement(ze.a,{disabled:"multiTenantWebERL"===this.props.workflowType,value:"true",control:O.a.createElement(qe.a,null),label:"Schedule/Automate Workflow"}))),O.a.createElement(N.a,{mt:2,display:!0===this.props.exportSchedule?"block":"none"},O.a.createElement(N.a,null,O.a.createElement(Ye,{fullWidth:!0},O.a.createElement(q.a,{htmlFor:"scheduleSelection"},"Schedule"),O.a.createElement(Je,{name:"scheduleSelection",onChange:this.props.handleSchedule,value:this.props.scheduleSelection},O.a.createElement(Y.a,{key:"none",value:"None"},"None"),O.a.createElement(Y.a,{key:"hourly",value:"@hourly"},"Hourly"),O.a.createElement(Y.a,{key:"daily",value:"@daily"},"Daily"),O.a.createElement(Y.a,{key:"weekly",value:"@weekly"},"Weekly"),O.a.createElement(Y.a,{key:"monthly",value:"@monthly"},"Monthly"),O.a.createElement(Y.a,{key:"custom",value:"custom"},"Custom")))),O.a.createElement(N.a,{mt:4,display:!0===this.props.customSchedule?"block":"none"},O.a.createElement(Ye,{fullWidth:!0},O.a.createElement(Qe,{error:this.props.errors.schedule,name:"schedule",label:"Cronjob Schedule",value:this.props.schedule,onChange:this.props.handleSchedule,InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Schedule time as a cron expression",placement:"right-start"},O.a.createElement(ee.a,null)))}}),O.a.createElement(N.a,{mt:1},"See ",O.a.createElement(Re.a,{target:"_blank",rel:"noreferrer",href:"https://crontab.guru"},O.a.createElement("b",null,"Crontab Guru"))," for help with generating cron schedule expressions."))))))}}]),a}(O.a.Component),Ze=Object(D.c)(L.a)(ae.b),et=Object(D.c)(j.a)(ae.b),tt=Object(D.c)(et)(c||(c=Object(F.a)(["\n  min-width: 200px;\n  max-width: 200px;\n  display: inline;\n"]))),at=Object(D.c)(Ze)(d||(d=Object(F.a)(["\n  width: 200px;\n"]))),nt=Object(D.c)(U.a)(ae.b),rt=function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).displayColumnData=n.displayColumnData.bind(Object(w.a)(n)),n.displayRowsData=n.displayRowsData.bind(Object(w.a)(n)),n.genName=n.genName.bind(Object(w.a)(n)),n}return Object(k.a)(a,[{key:"displayColumnData",value:function(){var e=this,t=this.props.currentDatabaseTable;if(this.props.tableOutputOptions[t])return O.a.createElement(N.a,null,O.a.createElement(Me.a,{"aria-label":"exportColumns",name:"exportColumns",value:this.props.tableOutputOptions[t].exportColumns,onChange:function(a){return e.props.handleTableOutputChanges(a,t)}},O.a.createElement(ze.a,{value:"all",control:O.a.createElement(qe.a,null),label:"Export All Columns"}),O.a.createElement(ze.a,{value:"specific",control:O.a.createElement(qe.a,null),label:"Export Specific Columns"})),O.a.createElement(N.a,{mt:4,display:"specific"===this.props.tableOutputOptions[t].exportColumns?"block":"none"},this.props.tableOutputOptions[t].fields.map((function(a){return O.a.createElement(N.a,{key:a,display:"inline",pr:1},O.a.createElement(xe.a,{key:a,label:a,onDelete:function(n){return e.props.deleteExportTableColumn(n,t,a)}}))})),O.a.createElement(N.a,{mt:2},O.a.createElement(tt,{fullWidth:!0},O.a.createElement(at,{error:this.props.tableOutputOptions[t].errors.addColumn,name:"addColumn",label:"Add Column",value:this.props.tableOutputOptions[t].addColumn,onChange:function(a){return e.props.handleTableOutputChanges(a,t)}})),O.a.createElement(N.a,{mt:2},O.a.createElement(nt,{color:"secondary",variant:"outlined",onClick:function(a){return e.props.addExportTableColumn(a,t)}},O.a.createElement(X.a,null),"\xa0Add")))))}},{key:"disabledAlert",value:function(e){return"multiTenantWebERL"===e?O.a.createElement(N.a,{mt:4},O.a.createElement(Ie.a,{style:{color:Te.a[500],fontSize:25}})," ",O.a.createElement("b",null,"Web-based workflows only support exporting all rows, and not rows from a specific time period.")):null}},{key:"displayRowsData",value:function(){var e=this,t=this.props.currentDatabaseTable;if(this.props.tableOutputOptions[t])return O.a.createElement(N.a,{mt:4},this.disabledAlert(this.props.workflow.workflowType),O.a.createElement(Me.a,{"aria-label":"exportRows",name:"exportRows",value:this.props.tableOutputOptions[t].exportRows,onChange:function(a){return e.props.handleTableOutputChanges(a,t)}},O.a.createElement(ze.a,{value:"all",control:O.a.createElement(qe.a,null),label:"All Rows"}),O.a.createElement(ze.a,{disabled:!("ERL"===this.props.workflow.workflowType),value:"specific",control:O.a.createElement(qe.a,null),label:"Rows From a Specific Time Period"})),O.a.createElement(N.a,{mt:4,display:"specific"===this.props.tableOutputOptions[t].exportRows?"block":"none"},O.a.createElement(tt,null,O.a.createElement(W.a,{name:"sampleFields",value:this.props.tableOutputOptions[t].sampleFields,onChange:function(a){return e.props.handleTableOutputChanges(a,t)}},O.a.createElement(Y.a,{key:"created",value:"created"},"Created"),O.a.createElement(Y.a,{key:"updated",value:"updated"},"Updated"),O.a.createElement(Y.a,{key:"createdAndUpdated",value:"createdAndUpdated"},"Created or updated")),"\xa0\xa0in the last\xa0\xa0",O.a.createElement(W.a,{name:"numDays",value:this.props.tableOutputOptions[t].numDays,onChange:function(a){return e.props.handleTableOutputChanges(a,t)}},O.a.createElement(Y.a,{key:"1",value:"1"},"day"),O.a.createElement(Y.a,{key:"2",value:"2"},"2 days"),O.a.createElement(Y.a,{key:"3",value:"3"},"3 days"),O.a.createElement(Y.a,{key:"7",value:"7"},"1 week"),O.a.createElement(Y.a,{key:"14",value:"14"},"2 weeks"),O.a.createElement(Y.a,{key:"30",value:"30"},"month"),O.a.createElement(Y.a,{key:"60",value:"60"},"2 months"),O.a.createElement(Y.a,{key:"90",value:"90"},"3 months"),O.a.createElement(Y.a,{key:"180",value:"180"},"6 months"),O.a.createElement(Y.a,{key:"365",value:"365"},"year"))),O.a.createElement(N.a,{mt:4},O.a.createElement(tt,{fullWidth:!0,variant:"outlined"},O.a.createElement(at,{error:this.props.tableOutputOptions[t].errors.createdAtField,name:"createdAtField",label:"Created At Field Name",value:this.props.tableOutputOptions[t].createdAtField,onChange:function(a){return e.props.handleTableOutputChanges(a,t)},InputProps:{endAdornment:O.a.createElement($.a,{title:"(Required) field name in this table used for tracking created at timestamp",placement:"right-start"},O.a.createElement(ee.a,null))}}))),O.a.createElement(N.a,{mt:4},O.a.createElement(tt,{fullWidth:!0,variant:"outlined"},O.a.createElement(at,{error:this.props.tableOutputOptions[t].errors.updatedAtField,name:"updatedAtField",label:"Updated At Field Name",value:this.props.tableOutputOptions[t].updatedAtField,onChange:function(a){return e.props.handleTableOutputChanges(a,t)},InputProps:{endAdornment:O.a.createElement($.a,{title:"(Required) field name in this table used for tracking updated at timestamp",placement:"right-start"},O.a.createElement(ee.a,null))}})))))}},{key:"genName",value:function(e){var t=[],a=e.split(": "),n=a[a.length-1];return t.push(this.props.tableOutputOptions[n]&&this.props.tableOutputOptions[n].numDays&&"all"!==this.props.tableOutputOptions[n].exportRows?"rows for the last "+this.props.tableOutputOptions[n].numDays+" days":"all table rows"),t.join(" ")}},{key:"render",value:function(){var e=this;return this.props.allDatabaseTables?O.a.createElement(O.a.Fragment,null,O.a.createElement(N.a,null,O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Table Data Options"),O.a.createElement(_.a,{fullWidth:!0,open:this.props.showOutputOptions,onClose:this.props.hideOutputOptions,maxWidth:"md","aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Table Options: ",this.props.currentDatabaseTable),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},O.a.createElement(N.a,null,"To limit the initial copy of your data to a specific time range, specify this time range below. This may be useful if older data is not particularly relevant to you and/or your output table is large."),this.displayRowsData()),O.a.createElement(Q.a,null,O.a.createElement(nt,{color:"secondary",variant:"contained",onClick:this.props.hideOutputOptions},"Update")))),O.a.createElement(N.a,{mt:8},O.a.createElement(fe.a,null,O.a.createElement(Ae.a,null,O.a.createElement(be.a,null,O.a.createElement(Ee.a,null,"Table"),O.a.createElement(Ee.a,null,"Summary"),O.a.createElement(Ee.a,null))),O.a.createElement(ge.a,null,this.props.allDatabaseTables.map((function(t){var a=t.split(": "),n=a[a.length-1];return O.a.createElement(be.a,{key:n},O.a.createElement(Ee.a,null,n),O.a.createElement(Ee.a,null,e.genName(t)),O.a.createElement(Ee.a,null,O.a.createElement(nt,{color:"secondary",size:"small",variant:"contained",onClick:function(t){return e.props.triggerOutputOptions(t,n)}},O.a.createElement(Le.a,null),"\xa0Edit")))}))))))):null}}]),a}(O.a.Component),lt=a(521),ot=a(522),it=a(523),st=a(601),ct=a(602),dt=Object(D.c)(I.a)(ae.b),ut=Object(D.c)(L.a)(ae.b),pt=Object(D.c)(j.a)(ae.b),mt=Object(D.c)(pt)(u||(u=Object(F.a)(["\n  min-width: 200px;\n  max-width: 200px;\n"]))),ht=Object(D.c)(ut)(p||(p=Object(F.a)(["\n  width: 200px;\n"]))),ft=Object(D.c)(ut)(m||(m=Object(F.a)(["\n  width: 400px;\n"]))),gt=Object(D.c)(ut)(h||(h=Object(F.a)(["\n  width: 600px;\n"]))),bt={fontWeight:"bold"},Et=Object(D.c)(he.a)(ae.b),yt=Object(T.a)({root:{display:"block"}})(z.a),kt=Object(T.a)({root:{whiteSpace:"nowrap"}})(Ee.a),wt=Object(D.c)(de.a)(ae.b),vt=Object(D.c)(U.a)(ae.b),Ct=function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"databaseEngine",value:function(e){var t="";switch(e){case"postgresql":t="PostgreSQL"}return t}},{key:"dataFeedName",value:function(e){var t="";switch(e){case"dataRepository":t="Push Data to your Internal Data Repository";break;case"digitalTwin":t="Create a PII-free Digital Twin/Clone";break;case"s3upload":t="Upload/Sync Data to an Amazon S3 bucket";break;case"custom":t="Custom Container/Plugin"}return t}},{key:"dataFeedSummary",value:function(e){var t="",a=e.dataFeedConfig.S3UploadBucket;switch(e.dataFeedConfig.S3UploadBucket&&!e.dataFeedConfig.S3UploadBucket.match(/^s3:\/\//)&&(a="s3://"+e.dataFeedConfig.S3UploadBucket),e.dataFeed){case"dataRepository":t="Add datasets to your data repository (hosted at "+a+")";break;case"digitalTwin":if(t="Data will be cloned to your "+this.databaseEngine(e.dataFeedConfig.databaseEngine)+" database and will be ",t+=e.dataFeedConfig.enableDeltaUpdates?"updated with new data":"reset to match the original data",e.dataFeedConfig.enablePostUpdatePreparedStatements){var n=[];e.dataFeedConfig.postUpdateKeyValues.forEach((function(e){e.key&&e.value&&n.push(e.value)})),n.length&&(t+=". After each time the workflow runs your data will be modified with the following values: "+n.join(", ")+".")}break;case"s3upload":t="Upload ",t+=e.dataFeedConfig.uploadFileChecked.length===this.props.getS3UploadFileNames().length?"all":e.dataFeedConfig.uploadFileChecked.length,t+=1===e.dataFeedConfig.uploadFileChecked.length?" table":" tables",t+=" to "+a;break;case"custom":t="Invoke custom container "+e.dataFeedConfig.image+":"+e.dataFeedConfig.tag}return t}},{key:"outputTable",value:function(){var e=this;return this.props.dataFeeds&&this.props.dataFeeds.length?O.a.createElement(fe.a,null,O.a.createElement(Ae.a,null,O.a.createElement(be.a,null,O.a.createElement(Ee.a,null,"Data Feed"),O.a.createElement(Ee.a,null,"Summary"),O.a.createElement(Ee.a,null))),O.a.createElement(ge.a,null,this.props.dataFeeds.map((function(t){return O.a.createElement(be.a,{key:t.uuid},O.a.createElement(Ee.a,null,e.dataFeedName(t.dataFeed)),O.a.createElement(Ee.a,null,e.dataFeedSummary(t)),O.a.createElement(kt,null,O.a.createElement(vt,{disabled:"multiTenantWebERL"===e.props.workflow.workflowType,variant:"contained",color:"secondary",size:"small",onClick:function(){return e.props.triggerEditDataFeed(t)}},O.a.createElement(Le.a,null),"\xa0Edit"),"\xa0",O.a.createElement(vt,{disabled:"multiTenantWebERL"===e.props.workflow.workflowType,variant:"contained",color:"default",size:"small",onClick:function(){return e.props.deleteDataFeed(t)}},O.a.createElement(pe.a,null),"\xa0Delete")))})))):O.a.createElement(N.a,null,"Click on ",O.a.createElement("b",null,"Add Data Feed")," to define your first data feed.")}},{key:"showErrors",value:function(){return this.props.errors.duplicateDataFeed?O.a.createElement(Et,{mb:4,severity:"error"},"You can only create one of each type of Data Feed"):this.props.errors.invalidBucketName?O.a.createElement(Et,{mb:4,severity:"error"},"Invalid Amazon S3 bucket name. ",O.a.createElement(Re.a,{target:"_blank",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html"},"Naming guidelines")):this.props.errors.invalidPostUpdateKeyValues?O.a.createElement(Et,{mb:4,severity:"error"},"Invalid parameter key or value. Parameters must not be empty and must not contain %, (, or ) characters"):this.props.errors.invalidSecret?O.a.createElement(Et,{mb:4,severity:"error"},"One or more of your secrets is missing a value - all fields are required"):null}},{key:"getAgent",value:function(){var e=this,t=this.props.agents.filter((function(t){return t.uuid===e.props.workflow.agentId}));return t.length?t[0]:{configPath:"",namespace:""}}},{key:"disabledAlert",value:function(e){return"multiTenantWebERL"===e?O.a.createElement(N.a,{mt:4},O.a.createElement(Ie.a,{style:{color:Te.a[500],fontSize:25}})," ",O.a.createElement("b",null,"Definable Data Feeds are not supported with web-based workflows.")):null}},{key:"render",value:function(){var e=this,t=this.props.dataFeed.feedSecrets.length?O.a.createElement("p",null,"Be sure that any secrets that need to be attached to your post-processing Docker container exist in this same Kubernetes namespace."):"";return O.a.createElement(O.a.Fragment,null,O.a.createElement(N.a,{mt:8},O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Data Feeds"),O.a.createElement(_.a,{open:this.props.editDataFeed,onClose:this.props.hideDataFeed,fullWidth:!0,maxWidth:"md","aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},this.props.dataFeed.uuid.match(/^new/)?"Add":"Edit"," Data Feed"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},this.showErrors(),O.a.createElement(N.a,{display:""===this.props.dataFeed.dataFeed?"block":"none"},this.disabledAlert(this.props.workflow.workflowType),O.a.createElement(lt.a,{component:"nav","aria-label":"data feed selection"},O.a.createElement(ot.a,{disabled:!("ERL"===this.props.workflow.workflowType),button:!0,onClick:function(){return e.props.handleDataFeed("dataRepository")}},O.a.createElement(it.a,{primary:"Push Data to your Internal Data Repository",primaryTypographyProps:{style:bt},secondary:"Uploads your PII-free datasets to an Amazon S3 bucket, and reports the dataset to your Data Repository page. The Data Repositories page includes instructions to automate the download and installation of these data sets. This approach makes developer testing against production data easy, and is an effective alternative to creating and maintaining developer seed data."})),O.a.createElement(ot.a,{disabled:!("ERL"===this.props.workflow.workflowType),button:!0,onClick:function(){return e.props.handleDataFeed("digitalTwin")}},O.a.createElement(it.a,{primary:"Create a PII-free Digital Twin/Clone",primaryTypographyProps:{style:bt},secondary:"Creates a PII-free clone of your data to a target/output database. Any data written in the target tables is replaced by the data from your source/input."})),O.a.createElement(ot.a,{disabled:!("ERL"===this.props.workflow.workflowType),button:!0,onClick:function(){return e.props.handleDataFeed("s3upload")}},O.a.createElement(it.a,{primary:"Upload/Sync Data to an Amazon S3 Bucket",primaryTypographyProps:{style:bt},secondary:"Upload your table data CSV files to an Amazon S3 bucket."})),O.a.createElement(ot.a,{disabled:!("ERL"===this.props.workflow.workflowType),button:!0,onClick:function(){return e.props.handleDataFeed("custom")}},O.a.createElement(it.a,{primary:"Configure a Custom Container/Plugin",primaryTypographyProps:{style:bt},secondary:"Trigger your own custom container to carry out work of your choosing."})))),O.a.createElement(N.a,{mt:8,display:"dataRepository"===this.props.dataFeed.dataFeed?"block":"none"},O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Data Repository Options"),O.a.createElement(N.a,{mt:8},O.a.createElement(mt,{fullWidth:!0,variant:"outlined"},O.a.createElement(ft,{name:"S3UploadBucket",error:this.props.errors.invalidBucketName,onChange:function(t){return e.props.handleDataFeedOptions(t)},value:this.props.dataFeed.dataFeedConfig.S3UploadBucket,label:"S3 Bucket",InputProps:{startAdornment:O.a.createElement(G.a,{position:"start"},O.a.createElement("b",null,"S3://"))}}))),O.a.createElement(N.a,{mt:8},O.a.createElement(wt,{variant:"outlined"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Plugin Requirements")),O.a.createElement(yt,null,O.a.createElement("p",null,"This plugin requires an AWS access key ID and secret access key pair to authenticate to the provided bucket. Create an AWS credentials file in the style of the ",O.a.createElement("code",null,"~/.aws/credentials")," example provided ",O.a.createElement(Re.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html",target:"_blank"},"here")," and run the following command to create a secret in your Kubernetes cluster namespace as the contents of this file:"),O.a.createElement("p",null,O.a.createElement("code",null,"kubectl create secret generic aws -n ",this.props.agentNamespace||"unknown_namespace"," --from-file=/path/to/aws/credentials"))))))),O.a.createElement(N.a,{mt:8,display:"digitalTwin"===this.props.dataFeed.dataFeed?"block":"none"},O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Digital Twin Options"),O.a.createElement("p",null,"Adding this data feed will require updating your Agent configuration file (provided within the ",O.a.createElement(Re.a,{href:"/agents",target:"_blank"},"Agents"),' page), replacing the "changeme"s for connection ID ',O.a.createElement("code",null,this.props.dataFeed.uuid)," with the specified connection info for this input source."),O.a.createElement(N.a,{mt:4},O.a.createElement(mt,{margin:"dense",fullWidth:!0},O.a.createElement(q.a,null,"Input Source"),O.a.createElement(W.a,{error:this.props.errors.databaseEngine,value:this.props.dataFeed.dataFeedConfig.databaseEngine,name:"databaseEngine",onChange:function(t){return e.props.handleDataFeedOptions(t)}},O.a.createElement(Y.a,{key:"postgresql",value:"postgresql"},"PostgreSQL")))),O.a.createElement(N.a,{mt:4},O.a.createElement(ze.a,{control:O.a.createElement(je.a,{checked:this.props.dataFeed.dataFeedConfig.enableSSL,onChange:function(t){return e.props.handleDataFeedOptions(t)},name:"enableSSL",color:"primary"}),label:"Database Connectivity Should Be TLS/SSL Encrypted"})),O.a.createElement(N.a,{mt:4,display:this.props.dataFeed.uuid.match(/^new/)&&this.props.dataFeed.dataFeedConfig.enableSSL?"block":"none"},"Once this data feed has been saved (and assigned an ID), edit this input to find TLS/SSL encryption setup instructions"),O.a.createElement(N.a,{mt:4,display:!this.props.dataFeed.uuid.match(/^new/)&&this.props.dataFeed.dataFeedConfig.enableSSL?"block":"none"},O.a.createElement(wt,{variant:"outlined"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"TLS/SSL Encryption Setup Instructions")),O.a.createElement(yt,null,"Enabling TLS/SSL encryption requires having an engineer perform the following four steps. These steps (even upon completion) will remain available here for reference:",O.a.createElement("ol",null,O.a.createElement("li",null,"Figure out what ",O.a.createElement("code",null,"sslmode")," option is required by your database host/provider. Possibilities include ",O.a.createElement("code",null,"allow, prefer, require, verify-ca, verify-full")," (",O.a.createElement(Re.a,{href:"https://www.postgresql.org/docs/12/libpq-ssl.html",target:"_blank"},"more info"),"). Also figure out whether your database requires presenting only the root CA certificate, or the root CA as well as client cert and key files. Download these required files - we'll need them for step 3."),O.a.createElement("li",null,"Update your Helm configuration file (i.e. ",O.a.createElement("code",null,this.getAgent().configPath),") and add the following in the block (respecting proper indentation level) that includes ",O.a.createElement("code",null,"id: ",this.props.dataFeed.uuid),". Take out the ",O.a.createElement("code",null,"sslcert")," and ",O.a.createElement("code",null,"sslkey")," params if your server doesn't require these, and you can adjust the ",O.a.createElement("code",null,"sslmode")," value as necessary:",O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement("code",null,"enableSSL: true",O.a.createElement("br",null),'extra: \'{"sslmode":"verify-ca", "sslrootcert":"/pgcerts/',this.props.dataFeed.uuid,'/sslrootcert", "sslcert": "/pgcerts/',this.props.dataFeed.uuid,'/sslcert", "sslkey": "/pgcerts/',this.props.dataFeed.uuid,"/sslkey\"}'"),O.a.createElement("br",null),O.a.createElement("br",null),"If, for whatever reason, you'd like to disable this TLS/SSL connectivity you can simply comment out these two lines by entering a hash (i.e. ",O.a.createElement("code",null,"#"),") character before each line."),O.a.createElement("li",null,"Create a Kubernetes secret containing the certificates required by your database. Adjust the file paths, and take out the ",O.a.createElement("code",null,"sslcert")," and ",O.a.createElement("code",null,"sslkey")," params if your server doesn't require these:",O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement("code",null,"kubectl create secret -n ",this.getAgent().namespace," generic pgcert-",this.props.dataFeed.uuid," --from-file=sslrootcert=/path/to/server-ca.pem --from-file=sslcert=/path/to/client-cert.pem  --from-file=sslkey=/path/to/client-key.pem")),O.a.createElement("li",null,"Visit the Agent page and reapply the provided configuration to your cluster, which will update all agent database connections to use the updated configuration you've provided in your Helm configuration file.")))))),O.a.createElement(N.a,{mt:4},O.a.createElement(ze.a,{control:O.a.createElement(je.a,{checked:this.props.dataFeed.dataFeedConfig.enableDeltaUpdates,onChange:function(t){return e.props.handleDataFeedOptions(t)},name:"enableDeltaUpdates",color:"primary"}),label:"Enable Delta Updates"}),O.a.createElement(N.a,null,"After your initial job has run your workflow performance can be increased substantially by only transferring changed data, rather than recreating tables from scratch. Leave this disabled to hard-reset your data each time your workflow runs.")),O.a.createElement(N.a,{mt:4,display:this.props.dataFeed.dataFeedConfig.enableDeltaUpdates?"block":"none"},O.a.createElement(mt,{fullWidth:!0},O.a.createElement(ht,{name:"deltaUpdateField",value:this.props.dataFeed.dataFeedConfig.deltaUpdateField,onChange:function(t){return e.props.handleDataFeedOptions(t)},label:"Updated Date Field Name",InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:'Field name in your table that contains the timestamp tracking the last updated date, e.g. "updated_at"',placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(N.a,{mt:4},O.a.createElement(ze.a,{control:O.a.createElement(je.a,{checked:this.props.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements,onChange:function(t){return e.props.handleDataFeedOptions(t)},name:"enablePostUpdatePreparedStatements",color:"primary"}),label:"Enable Custom Data Updates"}),O.a.createElement(N.a,null,"Run custom SQL commands after your workflows run to make custom updates to your data. One use case for this is personalizing demos (e.g. to specify the name and logo of the company you are demoing to). To do so, you'll need to define a prepared SQL statement (i.e. an SQL command supporting parameters), as well as the values for these parameters."),O.a.createElement(N.a,{mt:4,display:this.props.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements?"block":"none"},O.a.createElement(N.a,null,"As an example, in ",O.a.createElement("code",null,"UPDATE company SET name=%(company_name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s"),", the three parameters in this prepared SQL statement are ",O.a.createElement("code",null,"company_name"),", ",O.a.createElement("code",null,"logo"),", and ",O.a.createElement("code",null,"company_id"),". See below for the instructions for defining your prepared statements, and click on the ",O.a.createElement("b",null,"Add Parameter Value")," button below these instructions to define the key/value pairs for each parameter in your prepared statement(s). For example, for the company_name parameter your parameter key would be ",O.a.createElement("code",null,"company_name"),", and your parameter value: ",O.a.createElement("code",null,"Company we are demoing to"),"."),O.a.createElement(N.a,{mt:4},O.a.createElement(wt,{variant:"outlined"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Prepared Statement Setup Instructions")),O.a.createElement(yt,null,O.a.createElement(N.a,null,"Prepared statements are SQL commands saved as Kubernetes secrets. Here is an example prepared statement: ",O.a.createElement("code",null,"UPDATE company SET name=%(name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s"),". In this example ",O.a.createElement("code",null,"name"),", ",O.a.createElement("code",null,"logo")," and ",O.a.createElement("code",null,"company_id")," are placeholder parameters requiring values, which you'll set below. Parameter key/value pairs are required rather than entire SQL commands for security reasons, and to make it easy for anybody in your company to change these values without running the risk of corrupting your data. To create this secret as per this example:",O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement("code",null,"kubectl create secret -n ",this.getAgent().namespace,' generic digital-twin --from-literal=prepared-statements="UPDATE company SET name=%(name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s;"'),O.a.createElement("br",null),O.a.createElement("br",null),"Create your own prepared statements by replacing what is quoted here.",O.a.createElement("br",null),O.a.createElement("br",null),"Multiple SQL commands are supported, separated by semicolons, and please note that the format of ",O.a.createElement("code",null,"%(your_variable)s")," is required for all variable types (including non-strings) - the correct type will be automatically cast. All paraemters require that a value is provided."))))),O.a.createElement(N.a,{mt:4},O.a.createElement(fe.a,{size:"small",style:{width:"auto"}},O.a.createElement(ge.a,null,this.props.dataFeed.dataFeedConfig.postUpdateKeyValues.map((function(t,a){return O.a.createElement(be.a,{key:a},O.a.createElement(Ee.a,{style:{paddingLeft:0}},O.a.createElement(mt,null,O.a.createElement(ht,{variant:"outlined",margin:"dense",name:"parameterKey",value:t.key,onChange:function(t){return e.props.updateParameterValue(a,t)},label:"Parameter Key"}))),O.a.createElement(Ee.a,null,O.a.createElement(mt,null,O.a.createElement(ht,{variant:"outlined",margin:"dense",name:"parameterValue",value:t.value,onChange:function(t){return e.props.updateParameterValue(a,t)},label:"Parameter Value"}))),O.a.createElement(Ee.a,null,O.a.createElement(vt,{variant:"contained",color:"secondary",size:"small",onClick:function(){return e.props.deleteParameterValue(a)}},O.a.createElement(pe.a,null))))})))),O.a.createElement(N.a,{mt:4},O.a.createElement(vt,{variant:"contained",color:"secondary",size:"small",onClick:this.props.addParameterValue},O.a.createElement(X.a,null),"\xa0\xa0Add Parameter Value")))))),O.a.createElement(N.a,{mt:8,display:"s3upload"===this.props.dataFeed.dataFeed?"block":"none"},O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Amazon S3 File Upload Options"),O.a.createElement(N.a,{mt:8},O.a.createElement(P.a,{variant:"h6",gutterBottom:!0},"Data Files to Upload"),O.a.createElement(dt,{container:!0},O.a.createElement(dt,{item:!0,xs:8},O.a.createElement(N.a,{mt:8},O.a.createElement(wt,{variant:"outlined"},O.a.createElement(N.a,{mt:4},O.a.createElement(fe.a,null,O.a.createElement(Ae.a,null,O.a.createElement(be.a,null,O.a.createElement(Ee.a,null,O.a.createElement(je.a,{onClick:this.props.addAllToS3UploadList,checked:this.props.dataFeed.dataFeedConfig.addAllS3Uploads})," Add All Files"),O.a.createElement(Ee.a,{align:"left"},"File"))),O.a.createElement(ge.a,null,this.props.getS3UploadFileNames().map((function(t){return O.a.createElement(be.a,{key:t},O.a.createElement(Ee.a,{component:"th",scope:"row"},O.a.createElement(je.a,{onClick:function(a){return e.props.markAddToS3UploadList(a,t)},checked:!(!e.props.dataFeed.dataFeedConfig.uploadFileChecked||!e.props.dataFeed.dataFeedConfig.uploadFileChecked.includes(t))})),O.a.createElement(Ee.a,{align:"left"},t))})))))))))),O.a.createElement(N.a,{mt:8},O.a.createElement(mt,{fullWidth:!0,variant:"outlined"},O.a.createElement(ft,{name:"S3UploadBucket",error:this.props.errors.invalidBucketName,onChange:function(t){return e.props.handleDataFeedOptions(t)},value:this.props.dataFeed.dataFeedConfig.S3UploadBucket,label:"S3 Bucket",InputProps:{startAdornment:O.a.createElement(G.a,{position:"start"},O.a.createElement("b",null,"S3://"))}}))),O.a.createElement(N.a,{mt:8},O.a.createElement(wt,{variant:"outlined"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Plugin Requirements")),O.a.createElement(yt,null,O.a.createElement("p",null,"This plugin requires an AWS access key ID and secret access key pair to authenticate to the provided bucket. Create an AWS credentials file in the style of the ",O.a.createElement("code",null,"~/.aws/credentials")," example provided ",O.a.createElement(Re.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html",target:"_blank"},"here")," and run the following command to create a secret in your Kubernetes cluster namespace as the contents of this file:"),O.a.createElement("p",null,O.a.createElement("code",null,"kubectl create secret generic aws -n ",this.props.agentNamespace||"unknown_namespace"," --from-file=/path/to/aws/credentials"))))))),O.a.createElement(N.a,{mt:8,display:"custom"===this.props.dataFeed.dataFeed?"block":"none"},O.a.createElement(N.a,null,O.a.createElement(P.a,{variant:"h4",gutterBottom:!0},"Custom Container/Plugin Configuration"),O.a.createElement("p",null,"The filenames that will be exported are as follows: ",O.a.createElement("b",null,this.props.getS3UploadFileNames().join(", ")),". Some documentation for developing your own custom container/plugin can be found on the ",O.a.createElement(Re.a,{href:"/developers",target:"_blank"},"developers page"),".")),O.a.createElement(N.a,{mt:4},O.a.createElement(ft,{name:"image",error:this.props.errors.image,value:this.props.dataFeed.dataFeedConfig.image,onChange:function(t){return e.props.handleDataFeedOptions(t)},label:"Docker Image",placeholder:"amazon/aws-cli",InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Docker image URL (Dockerhub example: 'amazon/aws-cli')",placement:"right-start"},O.a.createElement(ee.a,null)))}})),O.a.createElement(N.a,{mt:4},O.a.createElement(ft,{name:"tag",error:this.props.errors.tag,value:this.props.dataFeed.dataFeedConfig.tag,onChange:function(t){return e.props.handleDataFeedOptions(t)},label:"Docker Image Tag",placeholder:"latest",InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Image tag/version (e.g. 'latest', '5.0.0')",placement:"right-start"},O.a.createElement(ee.a,null)))}})),O.a.createElement(N.a,{mt:4},O.a.createElement(ft,{name:"shell",error:this.props.errors.shell,value:this.props.dataFeed.dataFeedConfig.shell,onChange:function(t){return e.props.handleDataFeedOptions(t)},label:"Shell Path",placeholder:"/bin/bash",InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Custom container commands will be prefaced with this shell path, i.e. <shell path> -c '<command>' '<args>'",placement:"right-start"},O.a.createElement(ee.a,null)))}})),O.a.createElement(N.a,{mt:4},O.a.createElement(gt,{name:"command",multiline:!0,rowsMax:"4",value:this.props.dataFeed.dataFeedConfig.command,onChange:function(t){return e.props.handleDataFeedOptions(t)},label:"Command (optional)",InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Optional command to override container default, in Docker this field name is 'entrypoint'.",placement:"right-start"},O.a.createElement(ee.a,null)))}})),O.a.createElement(N.a,{mt:4},O.a.createElement(gt,{name:"args",multiline:!0,rowsMax:"4",value:this.props.dataFeed.dataFeedConfig.args,onChange:function(t){return e.props.handleDataFeedOptions(t)},label:"Args (optional)",InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Optional command to override container default, in Docker this field name is 'cmd'.",placement:"right-start"},O.a.createElement(ee.a,null)))}})),O.a.createElement(vt,{variant:"contained",color:"secondary",mt:4,size:"small",onClick:function(){e.props.addSecret("volume")}},O.a.createElement(st.a,null),"\xa0 Attach Secret Disk/Volume to Container"),"\xa0",O.a.createElement(vt,{variant:"contained",color:"secondary",mt:4,size:"small",onClick:function(){e.props.addSecret("env")}},O.a.createElement(ct.a,null),"\xa0 Attach Environment Variable to Container"),O.a.createElement(N.a,{mt:8},t,O.a.createElement(fe.a,{size:"small",style:{width:"auto"}},O.a.createElement(ge.a,null,this.props.dataFeed.feedSecrets.map((function(t,a){return"volume"===t.secretType?O.a.createElement(be.a,{key:a},O.a.createElement(Ee.a,{style:{paddingLeft:0}},O.a.createElement(st.a,null)),O.a.createElement(Ee.a,null,O.a.createElement(mt,{fullWidth:!0},O.a.createElement(ht,{name:"secretName",value:t.secretName,label:"Secret Name",variant:"outlined",margin:"dense",onChange:function(t){return e.props.handleCustomSecret(t,a)},InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Kubernetes secret name as it appears in 'kubectl get secrets'",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(Ee.a,null,O.a.createElement(mt,{fullWidth:!0},O.a.createElement(ht,{name:"secretKey",value:t.secretKey,label:"Secret Key",variant:"outlined",margin:"dense",onChange:function(t){return e.props.handleCustomSecret(t,a)},InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Kubernetes secret key contained within this secret",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(Ee.a,null,O.a.createElement(mt,{fullWidth:!0},O.a.createElement(ht,{name:"secretPath",value:t.secretPath,label:"Secret Container Path",variant:"outlined",margin:"dense",onChange:function(t){return e.props.handleCustomSecret(t,a)},InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Path to mount this secret within your container",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(Ee.a,null,O.a.createElement(vt,{variant:"contained",size:"small",color:"secondary",onClick:function(){return e.props.handleDeleteSecret(a)}},O.a.createElement(pe.a,null),"\xa0\xa0Delete"))):"env"===t.secretType?O.a.createElement(be.a,null,O.a.createElement(Ee.a,{style:{paddingLeft:0}},O.a.createElement(ct.a,null)),O.a.createElement(Ee.a,null,O.a.createElement(mt,{fullWidth:!0},O.a.createElement(ht,{name:"secretName",value:t.secretName,label:"Secret Name",variant:"outlined",margin:"dense",onChange:function(t){return e.props.handleCustomSecret(t,a)},InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Kubernetes secret name as it appears in 'kubectl get secrets'",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(Ee.a,null,O.a.createElement(mt,{fullWidth:!0},O.a.createElement(ht,{name:"secretKey",value:t.secretKey,label:"Secret Key",variant:"outlined",margin:"dense",onChange:function(t){return e.props.handleCustomSecret(t,a)},InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Kubernetes secret key contained within this secret",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(Ee.a,null,O.a.createElement(mt,{fullWidth:!0},O.a.createElement(ht,{name:"envName",value:t.envName,label:"Variable Name",variant:"outlined",margin:"dense",onChange:function(t){return e.props.handleCustomSecret(t,a)},InputProps:{endAdornment:O.a.createElement(G.a,{position:"end"},O.a.createElement($.a,{title:"Environment variable name to be presented to this container, often in all caps",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(Ee.a,null,O.a.createElement(vt,{variant:"contained",size:"small",color:"secondary",onClick:function(){return e.props.handleDeleteSecret(a)}},O.a.createElement(pe.a,null),"\xa0\xa0Delete"))):null}))))))),O.a.createElement(Q.a,null,O.a.createElement(N.a,{display:""!==this.props.dataFeed.dataFeed?"block":"none"},O.a.createElement(vt,{color:"default",variant:"contained",onClick:this.props.handleDataFeedBack},"Back"),"\xa0",O.a.createElement(vt,{color:"secondary",variant:"contained",onClick:this.props.saveDataFeedChanges},"Update")),O.a.createElement(N.a,{display:""===this.props.dataFeed.dataFeed?"block":"none"},O.a.createElement(vt,{color:"secondary",onClick:this.props.handleDataFeedCancel},"Cancel"))))),O.a.createElement(dt,{container:!0},O.a.createElement(dt,{item:!0,xs:8},O.a.createElement(P.a,{variant:"body1",gutterBottom:!0},"Data feeds provide several options for populating and/or syncing data with your No PII Zone on a recurring basis and sharing data with your internal and external stakeholders. With or without a data feed you can retrieve output files via the ",O.a.createElement("code",null,"Download Export")," command provided by the ",O.a.createElement(Re.a,{href:"/developers",target:"_blank"},"Redactics Agent CLI"),"."))),O.a.createElement(N.a,{mt:8},O.a.createElement(dt,{justify:"space-between",container:!0,spacing:10},O.a.createElement(dt,{item:!0}),O.a.createElement(dt,{item:!0,mb:6},O.a.createElement("div",null,O.a.createElement(vt,{variant:"contained",color:"secondary",size:"small",onClick:this.props.addDataFeed},O.a.createElement(X.a,null),"\xa0 Add Data Feed")))),this.outputTable())))}}]),a}(O.a.Component),Ft=Object(D.c)(L.a)(ae.b),St=Object(D.c)(j.a)(ae.b),Ot=Object(D.c)(St)(f||(f=Object(F.a)(["\n  min-width: 200px;\n  max-width: 200px;\n"]))),Dt=Object(D.c)(Ft)(g||(g=Object(F.a)(["\n  width: 200px;\n"]))),Tt=Object(T.a)({root:{display:"block"}})(z.a),xt=function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){var e=this,t="\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: trigger-db-migration-mock-{{ .Release.Revision }}\n  namespace: ".concat(this.props.workflow.migrationNamespace||"default",'\n  annotations:\n    "helm.sh/hook": pre-upgrade\n    "helm.sh/hook-weight": "').concat(this.props.workflow.migrationHelmHookWeight||"0",'"\n    "helm.sh/hook-delete-policy": hook-succeeded\nspec:\n  template:\n    spec:\n      restartPolicy: Never\n      containers:\n        - name: trigger-db-migration-mock\n          image: redactics/airflow-dagrun-poller:1.1.0\n          imagePullPolicy: Always\n          args:\n          - bash\n          - -c\n          - |\n              DAG_RUN_ID=$(curl -s -X POST -d "{\\"workflowType\\": \\"mockDatabaseMigration\\", \\"workflowId\\": \\"${WORKFLOW_ID}\\"}" -H "Content-Type: application/json" -H "Accept: application/json" -H "x-api-key: ${REDACTICS_API_KEY}" ${REDACTICS_API_URL}/workflow/jobs | jq -r \'.uuid\')\n              curl -s -X POST -H "Authorization: Basic ${BASIC_AUTH}" -H "Content-Type: application/json" -H "Accept: application/json" -d "{\\"dag_run_id\\": \\"${DAG_RUN_ID}\\", \\"conf\\": {\\"workflowJobId\\": \\"${DAG_RUN_ID}\\"}}" ${API_URL}/api/v1/dags/${DAG_ID}/dagRuns\n              DAG_RUN_ID=${DAG_RUN_ID} /poller.sh\n              if [ $? -ne 0 ]; then\n                exit 1\n              fi\n          env:\n          - name: REDACTICS_API_URL\n            value: https://api.redactics.com\n          - name: API_URL\n            value: http://redactics-webserver.').concat(this.props.agentNamespace,".svc.cluster.local:8080\n          - name: DAG_ID\n            value: ").concat(this.props.workflow.uuid,"-migrationmocking\n          - name: TAIL_TASK_ID\n            value: clone-db\n          - name: WORKFLOW_ID\n            value: ").concat(this.props.workflow.uuid,"\n          - name: REDACTICS_API_KEY\n            valueFrom:\n              secretKeyRef:\n                name: redactics\n                key: api-key\n          - name: BASIC_AUTH\n            valueFrom:\n              secretKeyRef:\n                name: redactics\n                key: basic-auth\n    "),a='\n#!/bin/bash\n\n# change values as necessary, this script will work when running inside a Kubernetes container, and when the\n# variables REDACTICS_API_KEY and BASIC_AUTH are set outside of this script from values stored as Kubernetes secrets.\n# The open source libraries "curl" and "jq" must be available within this environment, in addition to the poller.sh script.\n\nexport REDACTICS_API_URL=https://api.redactics.com\nexport API_URL=http://redactics-webserver.'.concat(this.props.agentNamespace,".svc.cluster.local:8080\nexport DAG_ID=").concat(this.props.workflow.uuid,"-migrationmocking\nexport TAIL_TASK_ID=clone-db\nexport WORKFLOW_ID=").concat(this.props.workflow.uuid,'\nexport POLLER_PATH=/poller.sh\n\nDAG_RUN_ID=$(curl -s -X POST -d "{\\"workflowType\\": \\"mockDatabaseMigration\\", \\"workflowId\\": \\"${WORKFLOW_ID}\\"}" -H "Content-Type: application/json" -H "Accept: application/json" -H "x-api-key: ${REDACTICS_API_KEY}" ${REDACTICS_API_URL}/workflow/jobs | jq -r \'.uuid\')\ncurl -s -X POST -H "Authorization: Basic ${BASIC_AUTH}" -H "Content-Type: application/json" -H "Accept: application/json" -d "{\\"dag_run_id\\": \\"${DAG_RUN_ID}\\", \\"conf\\": { \\"workflowJobId\\": \\"${DAG_RUN_ID}\\"}}" ${API_URL}/api/v1/dags/${DAG_ID}/dagRuns\nDAG_RUN_ID=${DAG_RUN_ID} ${POLLER_PATH}\n    ');return O.a.createElement(O.a.Fragment,null,O.a.createElement(N.a,null,"Performing a dry run of your migrations requires your adding a step to your CI/CD pipeline (or manual process) to trigger a workflow installed in the Redactics Agent. This workflow clones your database to prepare for your database migration dry-run against this clone. Once this step is complete you can then run your migration using an environment variable to override your database that would normally be used with your cloned database."),O.a.createElement(N.a,{mt:4},"One way to put together a complete working flow is to add some sort of flag in your CI/CD workflow that triggers this alteration to your normal workflow when a database migration dry-run option is selected, followed by the database migration against the clone. This can be done by triggering a script that runs on your server hosting your app, or if your database migration is triggered via a Helmchart hook, adding an additional hook that runs before your normal migration hook."),O.a.createElement(N.a,{mt:4},"Using the values you provide here, we will generate the code needed to perform this middle step which you can customize this as needed. We will also generate a secret containing your Redactics API key (used to show progress in ",O.a.createElement(Re.a,{href:"/workflows/jobs"},"Workflows -> Jobs")," as well as report issues to the notification bell icon in the upper right of this page), and an authentication token for the REST API embedded into the Redactics Agent. These secrets will be installed into your Kubernetes namespace (as you've provided below) the next time you upgrade your Redactics Agent software."),O.a.createElement(N.a,{mt:8},O.a.createElement(Ot,{fullWidth:!0},O.a.createElement(Dt,{name:"migrationNamespace",label:"Kubernetes Namespace",value:this.props.workflow.migrationNamespace,onChange:function(t){return e.props.handleWFChanges(t,e.props.workflow.uuid)},InputProps:{endAdornment:O.a.createElement(G.a,{className:this.props.classes.selectAdornment,position:"end"},O.a.createElement($.a,{title:"Kubernetes namespace where your database migrations run",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(N.a,{mt:4},O.a.createElement(Ot,{fullWidth:!0},O.a.createElement(Dt,{name:"migrationDatabase",label:"Database Name",value:this.props.workflow.migrationDatabase,onChange:function(t){return e.props.handleWFChanges(t,e.props.workflow.uuid)},InputProps:{endAdornment:O.a.createElement(G.a,{className:this.props.classes.selectAdornment,position:"end"},O.a.createElement($.a,{title:"Database name of database that should be cloned",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(N.a,{mt:4},O.a.createElement(Ot,{fullWidth:!0},O.a.createElement(Dt,{name:"migrationDatabaseClone",label:"Cloned Database Name",value:this.props.workflow.migrationDatabaseClone,onChange:function(t){return e.props.handleWFChanges(t,e.props.workflow.uuid)},InputProps:{endAdornment:O.a.createElement(G.a,{className:this.props.classes.selectAdornment,position:"end"},O.a.createElement($.a,{title:"Database name for your clone",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(N.a,{mt:4},O.a.createElement(Ot,{fullWidth:!0},O.a.createElement(q.a,{htmlFor:"agent"},"Generate Configuration For"),O.a.createElement(W.a,{name:"migrationConfiguration",value:this.props.workflow.migrationConfiguration,onChange:function(t){return e.props.handleWFChanges(t,e.props.workflow.uuid)}},O.a.createElement(Y.a,{key:"helmhook",value:"helmhook"},"Sample Helmchart Hook"),O.a.createElement(Y.a,{key:"script",value:"script"},"Sample Script")))),O.a.createElement(N.a,{mt:4,display:"helmhook"===this.props.workflow.migrationConfiguration?"block":"none"},O.a.createElement(Ot,{fullWidth:!0},O.a.createElement(Dt,{name:"migrationHelmHookWeight",type:"number",label:"Helmchart Hook Weight",value:this.props.workflow.migrationHelmHookWeight||"0",onChange:function(t){return e.props.handleWFChanges(t,e.props.workflow.uuid)},InputProps:{endAdornment:O.a.createElement(G.a,{className:this.props.classes.selectAdornment,position:"end"},O.a.createElement($.a,{title:"Helmchart hook weight (hooks are executed in ascending order)",placement:"right-start"},O.a.createElement(ee.a,null)))}}))),O.a.createElement(N.a,{mt:8,display:"helmhook"===this.props.workflow.migrationConfiguration?"block":"none"},O.a.createElement(de.a,{variant:"outlined"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Sample Helmchart Hook")),O.a.createElement(Tt,null,O.a.createElement(N.a,null,O.a.createElement(le.CopyToClipboard,{text:t,onCopy:function(){return e.props.clipboardCopy("sampleMigrationHook")}},O.a.createElement(U.a,{variant:"outlined",size:"small",color:"secondary"},O.a.createElement(me.a,null)))),O.a.createElement(N.a,{mt:2},O.a.createElement("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all"}},t)))))),O.a.createElement(N.a,{mt:8,display:"script"===this.props.workflow.migrationConfiguration?"block":"none"},O.a.createElement(de.a,{variant:"outlined"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Sample Script")),O.a.createElement(Tt,null,O.a.createElement(N.a,null,O.a.createElement(le.CopyToClipboard,{text:a,onCopy:function(){return e.props.clipboardCopy("sampleMigrationScript")}},O.a.createElement(U.a,{variant:"outlined",size:"small",color:"secondary"},O.a.createElement(me.a,null)))),O.a.createElement(N.a,{mt:2},O.a.createElement("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all"}},a)))))))}}]),a}(O.a.Component),Rt=Object(T.a)({selectAdornment:{marginRight:"-30px"}})(xt);function At(){At=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},l=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,a){return e[t]=a}}function c(e,t,a,r){var l=t&&t.prototype instanceof p?t:p,o=Object.create(l.prototype),i=new S(r||[]);return n(o,"_invoke",{value:w(e,a,i)}),o}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(T){return{type:"throw",arg:T}}}e.wrap=c;var u={};function p(){}function m(){}function h(){}var f={};s(f,l,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(O([])));b&&b!==t&&a.call(b,l)&&(f=b);var E=h.prototype=p.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var r;n(this,"_invoke",{value:function(n,l){function o(){return new t((function(r,o){!function n(r,l,o,i){var s=d(e[r],e,l);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,l,r,o)}))}return r=r?r.then(o,o):o()}})}function w(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return D()}for(a.method=r,a.arg=l;;){var o=a.delegate;if(o){var i=v(o,a);if(i){if(i===u)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=d(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function v(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),u;var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var l=r.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function O(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return m.prototype=h,n(E,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:m,configurable:!0}),m.displayName=s(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,i,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(k.prototype),s(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var o=new k(c(t,a,n,r),l);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(E),s(E,i,"Generator"),s(E,l,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],o=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var i=a.call(l,"catchLoc"),s=a.call(l,"finallyLoc");if(i&&s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(i){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var o=l?l.completion:{};return o.type=e,o.arg=t,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),F(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;F(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}var jt=Object(D.c)(oe.a)(ae.b),It=Object(D.c)(I.a)(ae.b),Lt=Object(D.c)(U.a)(ae.b),Wt=Object(D.c)(j.a)(ae.b),Ut=Object(D.c)(Wt)(b||(b=Object(F.a)(["\n  min-width: 200px;\n  max-width: 200px;\n"]))),Pt=Object(D.c)(W.a)(ae.b),Nt=Object(T.a)({root:{display:"block"}})(z.a),_t=(Object(D.c)(he.a)(ae.b),function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(e){var n;Object(y.a)(this,a),(n=t.call(this,e)).handleSnackbarClose=function(){n.setState({showSnackbar:!1,showSnackbarEdit:!1,showClipboardSnackbar:!1})},n.handleEditWorkflowSnackbarClose=function(){n.setState({showSnackbarEdit:!1})},n.saveChanges=n.saveChanges.bind(Object(w.a)(n)),n.hideHelmReminder=n.hideHelmReminder.bind(Object(w.a)(n)),n.toggleHelmReminder=n.toggleHelmReminder.bind(Object(w.a)(n)),n.addMaskingRule=n.addMaskingRule.bind(Object(w.a)(n)),n.deleteMaskingRule=n.deleteMaskingRule.bind(Object(w.a)(n)),n.handleRuleChange=n.handleRuleChange.bind(Object(w.a)(n)),n.showLastReportedError=n.showLastReportedError.bind(Object(w.a)(n)),n.hideLastReportedError=n.hideLastReportedError.bind(Object(w.a)(n)),n.addSecret=n.addSecret.bind(Object(w.a)(n)),n.handleDeleteSecret=n.handleDeleteSecret.bind(Object(w.a)(n)),n.hideErrorDialog=n.hideErrorDialog.bind(Object(w.a)(n)),n.handleExportSchedule=n.handleExportSchedule.bind(Object(w.a)(n)),n.handleSchedule=n.handleSchedule.bind(Object(w.a)(n)),n.handleDeltaUpdate=n.handleDeltaUpdate.bind(Object(w.a)(n)),n.handleCustomSecret=n.handleCustomSecret.bind(Object(w.a)(n)),n.validateRedactionRules=n.validateRedactionRules.bind(Object(w.a)(n)),n.addExportTableColumn=n.addExportTableColumn.bind(Object(w.a)(n)),n.deleteExportTableColumn=n.deleteExportTableColumn.bind(Object(w.a)(n)),n.handleTableOutputChanges=n.handleTableOutputChanges.bind(Object(w.a)(n)),n.validateOutputSettings=n.validateOutputSettings.bind(Object(w.a)(n)),n.validateForgetUserFields=n.validateForgetUserFields.bind(Object(w.a)(n)),n.deleteWorkflowConfirmation=n.deleteWorkflowConfirmation.bind(Object(w.a)(n)),n.cancelWorkflowConfirmation=n.cancelWorkflowConfirmation.bind(Object(w.a)(n)),n.clipboardCopy=n.clipboardCopy.bind(Object(w.a)(n)),n.handleSnackbarClose=n.handleSnackbarClose.bind(Object(w.a)(n)),n.handleSoftDeletionFields=n.handleSoftDeletionFields.bind(Object(w.a)(n)),n.handleSoftDeleteEmailAddressField=n.handleSoftDeleteEmailAddressField.bind(Object(w.a)(n)),n.markAddToS3UploadList=n.markAddToS3UploadList.bind(Object(w.a)(n)),n.addAllToS3UploadList=n.addAllToS3UploadList.bind(Object(w.a)(n)),n.getExportFileNames=n.getExportFileNames.bind(Object(w.a)(n)),n.saveInputChanges=n.saveInputChanges.bind(Object(w.a)(n)),n.triggerEditInputDialog=n.triggerEditInputDialog.bind(Object(w.a)(n)),n.handleInputChanges=n.handleInputChanges.bind(Object(w.a)(n)),n.selectInputSource=n.selectInputSource.bind(Object(w.a)(n)),n.handleAddTable=n.handleAddTable.bind(Object(w.a)(n)),n.triggerAddTable=n.triggerAddTable.bind(Object(w.a)(n)),n.hideInputDialog=n.hideInputDialog.bind(Object(w.a)(n)),n.deleteDatabaseTable=n.deleteDatabaseTable.bind(Object(w.a)(n)),n.deleteWorkflow=n.deleteWorkflow.bind(Object(w.a)(n)),n.transformExpansion=n.transformExpansion.bind(Object(w.a)(n)),n.triggerOutputOptions=n.triggerOutputOptions.bind(Object(w.a)(n)),n.hideOutputOptions=n.hideOutputOptions.bind(Object(w.a)(n)),n.addDataFeed=n.addDataFeed.bind(Object(w.a)(n)),n.hideDataFeed=n.hideDataFeed.bind(Object(w.a)(n)),n.handleDataFeed=n.handleDataFeed.bind(Object(w.a)(n)),n.addParameterValue=n.addParameterValue.bind(Object(w.a)(n)),n.updateParameterValue=n.updateParameterValue.bind(Object(w.a)(n)),n.deleteParameterValue=n.deleteParameterValue.bind(Object(w.a)(n)),n.handleDataFeedBack=n.handleDataFeedBack.bind(Object(w.a)(n)),n.handleDataFeedCancel=n.handleDataFeedCancel.bind(Object(w.a)(n)),n.getS3UploadFileNames=n.getS3UploadFileNames.bind(Object(w.a)(n)),n.handleDataFeedOptions=n.handleDataFeedOptions.bind(Object(w.a)(n)),n.saveDataFeedChanges=n.saveDataFeedChanges.bind(Object(w.a)(n)),n.triggerEditDataFeed=n.triggerEditDataFeed.bind(Object(w.a)(n)),n.deleteDataFeed=n.deleteDataFeed.bind(Object(w.a)(n)),n.resetDataFeedErrors=n.resetDataFeedErrors.bind(Object(w.a)(n));var r=[];n.props.workflow.redactrules&&n.props.workflow.redactrules.length&&n.props.workflow.redactrules.forEach((function(e){r.push({key:e.uuid,table:e.table,databaseTable:e.databaseTable,column:e.column,rule:e.rule,presetUuid:e.presetUuid})}));var l=n.props.agents.find((function(e){return e.uuid===n.props.workflow.agentId})),o=l?l.namespace:"",i=n.props.workflow.userSearchEmailField?n.props.workflow.userSearchEmailDBTable:"",s=n.props.workflow.userSearchEmailField?n.props.workflow.userSearchEmailColumn:"",c={agentId:n.props.workflow.agentId,newRuleKey:0,missingInput:!n.props.workflow.allDatabaseTables||!n.props.workflow.allDatabaseTables.length,transformExpanded:!(!n.props.workflow.allDatabaseTables||!n.props.workflow.allDatabaseTables.length),outputExpanded:!1,allDatabaseTables:n.props.workflow.allDatabaseTables,saveButtonDisabled:!1,showHelmReminder:!1,helmReminderCheckbox:!1,showLastReportedError:!1,maskingRules:[],maskingRuleValues:r,completeRedactRules:!0,dupeRedactRuleFound:!1,dupeTableExportFound:!1,missingSchemaSelection:!1,missingSecretField:!1,invalidOutputSettingField:!1,missingPostExportHookField:!1,validSchedule:!0,validName:!0,validDiskSize:!0,numMaskingRules:r.length,exportSchedule:!(!n.props.workflow.schedule||"None"===n.props.workflow.schedule),scheduleSelection:n.props.workflow.schedule&&!n.props.workflow.schedule.match(/^@/)&&"None"!==n.props.workflow.schedule?"custom":n.props.workflow.schedule||"",customSchedule:!(!n.props.workflow.schedule||n.props.workflow.schedule.match(/^@/)||"None"===n.props.workflow.schedule),schedule:n.props.workflow.schedule||"None",tableOutputOptions:[],exportTableDataConfig:n.props.workflow.exportTableDataConfig||[],generateSoftDeleteQueries:n.props.workflow.generateSoftDeleteQueries||!1,userSearchEmailField:n.props.workflow.userSearchEmailField||"",userSearchEmailDBTable:i||"",userSearchEmailColumn:s||"",addTable:"",displayExportTableSchema:"none",displayExportTableData:"none",showClipboardSnackbar:!1,agentNamespace:o,S3UploadFileChecked:[],S3UploadBucket:"",errors:{schedule:!1,name:!1,diskSize:!1,duplicateDataFeed:!1},input:{uuid:"",inputName:"",enabled:!0,tables:[]},inputs:n.props.workflow.inputs,numInputs:n.props.workflow.inputs.length,dataFeed:{uuid:"",dataFeed:"",dataFeedConfig:{uploadFileChecked:[],addAllS3Uploads:!1,s3Bucket:"",postUpdateKeyValues:[]},feedSecrets:[]},dataFeeds:n.props.workflow.datafeeds,editInputDialog:!1,showDialog:!1,showSnackbarEdit:!1,newInputKey:0,newDataFeedKey:0,addAllS3Uploads:!1,exportTableSchemaAll:!1,exportTableDataAll:!1,showSnackbar:!1,deleteWorkflowConfirmation:!1,ackHelmReminder:!1,orphanedWorkflow:!1,currentDatabaseTable:"",showOutputOptions:!1,editDataFeed:!1,columnExclusionProhibited:!1,invalidForgetUserFields:!1,invalidMigrationFields:!1,digitalTwinAdded:!1,workflowType:"",deltaUpdateField:n.props.workflow.deltaUpdateField||"",snackbarText:""};return n.props.redactrulesets.forEach((function(e){c.maskingRules.push({table:"",databaseTable:"",column:"",rule:"",key:e.redactKey,val:e.redactName})})),n.props.presets&&n.props.presets.length&&n.props.presets.forEach((function(e){e.isDefault||c.maskingRules.push({table:"",databaseTable:"",column:"",rule:"",key:"preset-".concat(e.uuid),val:"Preset: ".concat(e.presetName),presetUuid:e.uuid})})),n.props.workflow.inputs.forEach((function(e){e.tables&&e.tables.length&&e.tables.forEach((function(e){c.tableOutputOptions[e]={errors:{addColumn:!1},addColumn:"",exportColumns:"all",exportRows:"all",fields:[],numDays:30,sampleFields:"createdAndUpdated",createdAtField:"created_at",updatedAtField:"updated_at"}}))})),n.props.workflow.exportTableDataConfig.forEach((function(e){Object.entries(e).forEach((function(e){var t=Object(re.a)(e,2),a=t[0],n=t[1];n.updatedAtField||(n.updatedAtField=c.deltaUpdateField),c.tableOutputOptions[a]={errors:{addColumn:!1},addColumn:"",exportColumns:n.fields&&n.fields.length?"specific":"all",exportRows:n.numDays?"specific":"all",fields:n.fields||[],numDays:n.numDays||30,sampleFields:n.sampleFields||"createdAndUpdated",createdAtField:n.createdAtField||"created_at",updatedAtField:n.updatedAtField||"updated_at"}}))})),"ERL"!==n.props.workflow.workflowType||n.props.workflow.agentId||(c.orphanedWorkflow=!0),n.state=c,n}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.setState({ackHelmReminder:this.context.ackHelmReminder})}},{key:"clipboardCopy",value:function(e){var t="";switch(e){case"dbuuid":t="This workflow UUID has been copied to your clipboard";break;case"sampleMigrationHook":t="This sample Helmchart hook has been copied to your clipboard";break;case"sampleMigrationScript":t="This sample script has been copied to your clipboard"}this.setState({showClipboardSnackbar:!0,snackbarText:t})}},{key:"handleRuleChange",value:function(e,t){var a=this,n=this.state.maskingRuleValues,r=this.state.maskingRuleValues.filter((function(t){return t.key===e}));n.map((function(n){if(n.key===e&&"databaseTable"===t.target.name)r[0].databaseTable=t.target.value;else if(n.key===e&&"column"===t.target.name)r[0].column=t.target.value;else if(n.key===e&&"rule"===t.target.name)if(r[0].rule=t.target.value,t.target.value.match(/^preset-/)){var l=a.state.maskingRules.filter((function(e){return e.key===t.target.value&&e}));r[0].presetUuid=l[0].presetUuid}else r[0].presetUuid="";return r})),this.setState({maskingRuleValues:n})}},{key:"saveChanges",value:function(){var e=Object(E.a)(At().mark((function e(t){var a,n,r,l,o,i,s,c,d=this;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({saveButtonDisabled:!0,errors:{}}),a={},this.state.allDatabaseTables.forEach((function(e){var t=e.split(": "),n=t[t.length-1];a[n]={table:n,fields:"all"===d.state.tableOutputOptions[n].exportColumns?[]:d.state.tableOutputOptions[n].fields,numDays:"all"===d.state.tableOutputOptions[n].exportRows?null:parseInt(d.state.tableOutputOptions[n].numDays),sampleFields:"all"===d.state.tableOutputOptions[n].exportRows?null:d.state.tableOutputOptions[n].sampleFields,createdAtField:"all"===d.state.tableOutputOptions[n].exportRows?null:d.state.tableOutputOptions[n].createdAtField,updatedAtField:"all"===d.state.tableOutputOptions[n].exportRows?null:d.state.tableOutputOptions[n].updatedAtField}})),n={name:this.props.workflow.name,agentId:this.props.workflow.agentId,workflowType:this.props.workflow.workflowType,inputs:this.state.inputs,dataFeeds:this.state.dataFeeds,maskingRules:this.state.maskingRuleValues,schedule:this.state.schedule,exportTableDataConfig:[a],generateSoftDeleteQueries:!!this.state.generateSoftDeleteQueries,userSearchEmailField:this.state.userSearchEmailField,userSearchEmailDBTable:this.state.userSearchEmailDBTable,userSearchEmailColumn:this.state.userSearchEmailColumn,deltaUpdateField:this.state.deltaUpdateField,migrationNamespace:this.props.workflow.migrationNamespace,migrationDatabase:this.props.workflow.migrationDatabase,migrationDatabaseClone:this.props.workflow.migrationDatabaseClone,migrationConfiguration:this.props.workflow.migrationConfiguration,migrationHelmHookWeight:this.props.workflow.migrationHelmHookWeight},!(this.validateRedactionRules()&&this.validateOutputSettings()&&this.validateForgetUserFields()&&this.validateMigrationMockFields())){e.next=35;break}return e.prev=5,e.next=8,fetch("".concat(this.context.apiUrl,"/workflow/").concat(t),{method:"put",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});case 8:return r=e.sent,this.setState({saveButtonDisabled:!1}),e.next=12,r.json();case 12:if(!(l=e.sent).errors){e.next=23;break}return o=!1,i=!1,s=!1,"Invalid schedule","Invalid agent ID","Data feed does not permit column exclusion",Array.isArray(l.errors)?(o=l.errors.find((function(e){return"Invalid schedule"===e.msg})),i=l.errors.find((function(e){return"Invalid agent ID"===e.msg&&"agentId"===e.param})),s=l.errors.find((function(e){return"Data feed does not permit column exclusion"===e.msg}))):(o="Invalid schedule"===l.errors,i="Invalid agent ID"===l.errors,s="Data feed does not permit column exclusion"===l.errors),o?this.setState({validSchedule:!1,errors:{schedule:!0}}):i?this.setState({orphanedWorkflow:!0,errors:{agentId:!0}}):s&&this.setState({columnExclusionProhibited:!0}),e.abrupt("return");case 23:if("multiTenantWebERL"!==this.props.workflow.workflowType){e.next=26;break}return window.location.href="/workflows/jobs",e.abrupt("return");case 26:c=this.state.maskingRuleValues.map((function(e,t){var a=e;return a.key=l.redactRuleUuids[t],a})),this.setState({showDialog:!!l.updateHelmConfig,showSnackbar:!l.updateHelmConfig,maskingRuleValues:c,saveButtonDisabled:!1,numInputs:this.state.inputs.length}),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(5),this.setState({saveButtonDisabled:!1});case 33:e.next=36;break;case 35:this.setState({saveButtonDisabled:!1});case 36:case"end":return e.stop()}}),e,this,[[5,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"hideHelmReminder",value:function(){var e=Object(E.a)(At().mark((function e(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.helmReminderCheckbox){e.next=6;break}return e.next=3,fetch("".concat(this.context.apiUrl,"/workflow/ackReminder"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include"});case 3:this.setState({ackHelmReminder:!0,showDialog:!1}),e.next=7;break;case 6:this.setState({showDialog:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleHelmReminder",value:function(e){this.setState({helmReminderCheckbox:e.target.checked})}},{key:"validateRedactionRules",value:function(){var e=this;if(this.state.missingInput)return!0;var t=[],a=!1,n=this.state.maskingRuleValues.filter((function(n){var r=0;return t.includes("".concat(n.databaseTable,".").concat(n.column))?a=!0:t.push("".concat(n.databaseTable,".").concat(n.column)),n.databaseTable||r++,n.column||r++,n.rule||r++,(1===r||2===r||!e.legalName(n.column))&&n})),r=!(n.length||a),l=!n.length;return this.setState({completeRedactRules:l,dupeRedactRuleFound:a}),r}},{key:"validateOutputSettings",value:function(){var e=this,t=!1;return this.state.allDatabaseTables.forEach((function(a){var n=a.split(": "),r=n[n.length-1];"all"!==e.state.tableOutputOptions[r].exportRows&&((!e.state.tableOutputOptions[r].sampleFields.toLowerCase().match(/created/)||e.state.tableOutputOptions[r].createdAtField&&e.legalName(e.state.tableOutputOptions[r].createdAtField))&&(!e.state.tableOutputOptions[r].sampleFields.toLowerCase().match(/updated/)||e.state.tableOutputOptions[r].updatedAtField&&e.legalName(e.state.tableOutputOptions[r].updatedAtField))||(t=!0))})),!t||(this.setState({invalidOutputSettingField:!0}),!1)}},{key:"validateForgetUserFields",value:function(){return!(this.state.generateSoftDeleteQueries&&!(this.state.userSearchEmailDBTable&&this.state.userSearchEmailColumn&&this.legalName(this.state.userSearchEmailColumn)))||(this.setState({invalidForgetUserFields:!0}),!1)}},{key:"validateMigrationMockFields",value:function(){return!!("mockDatabaseMigration"!==this.props.workflow.workflowType||this.props.workflow.migrationNamespace&&this.props.workflow.migrationDatabase&&this.props.workflow.migrationDatabaseClone&&this.props.workflow.migrationConfiguration)||(this.setState({invalidMigrationFields:!0}),!1)}},{key:"hideErrorDialog",value:function(){this.setState({completeRedactRules:!0,dupeRedactRuleFound:!1,dupeTableExportFound:!1,validSchedule:!0,validName:!0,validDiskSize:!0,missingSchemaSelection:!1,missingPostExportHookField:!1,missingSecretField:!1,invalidOutputSettingField:!1,orphanedWorkflow:!1,columnExclusionProhibited:!1,invalidForgetUserFields:!1,invalidMigrationFields:!1})}},{key:"deleteMaskingRule",value:function(e){var t=this.state.maskingRuleValues.filter((function(t){return t.key!==e}));this.setState({numMaskingRules:this.state.numMaskingRules-1,maskingRuleValues:t})}},{key:"addMaskingRule",value:function(){var e=this.state.maskingRuleValues,t=this.state.numMaskingRules+1,a=this.state.newRuleKey+1;e.push({key:"new".concat(a),databaseTable:"",table:"",column:"",rule:""}),this.setState({maskingRuleValues:e,numMaskingRules:t,newRuleKey:a})}},{key:"deleteWorkflowConfirmation",value:function(){this.setState({deleteWorkflowConfirmation:!0})}},{key:"cancelWorkflowConfirmation",value:function(){this.setState({deleteWorkflowConfirmation:!1})}},{key:"displayLastReportedError",value:function(){return this.props.workflow.lastStackTrace?this.props.workflow.lastStackTrace.split("\n").map((function(e,t){return O.a.createElement(O.a.Fragment,{key:"".concat(e,"-").concat(t)},e,O.a.createElement("br",null))})):""}},{key:"showLastReportedError",value:function(e){e.preventDefault(),this.setState({showLastReportedError:!0})}},{key:"hideLastReportedError",value:function(){this.setState({showLastReportedError:!1})}},{key:"handleDataTableDelete",value:function(e){var t=this.state.exportTableDataConfig.filter((function(t){return t!==e}));this.setState({exportTableDataConfig:t})}},{key:"handleCustomSecret",value:function(e,t){var a=this.state;a.dataFeed.feedSecrets[t][e.target.name]=e.target.value,this.setState({dataFeed:a.dataFeed})}},{key:"addSecret",value:function(e){var t=this.state;t.dataFeed.feedSecrets.push({secretType:e,secretName:"",secretKey:"",secretPath:""}),this.setState({dataFeed:t.dataFeed})}},{key:"handleDeleteSecret",value:function(e){var t=this.state;t.dataFeed.feedSecrets=t.dataFeed.feedSecrets.filter((function(t,a){return a!==e})),this.setState({dataFeed:t.dataFeed})}},{key:"handleExportSchedule",value:function(e){"false"===e.target.value?this.setState({exportSchedule:!1,schedule:"None"}):this.setState({exportSchedule:!0,schedule:"* 0 * * *"})}},{key:"handleSchedule",value:function(e){var t={};"scheduleSelection"===e.target.name&&(t.scheduleSelection=e.target.value,t.customSchedule="custom"===e.target.value),t.schedule="custom"===e.target.value?"* 0 * * *":e.target.value,this.setState(t)}},{key:"handleDeltaUpdate",value:function(e){this.setState({deltaUpdateField:e.target.value})}},{key:"dbUUIDSnackbar",value:function(){return O.a.createElement(ie.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showClipboardSnackbar,autoHideDuration:8e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:O.a.createElement("span",{id:"message-id"},this.state.snackbarText),action:[O.a.createElement(se.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},O.a.createElement(ue.a,null))]})}},{key:"handleSoftDeletionFields",value:function(e){var t={};"generateSoftDeleteQueries"===e.target.name?t[e.target.name]=e.target.checked:t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleSoftDeleteEmailAddressField",value:function(e){var t=this.state,a="";if("userSearchEmailDBTable"===e.target.name){var n=e.target.value.split(": ");a=n[n.length-1],t.userSearchEmailField=a+"."+t.userSearchEmailColumn,t.userSearchEmailDBTable=e.target.value}else if("userSearchEmailColumn"===e.target.name){var r=t.userSearchEmailDBTable.split(": ");a=r[r.length-1],t.userSearchEmailField=a+"."+e.target.value,t.userSearchEmailColumn=e.target.value}this.setState(t)}},{key:"markAddToS3UploadList",value:function(e,t){var a=this.state;e.target.checked?(a.dataFeed.dataFeedConfig.uploadFileChecked.push(t),a.dataFeed.dataFeedConfig.uploadFileChecked.length===this.getS3UploadFileNames().length&&(a.dataFeed.dataFeedConfig.addAllS3Uploads=!0)):(a.dataFeed.dataFeedConfig.uploadFileChecked=a.dataFeed.dataFeedConfig.uploadFileChecked.filter((function(e){return e!==t})),a.dataFeed.dataFeedConfig.addAllS3Uploads=!1),this.setState(a)}},{key:"getExportFileNames",value:function(){var e=[];return this.state.exportTableDataConfig.forEach((function(t){e.push("table-".concat(t,".csv"))})),e}},{key:"getS3UploadFileNames",value:function(){var e=[];return this.state.allDatabaseTables?(this.state.allDatabaseTables.forEach((function(t){var a=t.split(": "),n=a[a.length-1];e.push("table-".concat(n,".csv"))})),e):[]}},{key:"addAllToS3UploadList",value:function(e){var t=this.state;e.target.checked?(t.dataFeed.dataFeedConfig.uploadFileChecked=[],this.getS3UploadFileNames().forEach((function(e){t.dataFeed.dataFeedConfig.uploadFileChecked.push(e)})),t.dataFeed.dataFeedConfig.addAllS3Uploads=!0):(t.dataFeed.dataFeedConfig.uploadFileChecked=[],t.dataFeed.dataFeedConfig.addAllS3Uploads=!1),this.setState(t)}},{key:"addExportTableColumn",value:function(e,t){var a=this.state;a.tableOutputOptions[t].addColumn&&(this.legalName(a.tableOutputOptions[t].addColumn)?(a.tableOutputOptions[t].fields.push(a.tableOutputOptions[t].addColumn),a.tableOutputOptions[t].addColumn="",a.tableOutputOptions[t].errors.addColumn=!1):a.tableOutputOptions[t].errors.addColumn=!0,this.setState(a))}},{key:"deleteExportTableColumn",value:function(e,t,a){var n=this.state;n.tableOutputOptions[t].fields=n.tableOutputOptions[t].fields.filter((function(e){return e!==a})),this.setState(n)}},{key:"handleTableOutputChanges",value:function(e,t){var a=this.state;switch(a.tableOutputOptions[t][e.target.name]=e.target.value,e.target.name){case"createdAtField":case"fields":case"numDays":case"sampleFields":case"updatedAtField":a.exportTableDataConfig=a.exportTableDataConfig.map((function(t){return t[Object.keys(t)[0]][e.target.name]=e.target.value,t}))}this.setState(a)}},{key:"triggerEditInputDialog",value:function(e,t){var a={inputName:e.inputName,uuid:e.uuid,enabled:e.enabled,tables:e.tables};this.setState({input:a,workflowType:t,editInputDialog:!0})}},{key:"handleInputChanges",value:function(e,t){var a=this.state;a.inputs=a.inputs.map((function(a){return a.uuid===t.uuid&&(a[e.target.name]="enabled"===e.target.name?e.target.checked:e.target.value),a})),this.setState(a)}},{key:"selectInputSource",value:function(e){var t=this.state,a=this.props.agentInputs.find((function(t){return t.uuid===e.target.value}));a&&(t.inputs=[{uuid:a.uuid,enabled:!0,inputName:a.inputName}],this.setState(t))}},{key:"handleAddTable",value:function(e){this.setState({addTable:e.target.value})}},{key:"triggerAddTable",value:function(){var e=this.state;if(e.errors.addTable=!1,e.addTable){if(!this.legalName(this.state.addTable))return e.errors.addTable=!0,void this.setState({errors:e.errors});var t=this.state.input;t.tables||(t.tables=[]),t.tables.push(this.state.addTable),this.setState({errors:e.errors,input:t,addTable:""})}}},{key:"legalName",value:function(e){return!e||!!e.match(/^[a-zA-Z_][a-zA-Z0-9_]{1,30}$/)}},{key:"deleteWorkflow",value:function(e){var t=this.state;t.inputs=t.inputs.filter((function(t){return t.uuid!==e.uuid})),t.allDatabaseTables=[],t.inputs.forEach((function(e){e.tables||(e.tables=[]),e.tables.forEach((function(e){t.allDatabaseTables.push(t.input.inputName+": "+e)}))})),t.missingInput=!t.inputs.length,this.setState({transformExpanded:!t.missingInput,outputExpanded:!t.missingInput,missingInput:t.missingInput,allDatabaseTables:t.allDatabaseTables,inputs:t.inputs})}},{key:"hideInputDialog",value:function(){this.setState({editInputDialog:!1})}},{key:"deleteDatabaseTable",value:function(e){var t=this.state.input;t.tables||(t.tables=[]),t.tables=t.tables.filter((function(t){return e!==t})),this.setState({input:t})}},{key:"saveInputChanges",value:function(){var e=this.state,t=this.state.inputs;e.input.tables||(e.input.tables=[]),e.allDatabaseTables=[],t=t.map((function(t){return t.tables||(t.tables=[]),t.tables.forEach((function(t){e.allDatabaseTables.push(e.input.inputName+": "+t),e.tableOutputOptions[t]||(e.tableOutputOptions[t]={errors:{addColumn:!1},addColumn:"",exportColumns:"all",exportRows:"all",fields:[],numDays:30,sampleFields:"createdAndUpdated",createdAtField:"created_at",updatedAtField:"updated_at"})})),t})),e.maskingRuleValues=e.maskingRuleValues.filter((function(t){return!!e.allDatabaseTables.includes(t.databaseTable)})),e.numMaskingRules=e.maskingRuleValues.length,e.errors.JSX=null,this.state.input.uuid.match(/^new/)?this.setState({missingInput:!1,tableOutputOptions:e.tableOutputOptions,allDatabaseTables:e.allDatabaseTables,errors:e.errors,inputs:t,editInputDialog:!1,showSnackbarEdit:!0,newInputKey:e.newInputKey}):this.setState({missingInput:!1,maskingRuleValues:e.maskingRuleValues,numMaskingRules:e.numMaskingRules,allDatabaseTables:e.allDatabaseTables,errors:e.errors,inputs:t,editInputDialog:!1,showSnackbarEdit:!0})}},{key:"legalBucketName",value:function(e){return!!e.match(/^[a-zA-Z0-9]{1}[a-zA-Z0-9.-]{1,61}[a-zA-Z0-9]{1}$/)&&(!e.match(/^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$/)&&(!e.match(/^xn--/)&&!e.match(/-s3alias$/)))}},{key:"saveDataFeedChanges",value:function(){var e=this.state,t=!1,a=this.state.dataFeeds;if(e.dataFeed.dataFeed){switch(e.dataFeed.dataFeed){case"s3upload":e.dataFeed.dataFeedConfig.S3UploadBucket&&this.legalBucketName(e.dataFeed.dataFeedConfig.S3UploadBucket)?e.errors.invalidBucketName=!1:(e.errors.invalidBucketName=!0,t=!0);break;case"digitalTwin":if(e.dataFeed.dataFeedConfig.databaseEngine||(e.errors.databaseEngine=!0,t=!0),e.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements&&e.dataFeed.dataFeedConfig.postUpdateKeyValues.length)e.dataFeed.dataFeedConfig.postUpdateKeyValues.find((function(e){return!(e.key&&String(e.value)&&!String(e.key).match(/[%\(\)]+/)&&!String(e.value).match(/[%\(\)]+/))}))?(e.errors.invalidPostUpdateKeyValues=!0,t=!0):e.errors.invalidPostUpdateKeyValues=!1;break;case"custom":e.dataFeed.dataFeedConfig.image||(e.errors.image=!0,t=!0),e.dataFeed.dataFeedConfig.tag||(e.errors.tag=!0,t=!0),e.dataFeed.dataFeedConfig.shell||(e.errors.shell=!0,t=!0),this.state.dataFeed.feedSecrets&&this.state.dataFeed.feedSecrets.length&&this.state.dataFeed.feedSecrets.forEach((function(a){("volume"!==a.secretType||a.secretName&&a.secretKey&&a.secretPath)&&("env"!==a.secretType||a.secretName&&a.secretKey&&a.envName)||(e.errors.invalidSecret=!0,t=!0)}))}t?this.setState({errors:e.errors}):("new"===e.dataFeed.uuid?(e.newDataFeedKey++,e.dataFeed.uuid="new"+e.newDataFeedKey,a.push(e.dataFeed)):a=a.map((function(t){return t.uuid===e.dataFeed.uuid&&(t.dataFeed=e.dataFeed.dataFeed,t.dataFeedConfig=e.dataFeed.dataFeedConfig,t.feedSecrets=e.dataFeed.feedSecrets),t})),this.setState({dataFeeds:a,editDataFeed:!1,showSnackbarEdit:!0}))}else this.setState({editDataFeed:!1})}},{key:"transformExpansion",value:function(e,t){this.setState({transformExpanded:!!t})}},{key:"outputExpansion",value:function(e,t){this.setState({outputExpanded:!!t})}},{key:"triggerOutputOptions",value:function(e,t){this.setState({currentDatabaseTable:t,showOutputOptions:!0})}},{key:"hideOutputOptions",value:function(){this.setState({showOutputOptions:!1})}},{key:"resetDataFeedErrors",value:function(){var e=this.state;e.errors.duplicateDataFeed=!1,e.errors.invalidBucketName=!1,e.errors.invalidPostUpdateKeyValues=!1,e.errors.invalidSecret=!1,this.setState({errors:e.errors})}},{key:"addDataFeed",value:function(){this.resetDataFeedErrors();var e=this.state;e.dataFeed.uuid="new",e.dataFeed.dataFeed="",e.dataFeed.feedSecrets=[],this.setState({editDataFeed:!0,dataFeed:e.dataFeed})}},{key:"triggerEditDataFeed",value:function(e){this.resetDataFeedErrors();var t=this.state,a=this.state.dataFeeds.filter((function(t){return t.uuid===e.uuid}));switch("s3upload"!==a[0].dataFeed&&"dataRepository"!==a[0].dataFeed||(a[0].dataFeedConfig.S3UploadBucket=a[0].dataFeedConfig.S3UploadBucket.replace(/^s3:\/\//,"")),a[0].dataFeedConfig.postUpdateKeyValues||(a[0].dataFeedConfig.postUpdateKeyValues=[]),a[0].dataFeed){case"dataRepository":a[0].dataFeedConfig.uploadFileChecked=[],this.getS3UploadFileNames().forEach((function(e){a[0].dataFeedConfig.uploadFileChecked.push(e)}))}var n={uuid:a[0].uuid,dataFeed:a[0].dataFeed,dataFeedConfig:a[0].dataFeedConfig,feedSecrets:a[0].feedSecrets};this.setState({editDataFeed:!0,dataFeed:n,errors:t.errors})}},{key:"hideDataFeed",value:function(){this.setState({editDataFeed:!1})}},{key:"handleDataFeed",value:function(e){var t=this.state;if(t.dataFeeds&&t.dataFeeds.find((function(t){return t.dataFeed===e})))return t.errors.duplicateDataFeed=!0,t.dataFeed.dataFeed="",void this.setState({errors:t.errors,dataFeed:t.dataFeed});switch(t.dataFeed.dataFeed=e,t.errors.duplicateDataFeed=!1,e){case"dataRepository":t.dataFeed.dataFeedConfig.uploadFileChecked=[],this.getS3UploadFileNames().forEach((function(e){t.dataFeed.dataFeedConfig.uploadFileChecked.push(e)}));break;case"digitalTwin":t.dataFeed.dataFeedConfig={databaseEngine:"",enableSSL:!1,enableDeltaUpdates:!1,enablePostUpdatePreparedStatements:!1,postUpdateKeyValues:[]};break;case"s3upload":t.dataFeed.dataFeedConfig={uploadFileChecked:[],addAllS3Uploads:!1};break;case"custom":t.dataFeed.dataFeedConfig={image:"",tag:"",shell:"",command:""}}this.setState({dataFeed:t.dataFeed,errors:t.errors})}},{key:"handleDataFeedBack",value:function(){var e=this.state;e.dataFeed.dataFeed="",this.setState({dataFeed:e.dataFeed})}},{key:"handleDataFeedCancel",value:function(){this.setState({editDataFeed:!1})}},{key:"addParameterValue",value:function(){var e=this.state;e.dataFeed.dataFeedConfig.postUpdateKeyValues.push({key:"",value:""}),this.setState(e)}},{key:"updateParameterValue",value:function(e,t){var a=this.state;a.dataFeed.dataFeedConfig.postUpdateKeyValues=a.dataFeed.dataFeedConfig.postUpdateKeyValues.map((function(a,n){return n===e&&"parameterKey"===t.target.name?a.key=t.target.value:n===e&&"parameterValue"===t.target.name&&(a.value=!t.target.value||isNaN(t.target.value)?t.target.value:parseFloat(t.target.value)),a})),this.setState(a)}},{key:"deleteParameterValue",value:function(e){var t=this.state;t.dataFeed.dataFeedConfig.postUpdateKeyValues=t.dataFeed.dataFeedConfig.postUpdateKeyValues.filter((function(t,a){return a!==e})),this.setState(t)}},{key:"deleteDataFeed",value:function(e){var t=this.state;t.dataFeeds=t.dataFeeds.filter((function(t){return t.uuid!==e.uuid})),this.setState({dataFeeds:t.dataFeeds,showSnackbarEdit:!0})}},{key:"handleDataFeedOptions",value:function(e){var t=this.state;t.dataFeed.dataFeedConfig[e.target.name]=e.target.name.match(/^enable/)?e.target.checked:e.target.value,this.setState(t)}},{key:"displayWorkflowType",value:function(e){switch(e){case"ERL":return"ERL (Extract, Redact, Load)";case"multiTenantWebERL":return"Web-based ERL Testing (Multi-tenant)";case"mockDatabaseMigration":return"Database Clone for Migration Dry-run"}}},{key:"render",value:function(){var e=this;return O.a.createElement(jt,{mb:6},O.a.createElement(ce.a,null,this.dbUUIDSnackbar(),O.a.createElement(P.a,{variant:"h4"},this.props.workflow.name," ",O.a.createElement("code",null,"(",this.props.workflow.uuid,")"),O.a.createElement(N.a,{display:"inline",ml:2},O.a.createElement(le.CopyToClipboard,{text:this.props.workflow.uuid,onCopy:function(){return e.clipboardCopy("dbuuid")}},O.a.createElement(Lt,{variant:"outlined",size:"small",color:"secondary"},O.a.createElement(me.a,null))))),O.a.createElement(N.a,null,O.a.createElement(It,{container:!0,justify:"space-between",alignItems:"center"},O.a.createElement(It,{item:!0,xs:4},O.a.createElement(N.a,{display:this.props.workflow.workflowType.match(/^(ERL|mockDatabaseMigration)/)?"block":"none"},O.a.createElement(Ut,{margin:"dense",fullWidth:!0},O.a.createElement(q.a,null,"Redactics Agent"),O.a.createElement(Pt,{value:this.props.workflow.agentId,name:"agentId",onChange:function(t){return e.props.handleWFChanges(t,e.props.workflow.uuid)}},this.props.agents.map((function(e){return O.a.createElement(Y.a,{key:e.uuid,value:e.uuid},e.name)}))))),O.a.createElement(N.a,{mt:4},"Workflow Type: ",O.a.createElement("b",null,this.displayWorkflowType(this.props.workflow.workflowType)))))),O.a.createElement(_.a,{open:this.state.showLastReportedError,onClose:this.hideLastReportedError,maxWidth:"lg","aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Last Reported Error for: ",this.props.workflow.name),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},this.displayLastReportedError()),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideLastReportedError},"Close")))),O.a.createElement(N.a,{mt:12},O.a.createElement(de.a,{variant:"outlined"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Input Settings")),O.a.createElement(Nt,null,O.a.createElement(Ke,{errors:this.state.errors,workflow:this.props.workflow,agentInputs:this.props.agentInputs,agents:this.props.agents,input:this.state.input,inputs:this.state.inputs,saveInputChanges:this.saveInputChanges,selectInputSource:this.selectInputSource,editInputDialog:this.state.editInputDialog,triggerEditInputDialog:this.triggerEditInputDialog,handleInputChanges:this.handleInputChanges,handleAddTable:this.handleAddTable,addTable:this.state.addTable,triggerAddTable:this.triggerAddTable,hideInputDialog:this.hideInputDialog,deleteDatabaseTable:this.deleteDatabaseTable,handleSnackbarClose:this.handleEditWorkflowSnackbarClose}))))),O.a.createElement(N.a,{mt:4,display:this.props.workflow.workflowType.match(/^(ERL|multiTenantWebERL)/)?"block":"none"},O.a.createElement(de.a,{variant:"outlined"},O.a.createElement(K.a,{disabled:this.state.missingInput,expanded:this.state.transformExpanded,onChange:function(t,a){return e.transformExpansion(t,a)}},O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Processing/Transformation Settings")),O.a.createElement(Nt,null,O.a.createElement(De,{workflow:this.props.workflow,allDatabaseTables:this.state.allDatabaseTables,maskingRuleValues:this.state.maskingRuleValues,handleRuleChange:this.handleRuleChange,deleteMaskingRule:this.deleteMaskingRule,numMaskingRules:this.state.numMaskingRules,maskingRules:this.state.maskingRules,addMaskingRule:this.addMaskingRule}),O.a.createElement(Xe,{handleExportSchedule:this.handleExportSchedule,exportSchedule:this.state.exportSchedule,schedule:this.state.schedule||"* 0 * * *",handleSchedule:this.handleSchedule,scheduleSelection:this.state.scheduleSelection,customSchedule:this.state.customSchedule,workflowType:this.props.workflow.workflowType,errors:this.state.errors}))))),O.a.createElement(N.a,{mt:4,display:this.props.workflow.workflowType.match(/^(ERL|multiTenantWebERL)/)?"block":"none"},O.a.createElement(de.a,{variant:"outlined"},O.a.createElement(K.a,{disabled:!this.state.allDatabaseTables||!this.state.allDatabaseTables.length,expanded:this.state.outputExpanded,onChange:function(t,a){return e.outputExpansion(t,a)}},O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Output Settings")),O.a.createElement(Nt,null,O.a.createElement(rt,{workflow:this.props.workflow,showOutputOptions:this.state.showOutputOptions,hideOutputOptions:this.hideOutputOptions,triggerOutputOptions:this.triggerOutputOptions,currentDatabaseTable:this.state.currentDatabaseTable,allDatabaseTables:this.state.allDatabaseTables,tableOutputOptions:this.state.tableOutputOptions,handleTableOutputChanges:this.handleTableOutputChanges,addExportTableColumn:this.addExportTableColumn,deleteExportTableColumn:this.deleteExportTableColumn}),O.a.createElement(Ct,{dataFeeds:this.state.dataFeeds,dataFeed:this.state.dataFeed,addParameterValue:this.addParameterValue,updateParameterValue:this.updateParameterValue,deleteParameterValue:this.deleteParameterValue,agents:this.props.agents,workflow:this.props.workflow,hideDataFeed:this.hideDataFeed,addDataFeed:this.addDataFeed,editDataFeed:this.state.editDataFeed,handleDataFeed:this.handleDataFeed,handleDataFeedBack:this.handleDataFeedBack,handleDataFeedCancel:this.handleDataFeedCancel,getS3UploadFileNames:this.getS3UploadFileNames,handleDataFeedOptions:this.handleDataFeedOptions,saveDataFeedChanges:this.saveDataFeedChanges,triggerEditDataFeed:this.triggerEditDataFeed,deleteDataFeed:this.deleteDataFeed,errors:this.state.errors,handleCustomSecret:this.handleCustomSecret,addSecret:this.addSecret,handleDeleteSecret:this.handleDeleteSecret,markAddToS3UploadList:this.markAddToS3UploadList,addAllToS3UploadList:this.addAllToS3UploadList,addAllS3Uploads:this.state.addAllS3Uploads,agentNamespace:this.state.agentNamespace}))))),O.a.createElement(N.a,{mt:4,display:"mockDatabaseMigration"===this.props.workflow.workflowType?"block":"none"},O.a.createElement(de.a,{variant:"outlined"},O.a.createElement(K.a,{expanded:this.state.outputExpanded,onChange:function(t,a){return e.outputExpansion(t,a)}},O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Setup Instructions")),O.a.createElement(Nt,null,O.a.createElement(Rt,{workflow:this.props.workflow,handleWFChanges:this.props.handleWFChanges,inputs:this.state.inputs,agentNamespace:this.state.agentNamespace||"default",clipboardCopy:this.clipboardCopy}))))),O.a.createElement(It,{container:!0,justify:"space-between",alignItems:"center",mt:12},O.a.createElement(It,{item:!0,xs:10},O.a.createElement(Lt,{variant:"contained",color:"primary",size:"large",disabled:this.state.saveButtonDisabled,onClick:function(){return e.saveChanges(e.props.workflow.uuid)}},O.a.createElement(te.a,null),"\xa0","multiTenantWebERL"===this.props.workflow.workflowType?"Save and Run Workflow":"Save Changes")),O.a.createElement(It,{item:!0},O.a.createElement(Lt,{variant:"contained",color:"default",size:"small",onClick:this.deleteWorkflowConfirmation},O.a.createElement(pe.a,null),"\xa0 Delete Workflow")),O.a.createElement(_.a,{open:this.state.deleteWorkflowConfirmation,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Delete Workflow"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"Are you sure you want to delete this workflow configuration?"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{onClick:this.cancelWorkflowConfirmation},"Cancel"),O.a.createElement(Lt,{color:"primary",onClick:function(){return e.props.deleteWorkflow(e.props.workflow.uuid)}},"Yes, delete")))),O.a.createElement(_.a,{open:this.state.orphanedWorkflow,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"Workflow ",O.a.createElement("b",null,this.props.workflow.name)," is not associated with a Redactics Agent. Please correct this by selecting an agent in your workflow configuration."),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.columnExclusionProhibited,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},O.a.createElement("p",null,"This workflow includes a ",O.a.createElement("b",null,"Push Data to your Internal Data Repository")," data feed configuration. This data feed creates a (PII free) clone (or digital twin) of its original database whereby this clone's schema is intended to be identical to the original. Your Table Data Options specifies that one or more tables should have certain columns excluded. By allowing this configuration, this clone will contain incomplete data."),O.a.createElement("p",null,"To correct this problem, either remove this data feed, or update your table data options so that each table exports all columns.")),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:!this.state.completeRedactRules,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"One or more of your redaction rules contains a blank value or invalid column name (field names must contain only letters, numbers and underscores and most start with a letter or underscore)"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.dupeRedactRuleFound,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"One or more of your redaction rules contains a duplicate table and column name"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.dupeTableExportFound,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"You've already selected this table/column for export"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.missingSchemaSelection,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"You must provide some table names for schema export"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.missingPostExportHookField,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"You must provide valid custom data feed container info"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.missingSecretField,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"You must provide details about your secrets/environment variables"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.invalidOutputSettingField,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},'One or more "created" or "updated" field settings are missing or contain illegal characters'),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.invalidForgetUserFields,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},'Your Forget User Request "Database and Table Name" or "Email Field" are either missing or contain an invalid field name (field names must contain only letters, numbers and underscores and most start with a letter or underscore).'),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.invalidMigrationFields,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"Your Setup Instructions fields are missing one or more values."),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:!this.state.validSchedule,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},O.a.createElement("p",null,"Your custom schedule is invalid. Please abide by the standard crontab format:"),O.a.createElement("p",null,O.a.createElement("b",null,"[minute](0-59)[hour](0-23) [day of the month](1-31) [month](1-12) [day of the week](0-6)"))),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:!this.state.validName,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"You must provide a workflow name"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:!this.state.validDiskSize,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Error"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},"You must provide a disk space allocation for your input source"),O.a.createElement(Q.a,null,O.a.createElement(Lt,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),O.a.createElement(_.a,{open:this.state.showDialog,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Your changes have been saved!"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"dialog-description"},O.a.createElement(N.a,null,"However, your workflow will not work until you update your Helm configuration file,\xa0 which can be found in the ",O.a.createElement("b",null,"Agents")," section.")),O.a.createElement(Q.a,null,O.a.createElement(Lt,{onClick:this.hideHelmReminder,color:"primary",autoFocus:!0},"Okay")))),O.a.createElement(ie.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSnackbar,autoHideDuration:8e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:O.a.createElement("span",{id:"message-id"},O.a.createElement("b",null,"Your changes have been saved!")),action:[O.a.createElement(se.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},O.a.createElement(ue.a,null))]}),O.a.createElement(ie.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSnackbarEdit,autoHideDuration:8e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:O.a.createElement("span",{id:"message-id"},'Click on "Save Changes" at the bottom of this section to save your changes...'),action:[O.a.createElement(se.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},O.a.createElement(ue.a,null))]}))))}}],[{key:"displayStatus",value:function(e){return e?O.a.createElement(N.a,{mt:8},O.a.createElement(P.a,{variant:"h6",gutterBottom:!0},"Status"),"Last task: ",O.a.createElement("b",null,e)):null}}]),a}(O.a.Component));_t.contextType=ne.a;var Bt,Vt,Ht=Object(T.a)({selectAdornment:{marginRight:"-30px"}})(_t);function Kt(){Kt=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},l=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,a){return e[t]=a}}function c(e,t,a,r){var l=t&&t.prototype instanceof p?t:p,o=Object.create(l.prototype),i=new S(r||[]);return n(o,"_invoke",{value:w(e,a,i)}),o}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(T){return{type:"throw",arg:T}}}e.wrap=c;var u={};function p(){}function m(){}function h(){}var f={};s(f,l,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(O([])));b&&b!==t&&a.call(b,l)&&(f=b);var E=h.prototype=p.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var r;n(this,"_invoke",{value:function(n,l){function o(){return new t((function(r,o){!function n(r,l,o,i){var s=d(e[r],e,l);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,l,r,o)}))}return r=r?r.then(o,o):o()}})}function w(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return D()}for(a.method=r,a.arg=l;;){var o=a.delegate;if(o){var i=v(o,a);if(i){if(i===u)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=d(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function v(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),u;var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var l=r.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function O(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return m.prototype=h,n(E,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:m,configurable:!0}),m.displayName=s(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,i,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(k.prototype),s(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var o=new k(c(t,a,n,r),l);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(E),s(E,i,"Generator"),s(E,l,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],o=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var i=a.call(l,"catchLoc"),s=a.call(l,"finallyLoc");if(i&&s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(i){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var o=l?l.completion:{};return o.type=e,o.arg=t,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),F(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;F(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}var Mt=Object(D.c)(A.a)(ae.b),zt=Object(D.c)(j.a)(ae.b),qt=Object(D.c)(zt)(Bt||(Bt=Object(F.a)(["\n  min-width: 400px;\n  max-width: 400px;\n"]))),Gt=Object(D.c)(I.a)(ae.b),$t=Object(D.c)(L.a)(ae.b),Yt=Object(D.c)($t)(Vt||(Vt=Object(F.a)(["\n  width: 400px;\n"]))),Qt=Object(D.c)(W.a)(ae.b),Jt=Object(D.c)(U.a)(ae.b),Xt=function(e){Object(v.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).state={saveButtonDisabled:!0,ruleLegendDialog:!1,newWorkflowDialog:!1,workflows:[],agentInputs:[],presets:[],redactrulesets:[],agents:[],newWorkflowName:"",newWorkflowAgent:"",newWorkflowType:"",dbLimitError:!1,deleteWorkflowConfirmation:!1},n.handleChangeAdd=n.handleChangeAdd.bind(Object(w.a)(n)),n.handleWFChanges=n.handleWFChanges.bind(Object(w.a)(n)),n.addWorkflow=n.addWorkflow.bind(Object(w.a)(n)),n.ruleLegendOpen=n.ruleLegendOpen.bind(Object(w.a)(n)),n.ruleLegendClose=n.ruleLegendClose.bind(Object(w.a)(n)),n.newWorkflowOpen=n.newWorkflowOpen.bind(Object(w.a)(n)),n.newWorkflowClose=n.newWorkflowClose.bind(Object(w.a)(n)),n.refreshWorkflows=n.refreshWorkflows.bind(Object(w.a)(n)),n.deleteWorkflow=n.deleteWorkflow.bind(Object(w.a)(n)),n.dbLimitErrorClose=n.dbLimitErrorClose.bind(Object(w.a)(n)),n}return Object(k.a)(a,[{key:"refreshWorkflows",value:function(){var e=Object(E.a)(Kt().mark((function e(){var t,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/workflow"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).workflows.map((function(e){return e.migrationNamespace=e.migrationNamespace||"default",e.migrationDatabaseClone=e.migrationDatabaseClone||"redactics_clone",e})),this.setState({workflows:a.workflows,agentInputs:a.agentInputs,presets:a.presets,redactrulesets:a.redactrulesets,agents:a.agents}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.refreshWorkflows()}},{key:"handleChangeAdd",value:function(e){var t=this.state;switch(e.target.name){case"name":t.newWorkflowName=e.target.value,t.saveButtonDisabled="ERL"===t.newWorkflowType?!(e.target.value&&t.newWorkflowAgent):!(e.target.value&&t.newWorkflowType),this.setState(t);break;case"agentId":t.newWorkflowAgent=e.target.value,t.saveButtonDisabled=!t.newWorkflowName,this.setState(t);break;case"workflowType":t.newWorkflowType=e.target.value,t.saveButtonDisabled="ERL"===e.target.value?!(t.newWorkflowName&&t.newWorkflowAgent):!(t.newWorkflowName&&t.newWorkflowType),this.setState(t)}}},{key:"addWorkflow",value:function(){var e=Object(E.a)(Kt().mark((function e(){var t,a,n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saveButtonDisabled:!0}),e.prev=1,e.next=4,fetch("".concat(this.context.apiUrl,"/workflow"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:this.state.newWorkflowName,agentId:this.state.newWorkflowAgent,workflowType:this.state.newWorkflowType})});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,n=this.state.workflows,"multiTenantWebERL"===this.state.newWorkflowType&&a.inputs[0].tables.forEach((function(e){a.allDatabaseTables.push(a.inputs[0].inputName+": "+e)})),n.push(a),this.setState({workflows:n,newWorkflowDialog:!1,newWorkflowName:"",newWorkflowAgent:""}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteWorkflow",value:function(){var e=Object(E.a)(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/workflow/").concat(t),{method:"delete",headers:{"Content-Type":"application/json"},credentials:"include"});case 3:this.refreshWorkflows(),this.setState({deleteWorkflowConfirmation:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({deleteWorkflowConfirmation:!1});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"newWorkflowOpen",value:function(){this.setState({newWorkflowDialog:!0})}},{key:"newWorkflowClose",value:function(){this.setState({newWorkflowDialog:!1})}},{key:"dbLimitErrorClose",value:function(){this.setState({dbLimitError:!1})}},{key:"ruleLegendOpen",value:function(){this.setState({ruleLegendDialog:!0})}},{key:"ruleLegendClose",value:function(){this.setState({ruleLegendDialog:!1})}},{key:"handleWFChanges",value:function(e,t){var a=this.state.workflows.map((function(a){var n=a;return n.uuid===t&&(n[e.target.name]=e.target.value),n}));this.setState({workflows:a})}},{key:"render",value:function(){var e=this;return O.a.createElement(O.a.Fragment,null,O.a.createElement(R.a,{title:"Workflow Configurations"}),O.a.createElement(Gt,{justify:"space-between",container:!0,spacing:10},O.a.createElement(Gt,{item:!0,xs:4,mb:6},O.a.createElement(P.a,{variant:"h1",gutterBottom:!0,display:"inline"},"Workflow Configurations"))),O.a.createElement(Mt,{my:6}),O.a.createElement(N.a,{mt:4},O.a.createElement(P.a,{variant:"body1",gutterBottom:!0},"Build and maintain your data management workflows here. Configuration changes will be picked up by your Agent install usually within a few minutes.")),O.a.createElement(Gt,{justify:"space-between",container:!0,spacing:10,mt:8},O.a.createElement(Gt,{item:!0}),O.a.createElement(Gt,{item:!0,mb:6},O.a.createElement("div",null,O.a.createElement(Jt,{variant:"contained",color:"secondary",size:"small",onClick:this.ruleLegendOpen},O.a.createElement(J.a,null),"\xa0 PII Ruleset Legend"),"\xa0",O.a.createElement(Jt,{variant:"contained",color:"secondary",size:"small",onClick:this.newWorkflowOpen},O.a.createElement(X.a,null),"\xa0 Define New Workflow")))),O.a.createElement(_.a,{open:this.state.ruleLegendDialog,onClose:this.ruleLegendClose,"aria-labelledby":"legend-title","aria-describedby":"legend-description"},O.a.createElement(B.a,{id:"legend-title"},"PII Ruleset Legend"),O.a.createElement(V.a,null,O.a.createElement(H.a,{id:"legend-description"},O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Redact Email")),O.a.createElement(z.a,null,O.a.createElement(P.a,null,"Transform emails to unique email address derived from the row's primary key, constructed based on provided prefix and domain - i.e.",O.a.createElement("code",null,"[prefix][primarykey]@[domain]")))),O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Destruction")),O.a.createElement(z.a,null,O.a.createElement(P.a,null,"Replace data with a null value"))),O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Replacement")),O.a.createElement(z.a,null,O.a.createElement(P.a,null,"Replace data with a provided value"))),O.a.createElement(K.a,null,O.a.createElement(M.a,{expandIcon:O.a.createElement(Z.a,null)},O.a.createElement(P.a,null,"Random String")),O.a.createElement(z.a,null,O.a.createElement(P.a,null,"Replace data with a random alphanumeric string of a provided length")))))),O.a.createElement(_.a,{open:this.state.newWorkflowDialog,onClose:this.newWorkflowClose,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"Add Workflow"),O.a.createElement(V.a,null,O.a.createElement("form",{noValidate:!0,autoComplete:"off"},O.a.createElement(N.a,null,"Create a name for this workflow, and assign a Redactics Agent to carry out the work defined by this workflow."),O.a.createElement(N.a,{mt:4},O.a.createElement(qt,{fullWidth:!0},O.a.createElement(Yt,{name:"name",label:"Workflow Name",onChange:this.handleChangeAdd,value:this.state.newWorkflowName}))),O.a.createElement(N.a,{mt:4},O.a.createElement(qt,{margin:"dense",fullWidth:!0},O.a.createElement(q.a,null,"Workflow Type"),O.a.createElement(Qt,{value:this.state.newWorkflowType,name:"workflowType",onChange:this.handleChangeAdd,endAdornment:O.a.createElement(G.a,{className:this.props.classes.selectAdornment,position:"end"},O.a.createElement($.a,{title:"The web-based ERL testing option allows you to test ERL workflows with some preset sample dataset options without having to install the Redactics Agent into your own infrastructure. This option is multi-tenant, but a single-tenant mode is available you can run with your own datasets - contact us for more info.",placement:"right-start"},O.a.createElement(ee.a,null)))},O.a.createElement(Y.a,{key:"ERL",value:"ERL"},"ERL (Extract, Redact, Load)"),O.a.createElement(Y.a,{key:"multiTenantWebERL",value:"multiTenantWebERL"},"Web-based ERL Testing"),O.a.createElement(Y.a,{key:"mockDatabaseMigration",value:"mockDatabaseMigration"},"Database Clone for Migration Dry-run")))),O.a.createElement(N.a,{mt:4,display:this.state.newWorkflowType.match(/^(ERL|mockDatabaseMigration)/)?"block":"none"},O.a.createElement(qt,{fullWidth:!0},O.a.createElement(q.a,{htmlFor:"agentId"},"Redactics Agent"),O.a.createElement(Qt,{name:"agentId",onChange:this.handleChangeAdd,value:this.state.newWorkflowAgent},this.state.agents.map((function(e){return O.a.createElement(Y.a,{key:e.uuid,value:e.uuid},e.name)}))))),O.a.createElement(N.a,{mt:8},O.a.createElement(Q.a,null,O.a.createElement(Jt,{color:"secondary",onClick:this.newWorkflowClose},"Cancel"),O.a.createElement(Jt,{color:"secondary",variant:"contained",disabled:this.state.saveButtonDisabled,onClick:this.addWorkflow},"Save\xa0",O.a.createElement(te.a,null))))))),O.a.createElement(_.a,{open:this.state.dbLimitError,onClose:this.dbLimitErrorClose,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},O.a.createElement(B.a,{id:"dialog-title"},"You've Reached Your Account Limit"),O.a.createElement(V.a,null,O.a.createElement(N.a,null,"This Redactics account is currently limited to support defining only a single database. Please contact us if you wish to upgrade this account."),O.a.createElement(Q.a,null,O.a.createElement(Jt,{color:"secondary",onClick:this.dbLimitErrorClose},"Okay")))),this.state.workflows.map((function(t){return O.a.createElement(Ht,{workflow:t,presets:e.state.presets,redactrulesets:e.state.redactrulesets,agents:e.state.agents,agentInputs:e.state.agentInputs,key:t.uuid,handleWFChanges:e.handleWFChanges,deleteWorkflow:e.deleteWorkflow})})))}}]),a}(O.a.Component);Xt.contextType=ne.a;t.default=Object(T.a)({selectAdornment:{marginRight:"-30px"}})(Xt)}}]);
//# sourceMappingURL=13.0bccce4f.chunk.js.map