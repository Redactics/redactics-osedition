{"version":3,"sources":["pages/workflows/WorkflowRedactionRules.tsx","pages/workflows/WorkflowInputs.tsx","pages/workflows/WorkflowSchedule.tsx","pages/workflows/WorkflowExport.tsx","pages/workflows/WorkflowPostExport.tsx","pages/workflows/DatabaseMigrationSetup.tsx","pages/workflows/Workflow.tsx","pages/workflows/Main.tsx"],"names":["Grid","styled","MuiGrid","spacing","TextFieldSpacing","MuiTextField","FormControlSpacing","MuiFormControl","FormControl","TextField","Select","MuiSelect","Button","MuiButton","WorkflowPostExport","props","state","ruleLabelWidth","this","numMaskingRules","Box","mt","justify","container","item","mb","variant","color","size","onClick","addMaskingRule","Add","Table","style","width","TableBody","maskingRuleValues","map","row","TableRow","key","TableCell","paddingLeft","margin","InputLabel","value","databaseTable","onChange","event","handleRuleChange","name","input","OutlinedInput","labelWidth","allDatabaseTables","dt","MenuItem","defaultValue","column","label","rule","maskingRules","val","deleteMaskingRule","Fragment","Typography","gutterBottom","xs","displayMaskingRules","React","Component","WideFormControl","NWTableCell","withStyles","root","whiteSpace","WorkflowInputs","agent","agents","filter","a","uuid","workflow","agentId","length","configPath","namespace","tableSelection","addButton","tables","idx","error","errors","addSchema","split","handleAddTable","addTable","deleteTableSelection","addTableSelection","JSX","display","workflowType","fullWidth","handleInputChanges","displayTableSelection","foundConstraints","workflowInput","agentInputs","forEach","inputs","find","i","join","TableHead","triggerEditInputDialog","Edit","inputName","enabled","selectedInput","selectInputSource","outputMockConstraints","inputEnabled","Checkbox","checked","Link","href","title","Dialog","open","editInputDialog","onClose","hideInputDialog","maxWidth","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","editInputDialogContent","DialogActions","saveInputChanges","outputDataSources","selectAdornment","marginRight","DatabaseSchedule","RadioGroup","aria-label","handleExportSchedule","String","exportSchedule","FormControlLabel","control","Radio","htmlFor","handleSchedule","scheduleSelection","customSchedule","schedule","InputProps","endAdornment","InputAdornment","position","Tooltip","placement","target","rel","WorkflowExport","displayConstraintOptions","bind","table","currentDatabaseTable","tableOutputOptions","schema","constraintSchema","handleTableOutputChanges","constraintTable","sampleFields","numDays","createdAtField","updatedAtField","constraints","exportTableDataConfig","config","triggerOutputOptions","c","tableName","genConstraintSummary","deleteConstraint","showOutputOptions","hideOutputOptions","displayConstraintsTable","MedTextField","WideTextField","bold","fontWeight","Alert","MuiAlert","ExpansionPanelDetails","MuiExpansionPanelDetails","Paper","MuiPaper","engine","displayEngine","df","dataFeed","dataFeedSummary","uploadBucket","dataFeedConfig","S3UploadBucket","match","databaseEngine","enableDeltaUpdates","enablePostUpdatePreparedStatements","preparedStatementValues","postUpdateKeyValues","kv","push","uploadFileChecked","getS3UploadFileNames","image","tag","dataFeeds","addDataFeed","dataFeedName","triggerEditDataFeed","deleteDataFeed","duplicateDataFeed","severity","invalidBucketName","invalidPostUpdateKeyValues","invalidSecret","namespaceTip","feedSecrets","editDataFeed","hideDataFeed","showErrors","List","component","ListItem","disabled","button","handleDataFeed","ListItemText","primary","primaryTypographyProps","secondary","inputSource","handleDataFeedOptions","allInputs","invalidDeltaUpdateField","deltaUpdateField","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpandMore","getAgent","updateParameterValue","deleteParameterValue","addParameterValue","addAllToS3UploadList","addAllS3Uploads","align","f","scope","markAddToS3UploadList","includes","startAdornment","agentNamespace","placeholder","shell","multiline","rowsMax","command","args","addSecret","secret","secretType","secretName","handleCustomSecret","secretKey","secretPath","handleDeleteSecret","envName","handleDataFeedBack","saveDataFeedChanges","handleDataFeedCancel","outputTable","DatabaseMigrationSetup","helmHook","migrationNamespace","migrationHelmHookWeight","script","handleWFChanges","className","classes","migrationDatabase","migrationDatabaseClone","migrationConfiguration","type","text","onCopy","clipboardCopy","wordBreak","Card","MuiCard","Workflow","handleSnackbarClose","setState","showSnackbar","showSnackbarEdit","showClipboardSnackbar","handleEditWorkflowSnackbarClose","saveChanges","hideHelmReminder","toggleHelmReminder","showLastReportedError","hideLastReportedError","hideErrorDialog","handleDeltaUpdate","validateRedactionRules","deleteWorkflowConfirmation","cancelWorkflowConfirmation","getExportFileNames","triggerAddTable","deleteDatabaseTable","deleteWorkflow","transformExpansion","resetDataFeedErrors","redactrules","presetUuid","thisAgentSearch","newRuleKey","transformExpanded","outputExpanded","saveButtonDisabled","showHelmReminder","helmReminderCheckbox","completeRedactRules","dupeRedactRuleFound","dupeTableExportFound","missingSchemaSelection","missingSecretField","invalidOutputSettingField","missingPostExportHookField","validSchedule","validName","validDiskSize","displayExportTableSchema","displayExportTableData","S3UploadFileChecked","diskSize","numInputs","s3Bucket","datafeeds","showDialog","newInputKey","newDataFeedKey","exportTableSchemaAll","exportTableDataAll","ackHelmReminder","orphanedWorkflow","columnExclusionProhibited","invalidForgetUserFields","invalidMigrationFields","digitalTwinAdded","snackbarText","Object","keys","redactrulesets","redactKey","redactName","presets","preset","isDefault","presetName","context","copied","copiedText","values","mr","workflowId","payload","validateMigrationMockFields","fetch","apiUrl","method","headers","body","JSON","stringify","response","json","data","invalidSchedule","columnExclusion","Array","isArray","e","msg","param","r","redactRuleUuids","updateHelmConfig","tablesProvided","missingInput","rules","validFields","missingFields","legalName","validRules","localStorage","getItem","t","lastStackTrace","index","preventDefault","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","message","action","IconButton","Close","fileName","filenames","tableArr","inputCopy","agentInput","field","bucket","errorsFound","legalBucketName","s","expanded","scheme","findConfig","console","log","d","replace","dataFeedCopy","enableSSL","isNaN","parseFloat","wf","CardContent","dbUUIDSnackbar","ml","alignItems","displayWorkflowType","displayLastReportedError","WorkflowRedactionRules","WorkflowSchedule","outputExpansion","autoFocus","lastTask","contextType","RedacticsContext","Divider","MuiDivider","Workflows","ruleLegendDialog","newWorkflowDialog","workflows","newWorkflowName","newWorkflowAgent","newWorkflowType","dbLimitError","handleChangeAdd","addWorkflow","ruleLegendOpen","ruleLegendClose","newWorkflowOpen","newWorkflowClose","refreshWorkflows","dbLimitErrorClose","my","FormatListBulleted","noValidate","autoComplete"],"mappings":"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","file":"static/js/12.7be41f5f.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nimport { spacing } from '@material-ui/system';\n\nimport {\n  Grid as MuiGrid,\n  Typography,\n  TextField as MuiTextField,\n  Select as MuiSelect,\n  FormControl as MuiFormControl,\n  Button as MuiButton,\n  InputLabel,\n  OutlinedInput,\n  MenuItem,\n  Box,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n} from '@material-ui/core';\n\nimport {\n  DeleteOutline as DeleteIcon,\n  Add as AddIcon,\n} from '@material-ui/icons';\n\nimport { RedactRule, WorkflowRecord } from '../../types/redactics';\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\ninterface IProps {\n  workflow: WorkflowRecord;\n  maskingRuleValues: RedactRule[];\n  handleRuleChange: any;\n  deleteMaskingRule: any;\n  numMaskingRules: number;\n  maskingRules: RedactRule[];\n  addMaskingRule: any;\n  allDatabaseTables: string[];\n}\n\ninterface IState {\n  ruleLabelWidth: number;\n}\n\nclass WorkflowPostExport extends React.Component<IProps, IState> {\n  constructor(props: IProps) {\n    super(props);\n\n    this.state = {\n      ruleLabelWidth: 30,\n    };\n  }\n\n  displayMaskingRules() {\n    if (!this.props.numMaskingRules) {\n      return (\n        <Box>\n          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addMaskingRule}>\n            <AddIcon />&nbsp;&nbsp;Add Table Field Containing PII\n          </Button>\n        </Box>\n      )\n    }\n    else {\n      return (\n        <Box mt={8}>\n          <Grid\n            justify=\"space-between\"\n            container\n            spacing={10}\n          >\n            <Grid item></Grid>\n            <Grid item mb={6}>\n              <div>\n                <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addMaskingRule}>\n                  <AddIcon />&nbsp;\n                  Add Rule\n                </Button>\n              </div>\n            </Grid>\n          </Grid>\n\n          <Table size=\"small\" style={{ width: 'auto' }}>\n            <TableBody>\n              {this.props.maskingRuleValues.map((row:RedactRule) => (\n                <TableRow key={row.key}>\n                  <TableCell style={{ paddingLeft: 0 }}>\n                    <FormControl variant=\"outlined\" margin=\"dense\">\n                      <InputLabel>\n                        Input and Table Name\n                      </InputLabel>\n                      <Select\n                        value={row.databaseTable}\n                        onChange={(event) => this.props.handleRuleChange(row.key, event)}\n                        name=\"databaseTable\"\n                        input={\n                          <OutlinedInput\n                            labelWidth={this.state.ruleLabelWidth}\n                            name=\"rule\"\n                          />\n                        }\n                      >\n                        {this.props.allDatabaseTables.map((dt:string) => (\n                          <MenuItem key={dt} value={dt}>{dt}</MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </TableCell>\n                  <TableCell>\n                    <TextField name=\"column\" defaultValue={row.column} label=\"Column Name\" variant=\"outlined\" onChange={(event) => this.props.handleRuleChange(row.key, event)} margin=\"dense\" />\n                  </TableCell>\n                  <TableCell>\n                    <FormControl variant=\"outlined\" margin=\"dense\">\n                      <InputLabel>\n                        Rule\n                      </InputLabel>\n                      <Select\n                        value={row.rule}\n                        onChange={(event) => this.props.handleRuleChange(row.key, event)}\n                        name=\"rule\"\n                        input={\n                          <OutlinedInput\n                            labelWidth={this.state.ruleLabelWidth}\n                            name=\"rule\"\n                          />\n                        }\n                      >\n                        {this.props.maskingRules.map((rule:RedactRule) => (\n                          <MenuItem key={rule.key} value={rule.key}>{rule.val}</MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </TableCell>\n                  <TableCell>\n                    <Box>\n                      <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.deleteMaskingRule(row.key)}>\n                        <DeleteIcon />&nbsp;&nbsp;Delete\n                      </Button>\n                    </Box>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Box>\n      )\n    }\n  }\n\n  /* eslint-disable max-len */\n\n  render() {\n    return (\n      <React.Fragment>\n        <Box mt={8}>\n          <Typography variant=\"h6\" gutterBottom>\n            Database Fields Containing PII/Confidential Info\n          </Typography>\n\n          <Box mb={4}>\n            <Grid container>\n              <Grid item xs={8}>\n                <Typography variant=\"body1\" gutterBottom>\n                  You can use the Redactics PII Scanner to auto-detect your database fields containing PII, or else define your fields containing PII (and their redaction rules) here.\n                </Typography>\n              </Grid>\n            </Grid>\n          </Box>\n\n          {this.displayMaskingRules()}\n        </Box>\n\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WorkflowPostExport;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { spacing } from '@material-ui/system';\n\nimport {\n  Button as MuiButton,\n  TextField as MuiTextField,\n  Select as MuiSelect,\n  FormControl as MuiFormControl,\n  InputLabel,\n  MenuItem,\n  Box,\n  Link,\n  Checkbox,\n  Typography,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Grid as MuiGrid,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  Edit as EditIcon,\n  DeleteOutline as DeleteIcon,\n} from '@material-ui/icons';\n\nimport { AgentRecord, WorkflowRecord, AgentInputRecord, WorkflowInputRecord } from '../../types/redactics';\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst WideFormControl = styled(FormControlSpacing)`\n  min-width: 400px;\n  max-width: 400px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst NWTableCell = withStyles({\n  root: {\n    whiteSpace: 'nowrap',\n  },\n})(TableCell);\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  agents: AgentRecord[];\n  errors?: any;\n  workflow: WorkflowRecord;\n  agentInputs: AgentInputRecord[];\n  classes: any;\n  editInputDialog: boolean;\n  triggerEditInputDialog: any;\n  saveInputChanges: any;\n  input: WorkflowInputRecord;\n  inputs: WorkflowInputRecord[];\n  handleInputChanges: any;\n  selectInputSource: any;\n  handleAddTable: any;\n  addTable: string;\n  triggerAddTable: any;\n  hideInputDialog: any;\n  deleteDatabaseTable: any;\n  handleSnackbarClose: any;\n  addTableSelection: any;\n  deleteTableSelection: any;\n}\n\ninterface IState {\n \n}\n\nclass WorkflowInputs extends React.Component<IProps, IState> {\n  getAgent() {\n    const agent = this.props.agents.filter((a:AgentRecord) => (\n      (a.uuid === this.props.workflow.agentId)));\n    // set stub result if method is called before data has been populated,\n    // there should always be an agent found\n    return (agent.length) ? agent[0] : {\n      configPath: '',\n      namespace: '',\n    };\n  }\n\n  displayTableSelection(tableSelection:string) {\n    let addButton = \"Add Table\";\n    if (tableSelection === \"allExclude\") { addButton += \" Exclusion\"; }\n    if (!this.props.input.tables || !this.props.input.tables.length) {\n      return (\n        <Box>\n          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addTableSelection}>\n            <AddIcon />&nbsp;&nbsp;{addButton}\n          </Button>\n        </Box>\n      )\n    }\n    else {\n      return (\n        <Table size=\"small\" style={{ width: 'auto' }}>\n          <TableBody>\n            {this.props.input.tables.map((row:any, idx:number) => (\n              <TableRow key={idx}>\n                <TableCell style={{ paddingLeft: 0 }}>\n                  <TextField\n                    error={this.props.errors.addSchema}\n                    name=\"addSchema\"\n                    label=\"Schema\"\n                    value={row.split('.')[0]}\n                    onChange={(event) => this.props.handleAddTable(event, idx, \"schema\")}\n                    variant=\"outlined\"\n                    margin=\"dense\"\n                  />\n                </TableCell>\n                <TableCell>\n                  <TextField\n                    error={this.props.errors.addTable}\n                    name=\"addTable\"\n                    label=\"Table\"\n                    value={row.split('.')[1]}\n                    onChange={(event) => this.props.handleAddTable(event, idx, \"table\")}\n                    variant=\"outlined\"\n                    margin=\"dense\"\n                  />\n                </TableCell>\n                <TableCell>\n                  <Box>\n                    <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.deleteTableSelection(idx)}>\n                      <DeleteIcon />&nbsp;&nbsp;Delete\n                    </Button>\n                  </Box>\n                </TableCell>\n              </TableRow>\n            ))}\n            <TableRow>\n              <TableCell></TableCell>\n              <TableCell></TableCell>\n              <TableCell>\n                <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addTableSelection}>\n                  <AddIcon />&nbsp;&nbsp;Add\n                </Button>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      )\n    }\n  }\n\n  editInputDialogContent() { \n    return (\n      <Box>\n        {this.props.errors.JSX}\n\n        <Box mt={8}>\n          <Box display={(this.props.workflow.workflowType === \"mockDatabaseMigration\") ? \"none\" : \"block\"}>\n            <WideFormControl margin=\"dense\" fullWidth>\n              <InputLabel>\n                Table Selection\n              </InputLabel>\n              <Select\n                value={this.props.input.tableSelection}\n                name=\"tableSelection\"\n                onChange={(event) => this.props.handleInputChanges(event, this.props.input)}\n              >\n                <MenuItem key=\"none\" value=\"none\">None</MenuItem>\n                <MenuItem key=\"all\" value=\"all\">Select all tables in all schema</MenuItem>\n                <MenuItem key=\"allExclude\" value=\"allExclude\">Select all tables in all schema with specified exclusions</MenuItem>\n                <MenuItem key=\"specific\" value=\"specific\">Select specific tables</MenuItem>\n              </Select>\n            </WideFormControl>\n          </Box>\n\n          <Box mt={4} display={(this.props.input.tableSelection === \"allExclude\" || this.props.input.tableSelection === \"specific\") ? \"block\" : \"none\"}>\n            You can use wildcards (i.e. <code><b>*</b></code>) for broad pattern matching. For example, <b><code>public.account_*</code></b> will match all tables starting with \"account_\" in the public schema, and <b><code>company_*.users</code></b> will match all users tables in schema starting with \"company_\". If you aren't aware of what schema your tables reside in, they probably reside in <b><code>public</code></b>, which is the PostgreSQL default.\n            <Box mt={8}>\n              {this.displayTableSelection(this.props.input.tableSelection)}\n            </Box>\n          </Box>\n        </Box>\n      </Box>\n    ) \n  }\n\n  outputMockConstraints() {\n    let foundConstraints:boolean = false;\n    let tables:string = \"\";\n    let workflowInput:any = {\n      uuid: \"\"\n    };\n    this.props.agentInputs.forEach((input:AgentInputRecord) => {\n      workflowInput = this.props.inputs.find((i:WorkflowInputRecord) => {\n        return (i.uuid === input.uuid)\n      });\n      if (workflowInput && workflowInput.tables && workflowInput.tables.length) {\n        foundConstraints = true;\n        tables = \"all tables except \" + workflowInput.tables.join(', ');\n      }\n    });\n    if (!foundConstraints) {\n      return (\n        <Box>\n          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.triggerEditInputDialog({\n            inputName: workflowInput.inputName,\n            uuid: workflowInput.uuid,\n            enabled: workflowInput.enabled,\n            tableSelection: \"allExclude\",\n            tables: [\"public\"]\n          })}>\n            <AddIcon />&nbsp;&nbsp;Add Database Cloning Constraint\n          </Button>\n        </Box>\n      )\n    }\n    return (\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Tables</TableCell>\n            <TableCell></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          <TableRow key={workflowInput.uuid}>\n            <TableCell>{tables}</TableCell>\n            <NWTableCell>\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.triggerEditInputDialog(workflowInput)}>\n                <EditIcon/>&nbsp;Edit Table Selection\n              </Button>\n            </NWTableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    )\n  }\n\n  outputDataSources() {\n    if (this.props.agentInputs.length) {\n      if (this.props.workflow.workflowType === \"mockDatabaseMigration\") {\n        const selectedInput:string = (this.props.inputs && this.props.inputs.length && this.props.inputs[0]) ? this.props.inputs[0].uuid : \"\";\n        return (\n          <Box>\n            <FormControl margin=\"dense\" fullWidth>\n              <InputLabel>\n                Input Source\n              </InputLabel>\n              <Select\n                value={selectedInput}\n                name=\"inputSource\"\n                onChange={(event) => this.props.selectInputSource(event)}\n              >\n                {this.props.agentInputs.map((input:AgentInputRecord) => (\n                  <MenuItem key={input.uuid} value={input.uuid}>{input.inputName}</MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n              \n            <Box mt={8}>\n              <Typography variant=\"h6\" gutterBottom>\n                Database Cloning Constraints\n              </Typography>\n\n              <Grid container>\n                <Grid item xs={8}>\n                  <Typography variant=\"body1\" gutterBottom>\n                    If you want to clone your database faster you can do so by excluding certain tables which are irrelevant to testing your migration. This can be changed at any time to support your specific database migration.\n                  </Typography>\n                </Grid>\n              </Grid>\n\n              <Box mt={8}>\n                {this.outputMockConstraints()}\n              </Box>\n            </Box>\n          </Box>\n        )\n      }\n      else {\n        return (\n          <Box>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Enabled</TableCell>\n                  <TableCell>Name</TableCell>\n                  <TableCell>Tables</TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {this.props.agentInputs.map((input:AgentInputRecord) => {\n                  let workflowInput:any = this.props.inputs.find((i:WorkflowInputRecord) => {\n                    return (i.uuid === input.uuid)\n                  });\n                  let inputEnabled:boolean = (workflowInput) ? workflowInput.enabled : false;\n                  let tables:string = \"\";\n                  if (workflowInput && workflowInput.tableSelection) {\n                    switch (workflowInput.tableSelection) {\n                      case 'all':\n                      tables = \"all tables\";\n                      break;\n  \n                      case 'allExclude':\n                      tables = \"all tables except \" + workflowInput.tables.join(', ');\n                      break;\n  \n                      case 'specific':\n                      tables = workflowInput.tables.join(', ');\n                      break;\n                    }\n                  }\n                  else {\n                    workflowInput = {\n                      enabled: false,\n                      uuid: input.uuid,\n                      tables: [],\n                      tableSelection: \"\",\n                    }\n                    tables = \"none selected\";\n                  }\n                  return (\n                    <TableRow key={input.uuid}>\n                      <TableCell>\n                        <Checkbox\n                          checked={inputEnabled}\n                          name=\"enabled\"\n                          color=\"primary\"\n                          onChange={(event) => this.props.handleInputChanges(event, workflowInput)}\n                        />\n                      </TableCell>\n                      <TableCell>{input.inputName}</TableCell>\n                      <TableCell>{tables}</TableCell>\n                      <NWTableCell>\n                        <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.triggerEditInputDialog(workflowInput)}>\n                          <EditIcon/>&nbsp;Edit Table Selection\n                        </Button>\n                      </NWTableCell>\n                    </TableRow>\n                  )\n                })}\n              </TableBody>\n            </Table>\n          </Box>\n        )\n      }\n    }\n    else {\n      return (\n        <Box>\n          Workflows require at least one input source. Ensure at least one is selected within the \"Agent Settings\" section in the <Link href=\"/agents\">Agents</Link> page.\n        </Box>\n      )\n    }\n  }\n\n  /* eslint-disable max-len */\n\n  render() {\n    const title = (this.props.workflow.workflowType === \"mockDatabaseMigration\") ? \"Input Source\" : \"Input Sources\";\n    return (\n      <React.Fragment>\n        <Box mt={4}>\n          <Typography variant=\"h4\" gutterBottom>\n            {title}\n          </Typography>\n        </Box>\n\n        <Dialog\n          open={this.props.editInputDialog}\n          onClose={this.props.hideInputDialog}\n          maxWidth=\"md\"\n          aria-labelledby=\"dialog-title\"\n          aria-describedby=\"dialog-description\"\n          fullWidth\n        >\n          <DialogTitle id=\"dialog-title\">Edit Table Selection</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"dialog-description\">\n              {this.editInputDialogContent()}\n            </DialogContentText>\n\n            <DialogActions>\n              <Button color=\"secondary\" variant=\"contained\" onClick={this.props.saveInputChanges}>\n                Update\n              </Button>\n            </DialogActions>\n          </DialogContent>\n        </Dialog>\n\n        <Box mt={8}>\n          {this.outputDataSources()}\n        </Box>\n       \n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(WorkflowInputs);\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { spacing } from '@material-ui/system';\n\nimport {\n  Typography,\n  TextField as MuiTextField,\n  Select as MuiSelect,\n  FormControl as MuiFormControl,\n  InputLabel,\n  MenuItem,\n  Box,\n  Link,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n  Tooltip,\n  InputAdornment,\n} from '@material-ui/core';\n\nimport {\n  HelpOutline as HelpIcon,\n} from '@material-ui/icons';\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  handleExportSchedule: any;\n  exportSchedule: boolean;\n  schedule: string;\n  handleSchedule: any;\n  scheduleSelection: string;\n  customSchedule: boolean;\n  workflowType: string;\n  errors: any;\n}\n\ninterface IState {\n\n}\n\nclass DatabaseSchedule extends React.Component<IProps, IState> {\n  render() {\n    return (\n      <React.Fragment>\n        <Box mt={8}>\n          <Typography variant=\"h4\" gutterBottom>\n            Workflow Schedule Options\n          </Typography>\n\n          <Box mt={4}>\n            <RadioGroup aria-label=\"exportSchedule\" name=\"exportSchedule\" onChange={this.props.handleExportSchedule} value={String(this.props.exportSchedule)}>\n              <FormControlLabel value=\"false\" control={<Radio />} label=\"Do Not Automate Workflow\" />\n              <FormControlLabel value=\"true\" control={<Radio />} label=\"Schedule/Automate Workflow\" />\n            </RadioGroup>\n          </Box>\n\n          <Box mt={2} display={(this.props.exportSchedule === true) ? 'block' : 'none'}>\n            <Box>\n              <FormControl fullWidth>\n                <InputLabel htmlFor=\"scheduleSelection\">Schedule</InputLabel>\n                <Select\n                  name=\"scheduleSelection\"\n                  onChange={this.props.handleSchedule}\n                  value={this.props.scheduleSelection}\n                >\n                  <MenuItem key=\"none\" value=\"None\">None</MenuItem>\n                  <MenuItem key=\"hourly\" value=\"@hourly\">Hourly</MenuItem>\n                  <MenuItem key=\"daily\" value=\"@daily\">Daily</MenuItem>\n                  <MenuItem key=\"weekly\" value=\"@weekly\">Weekly</MenuItem>\n                  <MenuItem key=\"monthly\" value=\"@monthly\">Monthly</MenuItem>\n                  <MenuItem key=\"custom\" value=\"custom\">Custom</MenuItem>\n                </Select>\n              </FormControl>\n            </Box>\n\n            <Box mt={4} display={(this.props.customSchedule === true) ? 'block' : 'none'}>\n              <FormControl fullWidth>\n                <TextField\n                  error={this.props.errors.schedule}\n                  name=\"schedule\"\n                  label=\"Cronjob Schedule\"\n                  value={this.props.schedule}\n                  onChange={this.props.handleSchedule}\n                  InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Schedule time as a cron expression\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                />\n                <Box mt={1}>\n                  See <Link target=\"_blank\" rel=\"noreferrer\" href=\"https://crontab.guru\"><b>Crontab Guru</b></Link> for help with generating cron schedule expressions.\n                </Box>\n              </FormControl>\n            </Box>\n          </Box>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default DatabaseSchedule;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { spacing } from '@material-ui/system';\n\nimport {\n  Typography,\n  TextField as MuiTextField,\n  FormControl as MuiFormControl,\n  Button as MuiButton,\n  Box,\n  Select,\n  MenuItem,\n  Tooltip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  Grid as MuiGrid,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  HelpOutline as HelpIcon,\n  Edit as EditIcon,\n  DeleteOutline as DeleteIcon,\n} from '@material-ui/icons';\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n  display: inline;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst Button = styled(MuiButton)(spacing);\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  exportTableDataConfig: any;\n  tableOutputOptions: any;\n  constraintSchema: string;\n  constraintTable: string;\n  handleTableOutputChanges: any;\n  allDatabaseTables: string[];\n  showOutputOptions: any;\n  currentDatabaseTable: string;\n  triggerOutputOptions: any;\n  deleteConstraint: any;\n  hideOutputOptions: any;\n  genConstraintSummary: any;\n}\n\ninterface IState {\n\n}\n\nclass WorkflowExport extends React.Component<IProps, IState> {\n  constructor(props:IProps) {\n    super(props);\n\n    this.displayConstraintOptions = this.displayConstraintOptions.bind(this);\n  }\n\n  displayConstraintOptions() {\n    const table = this.props.currentDatabaseTable;\n    if (!this.props.tableOutputOptions.errors) {\n      this.props.tableOutputOptions.errors = {};\n    }\n\n    return (\n      <Box mt={4}>\n        <FormControl fullWidth variant=\"outlined\">\n          <TextField\n            error={this.props.tableOutputOptions.errors.schema}\n            name=\"schema\"\n            label=\"Schema\"\n            value={this.props.constraintSchema}\n            onChange={(event) => this.props.handleTableOutputChanges(event)}\n          />\n        </FormControl>\n\n        <Box mt={4}>\n          <FormControl fullWidth variant=\"outlined\">\n            <TextField\n              error={this.props.tableOutputOptions.errors.table}\n              name=\"table\"\n              label=\"Table\"\n              value={this.props.constraintTable}\n              onChange={(event) => this.props.handleTableOutputChanges(event)}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={4} display={(this.props.constraintSchema && this.props.constraintTable) ? 'block' : 'none'}>\n          <FormControl>\n            <Select\n              name=\"sampleFields\"\n              value={this.props.tableOutputOptions.sampleFields}\n              onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n            >\n              <MenuItem key=\"created\" value=\"created\">Created</MenuItem>\n              <MenuItem key=\"updated\" value=\"updated\">Updated</MenuItem>\n              <MenuItem key=\"createdAndUpdated\" value=\"createdAndUpdated\">Created or updated</MenuItem>\n            </Select>&nbsp;&nbsp;in the last&nbsp;&nbsp;\n            <Select\n              name=\"numDays\"\n              value={this.props.tableOutputOptions.numDays}\n              onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n            >\n              <MenuItem key=\"1\" value=\"1\">day</MenuItem>\n              <MenuItem key=\"2\" value=\"2\">2 days</MenuItem>\n              <MenuItem key=\"3\" value=\"3\">3 days</MenuItem>\n              <MenuItem key=\"7\" value=\"7\">1 week</MenuItem>\n              <MenuItem key=\"14\" value=\"14\">2 weeks</MenuItem>\n              <MenuItem key=\"30\" value=\"30\">month</MenuItem>\n              <MenuItem key=\"60\" value=\"60\">2 months</MenuItem>\n              <MenuItem key=\"90\" value=\"90\">3 months</MenuItem>\n              <MenuItem key=\"180\" value=\"180\">6 months</MenuItem>\n              <MenuItem key=\"365\" value=\"365\">year</MenuItem>\n            </Select>\n          </FormControl>\n\n          <Box mt={4}>\n            <FormControl fullWidth variant=\"outlined\">\n              <TextField\n                error={this.props.tableOutputOptions.errors.createdAtField}\n                name=\"createdAtField\"\n                label=\"Created At Field Name\"\n                value={this.props.tableOutputOptions.createdAtField}\n                onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n                InputProps={{\n                  endAdornment: <Tooltip title=\"(Required) field name in this table used for tracking created at timestamp\" placement=\"right-start\"><HelpIcon /></Tooltip>,\n                }}\n              />\n            </FormControl>\n          </Box>\n\n          <Box mt={4}>\n            <FormControl fullWidth variant=\"outlined\">\n              <TextField\n                error={this.props.tableOutputOptions.errors.updatedAtField}\n                name=\"updatedAtField\"\n                label=\"Updated At Field Name\"\n                value={this.props.tableOutputOptions.updatedAtField}\n                onChange={(event) => this.props.handleTableOutputChanges(event, table)}\n                InputProps={{\n                  endAdornment: <Tooltip title=\"(Required) field name in this table used for tracking updated at timestamp\" placement=\"right-start\"><HelpIcon /></Tooltip>,\n                }}\n              />\n            </FormControl>\n          </Box>\n        </Box>\n      </Box>\n    )\n  }\n\n  displayConstraintsTable() {\n    let constraints:any = this.props.exportTableDataConfig.filter((config:any) => {\n      return config.numDays\n    });\n\n    if (!constraints.length) {\n      return (\n        <Box>\n          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={(event) => this.props.triggerOutputOptions(event, null)}>\n            <AddIcon />&nbsp;&nbsp;Add Data Sampling Constraint\n          </Button>\n        </Box>\n      )\n    }\n    else {\n      return (\n        <Box>\n          <Grid\n            justify=\"space-between\"\n            container\n            spacing={10}\n          >\n            <Grid item></Grid>\n            <Grid item mb={6}>\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={(event) => this.props.triggerOutputOptions(event, null)}>\n                <AddIcon />&nbsp;&nbsp;Add Data Sampling Constraint\n              </Button>\n            </Grid>\n          </Grid>\n\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Table</TableCell>\n                <TableCell>Constraint</TableCell>\n                <TableCell></TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n            {constraints.map((c:any) => {\n              let tableName = c.table;\n              return (\n                <TableRow key={tableName}>\n                  <TableCell>{tableName}</TableCell>\n                  <TableCell>{this.props.genConstraintSummary(tableName)}</TableCell>\n                  <TableCell>\n                    <Button color=\"secondary\" size=\"small\" variant=\"contained\" onClick={(event) => this.props.triggerOutputOptions(event, tableName)}>\n                      <EditIcon />&nbsp;Edit\n                    </Button>&nbsp;\n                    <Button variant=\"contained\" color=\"default\" size=\"small\" onClick={(event) => this.props.deleteConstraint(event, tableName)}>\n                      <DeleteIcon />&nbsp;Delete\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              )\n            })}\n            </TableBody>\n          </Table>\n        </Box>\n      )\n    }\n  }\n\n  render() {\n    if (!this.props.allDatabaseTables) {\n      return null;\n    }\n    return (\n      <React.Fragment>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n            Table Data Options\n          </Typography>\n\n          <Grid container>\n            <Grid item xs={8}>\n              <Typography variant=\"body1\" gutterBottom>\n                If you want to constrain your outputs to a selected time range (creating smaller tables in the process) you can do so by adding your table constraints below. Note that if other tables depend on omitted data these relationships will be broken.\n              </Typography>\n            </Grid>\n          </Grid>\n  \n          <Dialog\n            fullWidth\n            open={this.props.showOutputOptions}\n            onClose={this.props.hideOutputOptions}\n            maxWidth=\"md\"\n            aria-labelledby=\"dialog-title\"\n            aria-describedby=\"dialog-description\"\n          >\n            <DialogTitle id=\"dialog-title\">Data Sampling Constraint</DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"dialog-description\">\n                {this.displayConstraintOptions()}\n              </DialogContentText>\n\n              <DialogActions>\n                <Button color=\"secondary\" variant=\"contained\" onClick={this.props.hideOutputOptions}>\n                  Update\n                </Button>\n              </DialogActions>\n            </DialogContent>\n          </Dialog>\n\n          <Box mt={8}>\n            {this.displayConstraintsTable()}\n          </Box>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WorkflowExport;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { spacing } from '@material-ui/system';\n\nimport {\n  Grid as MuiGrid,\n  Typography,\n  TextField as MuiTextField,\n  FormControl as MuiFormControl,\n  Button as MuiButton,\n  Box,\n  Link,\n  Checkbox,\n  Tooltip,\n  InputAdornment,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Paper as MuiPaper,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails as MuiExpansionPanelDetails,\n  List,\n  ListItem,\n  ListItemText,\n  Select,\n  InputLabel,\n  MenuItem,\n  FormControlLabel,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  DeleteOutline as DeleteIcon,\n  Edit as EditIcon,\n  HelpOutline as HelpIcon,\n  ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\n\nimport {\n  HardDrive as HardDriveIcon,\n  Code as CodeIcon,\n} from 'react-feather';\n\nimport { WorkflowInputRecord, InputRecord, CustomSecret, DataFeed, AgentRecord, WorkflowRecord, PostUpdateParam } from '../../types/redactics';\n\nimport { Alert as MuiAlert } from '@material-ui/lab';\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst MedTextField = styled(TextFieldSpacing)`\n  width: 400px;\n`;\n\nconst WideTextField = styled(TextFieldSpacing)`\n  width: 600px;\n`;\n\nconst bold = {\n  fontWeight: \"bold\"\n};\n\nconst Alert = styled(MuiAlert)(spacing);\n\nconst ExpansionPanelDetails = withStyles({\n  root: {\n    display: 'block',\n  },\n})(MuiExpansionPanelDetails);\n\nconst NWTableCell = withStyles({\n  root: {\n    whiteSpace: 'nowrap',\n  },\n})(TableCell);\n\nconst Paper = styled(MuiPaper)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  inputs: WorkflowInputRecord[];\n  allInputs: InputRecord[];\n  handleDeleteSecret: any;\n  markAddToS3UploadList: any;\n  addAllToS3UploadList: any;\n  addAllS3Uploads: boolean;\n  agentNamespace?: string;\n  dataFeeds: DataFeed[];\n  dataFeed: DataFeed;\n  hideDataFeed: any;\n  addDataFeed: any;\n  editDataFeed: boolean;\n  addParameterValue: any;\n  updateParameterValue: any;\n  deleteParameterValue: any;\n  handleDataFeed: any;\n  handleDataFeedBack: any;\n  handleDataFeedCancel: any;\n  getS3UploadFileNames: any;\n  handleDataFeedOptions: any;\n  saveDataFeedChanges: any;\n  triggerEditDataFeed: any;\n  deleteDataFeed: any;\n  errors: any;\n  handleCustomSecret: any;\n  addSecret: any;\n  agents: AgentRecord[];\n  workflow: WorkflowRecord;\n}\n\ninterface IState {\n\n}\n\nclass WorkflowPostExport extends React.Component<IProps, IState> {\n  /* eslint-disable max-len */\n\n  databaseEngine(engine:string) {\n    let displayEngine:string = \"\";\n    switch (engine) {\n      case 'postgresql':\n        displayEngine = \"PostgreSQL\";\n      break;\n\n      default:\n      break;\n    }\n\n    return displayEngine;\n  }\n\n  dataFeedName(df:string) {\n    let dataFeed:string = \"\";\n    switch (df) {\n      case 'digitalTwin':\n        dataFeed = \"Create a PII-free Digital Twin/Clone\";\n      break;\n      \n      case 's3upload':\n        dataFeed = \"Upload/Sync Data to an Amazon S3 bucket\";\n      break;\n\n      case 'custom':\n        dataFeed = \"Custom Container/Plugin\";\n      break;\n\n      default:\n      break;\n    }\n\n    return dataFeed;\n  }\n\n  dataFeedSummary(df:any) {\n    let dataFeedSummary:string = \"\";\n    let uploadBucket:string = df.dataFeedConfig.S3UploadBucket;\n    if (df.dataFeedConfig.S3UploadBucket && !df.dataFeedConfig.S3UploadBucket.match(/^s3:\\/\\//)) {\n      uploadBucket = \"s3://\" + df.dataFeedConfig.S3UploadBucket;\n    }\n    switch (df.dataFeed) {\n      case 'digitalTwin':\n      dataFeedSummary = \"Data will be cloned to your \" + this.databaseEngine(df.dataFeedConfig.databaseEngine) + \" database and will be \";\n      dataFeedSummary += (df.dataFeedConfig.enableDeltaUpdates) ? \"updated with new data\" : \"reset to match the original data\";\n      if (df.dataFeedConfig.enablePostUpdatePreparedStatements) {\n        let preparedStatementValues:string[] = [];\n        df.dataFeedConfig.postUpdateKeyValues.forEach((kv:PostUpdateParam) => {\n          if (kv.key && kv.value) {\n            preparedStatementValues.push(kv.value);\n          }\n        })\n        if (preparedStatementValues.length) {\n          dataFeedSummary+= \". After each time the workflow runs your data will be modified with the following values: \" + preparedStatementValues.join(', ') + \".\";\n        }\n      }\n      break;\n      \n      case 's3upload':\n      dataFeedSummary = \"Upload \";\n      dataFeedSummary += (df.dataFeedConfig.uploadFileChecked.length === this.props.getS3UploadFileNames().length)\n        ? \"all\" : df.dataFeedConfig.uploadFileChecked.length;\n      dataFeedSummary += (df.dataFeedConfig.uploadFileChecked.length === 1) ? \" table\" : \" tables\";\n      dataFeedSummary += \" to \" + uploadBucket;\n      break;\n\n      case 'custom':\n      dataFeedSummary = \"Invoke custom container \" + df.dataFeedConfig.image + \":\" + df.dataFeedConfig.tag;\n      break;\n\n      default:\n      break;\n    }\n\n    return dataFeedSummary;\n  }\n\n  outputTable() {\n    if (this.props.dataFeeds && this.props.dataFeeds.length) {\n      return (\n        <Box>\n          <Grid\n            justify=\"space-between\"\n            container\n            spacing={10}\n          >\n            <Grid item></Grid>\n            <Grid item mb={6}>\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addDataFeed}>\n                <AddIcon />&nbsp;\n                Add Data Feed\n              </Button>\n            </Grid>\n          </Grid>\n\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Data Feed</TableCell>\n                <TableCell>Summary</TableCell>\n                <TableCell></TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {this.props.dataFeeds.map((df:DataFeed) => (\n                <TableRow key={df.uuid}>\n                  <TableCell>{this.dataFeedName(df.dataFeed)}</TableCell>\n                  <TableCell>{this.dataFeedSummary(df)}</TableCell>\n                  <NWTableCell>\n                    <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.triggerEditDataFeed(df)}>\n                      <EditIcon/>&nbsp;Edit\n                    </Button>&nbsp;\n                    <Button variant=\"contained\" color=\"default\" size=\"small\" onClick={() => this.props.deleteDataFeed(df)}>\n                      <DeleteIcon />&nbsp;Delete\n                    </Button>\n                  </NWTableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Box>\n      )\n    }\n    else {\n      return (\n        <Box>\n          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addDataFeed}>\n            <AddIcon />&nbsp;\n            Add Data Feed\n          </Button>\n        </Box>\n      )\n    }\n  }\n\n  showErrors() {\n    if (this.props.errors.duplicateDataFeed) {\n      return (\n        <Alert mb={4} severity=\"error\">You can only create one of each type of Data Feed</Alert>\n      )\n    }\n    else if (this.props.errors.invalidBucketName) {\n      return (\n        <Alert mb={4} severity=\"error\">Invalid Amazon S3 bucket name. <Link target=\"_blank\" href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html\">Naming guidelines</Link></Alert>\n      )\n    }\n    else if (this.props.errors.invalidPostUpdateKeyValues) {\n      return (\n        <Alert mb={4} severity=\"error\">Invalid parameter key or value. Parameters must not be empty and must not contain %, (, or ) characters</Alert>\n      )\n    }\n    else if (this.props.errors.invalidSecret) {\n      return (\n        <Alert mb={4} severity=\"error\">One or more of your secrets is missing a value - all fields are required</Alert>\n      )\n    }\n    return null;\n  }\n\n  getAgent() {\n    const agent = this.props.agents.filter((a:AgentRecord) => (\n      (a.uuid === this.props.workflow.agentId)));\n    // set stub result if method is called before data has been populated,\n    // there should always be an agent found\n    return (agent.length) ? agent[0] : {\n      configPath: '',\n      namespace: '',\n    };\n  }\n\n  render() {\n    const namespaceTip = this.props.dataFeed.feedSecrets.length ? (\n      <p>\n        Be sure that any secrets that need to be attached to your post-processing Docker container exist in this same Kubernetes namespace.\n      </p>\n    ) : '';\n\n    return (\n      <React.Fragment>\n        <Box mt={8}>\n          <Typography variant=\"h4\" gutterBottom>\n            Data Feeds\n          </Typography>\n\n          <Dialog\n            open={this.props.editDataFeed}\n            onClose={this.props.hideDataFeed}\n            fullWidth\n            maxWidth=\"md\"\n            aria-labelledby=\"dialog-title\"\n            aria-describedby=\"dialog-description\"\n          >\n            <DialogTitle id=\"dialog-title\">{(!this.props.dataFeed.uuid.match(/^new/)) ? \"Edit\" : \"Add\"} Data Feed</DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"dialog-description\">\n                {this.showErrors()}\n\n                <Box display={(this.props.dataFeed.dataFeed === '') ? 'block' : 'none'}>\n                  <List component=\"nav\" aria-label=\"data feed selection\">\n                    <ListItem disabled={!(this.props.workflow.workflowType === \"ERL\")} button onClick={() => this.props.handleDataFeed('digitalTwin')}>\n                      <ListItemText\n                        primary=\"Create a PII-free Digital Twin/Clone\"\n                        primaryTypographyProps={{ style: bold }}\n                        secondary=\"Creates a PII-free clone of your data to a target/output database. Any data written in the target tables is replaced by the data from your source/input.\" \n                      />\n                    </ListItem>\n\n                    <ListItem disabled={!(this.props.workflow.workflowType === \"ERL\")} button onClick={() => this.props.handleDataFeed('s3upload')}>\n                      <ListItemText\n                        primary=\"Upload/Sync Data to an Amazon S3 Bucket\"\n                        primaryTypographyProps={{ style: bold }}\n                        secondary=\"Upload your table data CSV files to an Amazon S3 bucket.\" \n                      />\n                    </ListItem>\n\n                    <ListItem disabled={!(this.props.workflow.workflowType === \"ERL\")} button onClick={() => this.props.handleDataFeed('custom')}>\n                      <ListItemText\n                        primary=\"Configure a Custom Container/Plugin\"\n                        primaryTypographyProps={{ style: bold }}\n                        secondary=\"Trigger your own custom container to carry out work of your choosing.\" \n                      />\n                    </ListItem>\n                  </List>\n                </Box>\n\n                <Box mt={8} display={(this.props.dataFeed.dataFeed === 'digitalTwin') ? 'block' : 'none'}>\n                  <Typography variant=\"h4\" gutterBottom>\n                    Digital Twin Options\n                  </Typography>\n\n                  <p>Adding this data feed will require updating your Agent configuration file (provided within the <Link href=\"/agents\" target=\"_blank\">Agents</Link> page), replacing the \"changeme\"s for connection ID <code>{this.props.dataFeed.uuid}</code> with the specified connection info for this input source.</p>\n\n                  <Box mt={4}>\n                    <FormControl margin=\"dense\" fullWidth>\n                      <InputLabel>\n                        Input Source\n                      </InputLabel>\n                      <Select\n                        value={this.props.dataFeed.dataFeedConfig.inputSource}\n                        name=\"inputSource\"\n                        onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      >\n                        {this.props.allInputs.map((input:InputRecord) => (\n                          <MenuItem key={input.uuid} value={input.uuid}>{input.inputName}</MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </Box>\n                 \n                  <Box mt={4}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.props.dataFeed.dataFeedConfig.enableDeltaUpdates}\n                          onChange={(event) => this.props.handleDataFeedOptions(event)}\n                          name=\"enableDeltaUpdates\"\n                          color=\"primary\"\n                        />\n                      }\n                      label=\"Enable Delta Updates\"\n                    />\n                    <Box>\n                      After your initial job has run your workflow performance can be increased substantially by only transferring changed data, rather than recreating tables from scratch. Leave this disabled to hard-reset your data each time your workflow runs.\n                    </Box>\n                  </Box>\n\n                  <Box mt={4} display={(this.props.dataFeed.dataFeedConfig.enableDeltaUpdates) ? 'block' : 'none'}>\n                    <FormControl fullWidth>\n                      <TextField\n                        error={this.props.errors.invalidDeltaUpdateField}\n                        name=\"deltaUpdateField\"\n                        value={this.props.dataFeed.dataFeedConfig.deltaUpdateField}\n                        onChange={(event) => this.props.handleDataFeedOptions(event)}\n                        label=\"Updated Date Field Name\"\n                        InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Field name in your table that contains the timestamp tracking the last updated date, e.g. &quot;updated_at&quot;\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                      />\n                    </FormControl>\n                  </Box>\n\n                  <Box mt={4}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.props.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements}\n                          onChange={(event) => this.props.handleDataFeedOptions(event)}\n                          name=\"enablePostUpdatePreparedStatements\"\n                          color=\"primary\"\n                        />\n                      }\n                      label=\"Enable Custom Data Updates\"\n                    />\n                    <Box>\n                      Run custom SQL commands after your workflows run to make custom updates to your data. One use case for this is personalizing demos (e.g. to specify the name and logo of the company you are demoing to). To do so, you'll need to define a prepared SQL statement (i.e. an SQL command supporting parameters), as well as the values for these parameters.\n                    </Box>\n\n                    <Box mt={4} display={(this.props.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements) ? 'block' : 'none'}>\n                      <Box>\n                        As an example, in <code>UPDATE company SET name=%(company_name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s</code>, the three parameters in this prepared SQL statement are <code>company_name</code>, <code>logo</code>, and <code>company_id</code>. See below for the instructions for defining your prepared statements, and click on the <b>Add Parameter Value</b> button below these instructions to define the key/value pairs for each parameter in your prepared statement(s). For example, for the company_name parameter your parameter key would be <code>company_name</code>, and your parameter value: <code>Company we are demoing to</code>.\n                      </Box>\n\n                      <Box mt={4}>\n                        <Paper variant=\"outlined\">\n                          <ExpansionPanel>\n                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                              <Typography>Prepared Statement Setup Instructions</Typography>\n                            </ExpansionPanelSummary>\n                            <ExpansionPanelDetails>\n                              <Box>\n                                Prepared statements are SQL commands saved as Kubernetes secrets. Here is an example prepared statement: <code>UPDATE company SET name=%(name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s</code>. In this example <code>name</code>, <code>logo</code> and <code>company_id</code> are placeholder parameters requiring values, which you'll set below. Parameter key/value pairs are required rather than entire SQL commands for security reasons, and to make it easy for anybody in your company to change these values without running the risk of corrupting your data. To create this secret as per this example:<br/><br/>\n                                <code>kubectl create secret -n {this.getAgent().namespace} generic digital-twin --from-literal=prepared-statements=\"UPDATE company SET name=%(name)s, logo=%(logo)s WHERE source_primary_key=%(company_id)s;\"</code><br/><br/>\n                                Create your own prepared statements by replacing what is quoted here.<br/><br/>Multiple SQL commands are supported, separated by semicolons, and please note that the format of <code>%(your_variable)s</code> is required for all variable types (including non-strings) - the correct type will be automatically cast. All paraemters require that a value is provided.\n                              </Box>\n                            </ExpansionPanelDetails>\n                          </ExpansionPanel>\n                        </Paper>\n                      </Box>\n\n                      <Box mt={4}>\n                        <Table size=\"small\" style={{ width: 'auto' }}>\n                          <TableBody>\n                            {this.props.dataFeed.dataFeedConfig.postUpdateKeyValues.map((kv:PostUpdateParam, idx:number) => (\n                              <TableRow key={idx}>\n                                <TableCell style={{ paddingLeft: 0 }}>\n                                  <FormControl>\n                                    <TextField\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      name=\"parameterKey\"\n                                      value={kv.key}\n                                      onChange={(event) => this.props.updateParameterValue(idx, event)}\n                                      label=\"Parameter Key\"\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl>\n                                    <TextField\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      name=\"parameterValue\"\n                                      value={kv.value}\n                                      onChange={(event) => this.props.updateParameterValue(idx, event)}\n                                      label=\"Parameter Value\"\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={() => this.props.deleteParameterValue(idx)}>\n                                    <DeleteIcon />\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            ))}\n                          </TableBody>\n                        </Table>\n                        <Box mt={4}>\n                          <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.props.addParameterValue}>\n                            <AddIcon />&nbsp;&nbsp;Add Parameter Value\n                          </Button>\n                        </Box>\n                      </Box>\n                    </Box>\n                  </Box>\n                </Box>\n\n                <Box mt={8} display={(this.props.dataFeed.dataFeed === 's3upload') ? 'block' : 'none'}>\n                  <Typography variant=\"h4\" gutterBottom>\n                    Amazon S3 File Upload Options\n                  </Typography>\n\n                  <Box mt={8}>\n                    <Typography variant=\"h6\" gutterBottom>\n                      Data Files to Upload\n                    </Typography>\n\n                    <Grid container>\n                      <Grid item xs={8}>\n                        <Box mt={8}>\n                          <Paper variant=\"outlined\">\n                            <Box mt={4}>\n                              <Table>\n                                <TableHead>\n                                  <TableRow>\n                                    <TableCell><Checkbox onClick={this.props.addAllToS3UploadList} checked={this.props.dataFeed.dataFeedConfig.addAllS3Uploads} /> Add All Files</TableCell>\n                                    <TableCell align=\"left\">File</TableCell>\n                                  </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                {this.props.getS3UploadFileNames().map((f:string) => (\n                                  <TableRow key={f}>\n                                    <TableCell component=\"th\" scope=\"row\">\n                                      <Checkbox onClick={(event) => this.props.markAddToS3UploadList(event, f)} checked={!!(this.props.dataFeed.dataFeedConfig.uploadFileChecked && \n                                        this.props.dataFeed.dataFeedConfig.uploadFileChecked.includes(f))} />\n                                    </TableCell>\n                                    <TableCell align=\"left\">{f}</TableCell>\n                                  </TableRow>\n                                ))}\n                                </TableBody>\n                              </Table>\n                            </Box>\n                          </Paper>\n                        </Box>\n                      </Grid>\n                    </Grid>\n                  </Box>\n\n                  <Box mt={8}>\n                    <FormControl fullWidth variant=\"outlined\">\n                      <MedTextField\n                        name=\"S3UploadBucket\"\n                        error={this.props.errors.invalidBucketName}\n                        onChange={(event) => this.props.handleDataFeedOptions(event)}\n                        value={this.props.dataFeed.dataFeedConfig.S3UploadBucket}\n                        label=\"S3 Bucket\"\n                        InputProps={{\n                          startAdornment: <InputAdornment position=\"start\"><b>S3://</b></InputAdornment>,\n                        }}\n                      />\n                    </FormControl>\n                  </Box>\n                  \n                  <Box mt={8}>\n                    <Paper variant=\"outlined\">\n                      <ExpansionPanel>\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                          <Typography>Plugin Requirements</Typography>\n                        </ExpansionPanelSummary>\n                        <ExpansionPanelDetails>\n                          <p>\n                            This plugin requires an AWS access key ID and secret access key pair to authenticate to the provided bucket. Create an AWS credentials file in the style of the <code>~/.aws/credentials</code> example provided <Link href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html\" target=\"_blank\">here</Link> and run the following command to create a secret in your Kubernetes cluster namespace as the contents of this file:\n                          </p>\n                          <p>\n                            <code>\n                              kubectl create secret generic aws -n {this.props.agentNamespace || 'unknown_namespace'} --from-file=/path/to/aws/credentials\n                            </code>\n                          </p>\n                        </ExpansionPanelDetails>\n                      </ExpansionPanel>\n                    </Paper>\n                  </Box>\n                  \n                </Box>\n\n                <Box mt={8} display={(this.props.dataFeed.dataFeed === 'custom') ? 'block' : 'none'}>\n                  <Box>\n                    <Typography variant=\"h4\" gutterBottom>\n                      Custom Container/Plugin Configuration\n                    </Typography>\n\n                    <p>The filenames that will be exported are as follows: <b>{this.props.getS3UploadFileNames().join(', ')}</b>. Some documentation for developing your own custom container/plugin can be found on the <Link href=\"/developers\" target=\"_blank\">developers page</Link>.\n                    </p>\n                  </Box>\n\n                  <Box mt={4}>\n                    <MedTextField\n                      name=\"image\"\n                      error={this.props.errors.image}\n                      value={this.props.dataFeed.dataFeedConfig.image}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Docker Image\"\n                      placeholder=\"amazon/aws-cli\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Docker image URL (Dockerhub example: 'amazon/aws-cli')\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n                  <Box mt={4}>\n                    <MedTextField\n                      name=\"tag\"\n                      error={this.props.errors.tag}\n                      value={this.props.dataFeed.dataFeedConfig.tag}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Docker Image Tag\"\n                      placeholder=\"latest\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Image tag/version (e.g. 'latest', '5.0.0')\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n                  <Box mt={4}>\n                    <MedTextField\n                      name=\"shell\"\n                      error={this.props.errors.shell}\n                      value={this.props.dataFeed.dataFeedConfig.shell}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Shell Path\"\n                      placeholder=\"/bin/bash\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Custom container commands will be prefaced with this shell path, i.e. <shell path> -c '<command>' '<args>'\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n                  <Box mt={4}>\n                    <WideTextField\n                      name=\"command\"\n                      multiline\n                      rowsMax=\"4\"\n                      value={this.props.dataFeed.dataFeedConfig.command}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Command (optional)\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Optional command to override container default, in Docker this field name is 'entrypoint'.\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n\n                  <Box mt={4}>\n                    <WideTextField\n                      name=\"args\"\n                      multiline\n                      rowsMax=\"4\"\n                      value={this.props.dataFeed.dataFeedConfig.args}\n                      onChange={(event) => this.props.handleDataFeedOptions(event)}\n                      label=\"Args (optional)\"\n                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Optional command to override container default, in Docker this field name is 'cmd'.\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                    />\n                  </Box>\n\n                  <Button variant=\"contained\" color=\"secondary\" mt={4} size=\"small\" onClick={() => { this.props.addSecret('volume'); }}>\n                    <HardDriveIcon />&nbsp;\n                    Attach Secret Disk/Volume to Container\n                  </Button>&nbsp;<Button variant=\"contained\" color=\"secondary\" mt={4} size=\"small\" onClick={() => { this.props.addSecret('env'); }}>\n                    <CodeIcon />&nbsp;\n                    Attach Environment Variable to Container\n                  </Button>\n\n                  <Box mt={8}>\n                    {namespaceTip}\n                    <Table size=\"small\" style={{ width: 'auto' }}>\n                      <TableBody>\n                        {this.props.dataFeed.feedSecrets.map((secret:CustomSecret, idx:number) => {\n                          if (secret.secretType === 'volume') {\n                            return (\n                              <TableRow key={idx}>\n                                <TableCell style={{ paddingLeft: 0 }}>\n                                  <HardDriveIcon />\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretName\"\n                                      value={secret.secretName}\n                                      label=\"Secret Name\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret name as it appears in 'kubectl get secrets'\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretKey\"\n                                      value={secret.secretKey}\n                                      label=\"Secret Key\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret key contained within this secret\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretPath\"\n                                      value={secret.secretPath}\n                                      label=\"Secret Container Path\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Path to mount this secret within your container\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <Button variant=\"contained\" size=\"small\" color=\"secondary\" onClick={() => this.props.handleDeleteSecret(idx)}>\n                                    <DeleteIcon />&nbsp;&nbsp;Delete\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            );\n                          }\n                          if (secret.secretType === 'env') {\n                            return (\n                              <TableRow>\n                                <TableCell style={{ paddingLeft: 0 }}>\n                                  <CodeIcon />\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretName\"\n                                      value={secret.secretName}\n                                      label=\"Secret Name\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret name as it appears in 'kubectl get secrets'\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"secretKey\"\n                                      value={secret.secretKey}\n                                      label=\"Secret Key\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Kubernetes secret key contained within this secret\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <FormControl fullWidth>\n                                    <TextField\n                                      name=\"envName\"\n                                      value={secret.envName}\n                                      label=\"Variable Name\"\n                                      variant=\"outlined\"\n                                      margin=\"dense\"\n                                      onChange={(event) => this.props.handleCustomSecret(event, idx)}\n                                      InputProps={{ endAdornment: <InputAdornment position=\"end\"><Tooltip title=\"Environment variable name to be presented to this container, often in all caps\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n                                    />\n                                  </FormControl>\n                                </TableCell>\n                                <TableCell>\n                                  <Button variant=\"contained\" size=\"small\" color=\"secondary\" onClick={() => this.props.handleDeleteSecret(idx)}>\n                                    <DeleteIcon />&nbsp;&nbsp;Delete\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            );\n                          }\n\n                          return null;\n                        })}\n                      </TableBody>\n                    </Table>\n                  </Box>\n              </Box>\n              </DialogContentText>\n\n              <DialogActions>\n                <Box display={(this.props.dataFeed.dataFeed !== '') ? 'block' : 'none'}>\n                  <Button\n                    color=\"default\"\n                    variant=\"contained\"\n                    onClick={this.props.handleDataFeedBack}\n                  >\n                    Back\n                  </Button>&nbsp;\n                  <Button\n                    color=\"secondary\"\n                    variant=\"contained\"\n                    onClick={this.props.saveDataFeedChanges}\n                  >\n                    Update\n                  </Button>\n                </Box>\n                <Box display={(this.props.dataFeed.dataFeed === '') ? 'block' : 'none'}>\n                  <Button color=\"secondary\" onClick={this.props.handleDataFeedCancel}>\n                    Cancel\n                  </Button>\n                </Box>\n              </DialogActions>\n            </DialogContent>\n          </Dialog>\n\n          <Grid container>\n            <Grid item xs={8}>\n              <Typography variant=\"body1\" gutterBottom>\n                Data feeds provide several options for populating and/or syncing data with your No PII Zone on a recurring basis and sharing data with your internal and external stakeholders. With or without a data feed you can retrieve output files via the <code>Download Export</code> command provided by the <Link href=\"/developers\" target=\"_blank\">Redactics Agent CLI</Link>.\n              </Typography>\n            </Grid>\n          </Grid>\n\n          <Box mt={8}>\n            {this.outputTable()}\n          </Box>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WorkflowPostExport;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { spacing } from '@material-ui/system';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nimport {\n  TextField as MuiTextField,\n  FormControl as MuiFormControl,\n  Button,\n  Box,\n  Select,\n  MenuItem,\n  Tooltip,\n  InputAdornment,\n  InputLabel,\n  Paper,\n  ExpansionPanel,\n  ExpansionPanelDetails as MuiExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n} from '@material-ui/core';\n\nimport {\n  HelpOutline as HelpIcon,\n  ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\n\nimport {\n  Clipboard as ClipboardIcon,\n} from 'react-feather';\n\nimport { WorkflowRecord } from '../../types/redactics';\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 200px;\n`;\n\nconst ExpansionPanelDetails = withStyles({\n  root: {\n    display: 'block',\n  },\n})(MuiExpansionPanelDetails);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable no-useless-escape */\n\ninterface IProps {\n  workflow: WorkflowRecord;\n  handleWFChanges: any;\n  classes: any;\n  inputs: any;\n  agentNamespace: string;\n  clipboardCopy: any;\n}\n\ninterface IState {\n\n}\n\nclass DatabaseMigrationSetup extends React.Component<IProps, IState> {\n  render() {\n    const helmHook = `\n{{- if .Values.global.databaseMigrations.mock }}\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: trigger-db-migration-mock-{{ .Release.Revision }}\n  namespace: ${this.props.workflow.migrationNamespace || \"default\"}\n  annotations:\n    \"helm.sh/hook\": pre-upgrade\n    \"helm.sh/hook-weight\": \"${this.props.workflow.migrationHelmHookWeight || \"0\"}\"\n    \"helm.sh/hook-delete-policy\": hook-succeeded\nspec:\n  template:\n    spec:\n      restartPolicy: Never\n      containers:\n        - name: trigger-db-migration-mock\n          image: redactics/airflow-dagrun-poller:1.1.0\n          imagePullPolicy: Always\n          args:\n          - bash\n          - -c\n          - |\n              DAG_RUN_ID=$(curl -s -X POST -d \"{\\\\\"workflowType\\\\\": \\\\\"mockDatabaseMigration\\\\\", \\\\\"workflowId\\\\\": \\\\\"\\${WORKFLOW_ID}\\\\\"}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" \\${REDACTICS_API_URL}/workflow/jobs | jq -r '.uuid')\n              curl -s -X POST -H \"Authorization: Basic \\${BASIC_AUTH}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d \"{\\\\\"dag_run_id\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\", \\\\\"conf\\\\\": {\\\\\"workflowJobId\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\"}}\" \\${API_URL}/api/v1/dags/\\${DAG_ID}/dagRuns\n              TAIL_TASK_ID=clone-db DAG_RUN_ID=\\${DAG_RUN_ID} /poller.sh\n              if [ $? -ne 0 ]; then\n                exit 1\n              fi\n          env:\n          - name: REDACTICS_API_URL\n            value: http://agent-api.svc.cluster.local\n          - name: API_URL\n            value: http://agent-webserver.${this.props.agentNamespace}.svc.cluster.local:8080\n          - name: DAG_ID\n            value: ${this.props.workflow.uuid}-migrationmocking\n          - name: WORKFLOW_ID\n            value: ${this.props.workflow.uuid}\n          - name: BASIC_AUTH\n            valueFrom:\n              secretKeyRef:\n                name: agent\n                key: basic-auth\n{{- end }}`\n\n    const script = `\n#!/bin/bash\n\n# change values as necessary, this script will work when running inside a Kubernetes container, and when the\n# BASIC_AUTH variable is set outside of this script from values stored as Kubernetes secrets.\n# The open source libraries \"curl\" and \"jq\" must be available within this environment, in addition to the poller.sh script.\n\nexport REDACTICS_API_URL=http://agent-api.svc.cluster.local\nexport API_URL=http://agent-webserver.${this.props.agentNamespace}.svc.cluster.local:8080\nexport DAG_ID=${this.props.workflow.uuid}-migrationmocking\nexport WORKFLOW_ID=${this.props.workflow.uuid}\nexport POLLER_PATH=/poller.sh\n\nDAG_RUN_ID=$(curl -s -X POST -d \"{\\\\\"workflowType\\\\\": \\\\\"mockDatabaseMigration\\\\\", \\\\\"workflowId\\\\\": \\\\\"\\${WORKFLOW_ID}\\\\\"}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" \\${REDACTICS_API_URL}/workflow/jobs | jq -r '.uuid')\ncurl -s -X POST -H \"Authorization: Basic \\${BASIC_AUTH}\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d \"{\\\\\"dag_run_id\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\", \\\\\"conf\\\\\": { \\\\\"workflowJobId\\\\\": \\\\\"\\${DAG_RUN_ID}\\\\\"}}\" \\${API_URL}/api/v1/dags/\\${DAG_ID}/dagRuns\nTAIL_TASK_ID=clone-db DAG_RUN_ID=\\${DAG_RUN_ID} \\${POLLER_PATH}\n    `\n    \n    return (\n      <React.Fragment>\n        <Box>\n          Performing a dry run of your migrations requires your adding a step to your CI/CD pipeline (or manual deployment process) to trigger a workflow included in the Redactics Agent. This workflow clones your database to prepare for your database migration dry-run against this clone. Once this step is complete you can then run your migration using an environment variable to override your database that would normally be used with your cloned database.\n        </Box>\n\n        <Box mt={4}>\n          One way to put together a complete working flow is to add some sort of flag in your CI/CD workflow that triggers this alteration to your normal workflow when this database migration dry-run option is selected, followed by the database migration against the clone. This can be done by triggering a script that runs on your server hosting your app, or if your database migration is triggered via a Kubernetes Helmchart hook, adding an additional hook that runs before your normal migration hook.\n        </Box>\n\n        <Box mt={4}>\n          Using the values you provide here, we will generate the code needed to perform this additional step (prior to your normal database migration) which you can customize as needed. We will also generate an authentication token for the REST API embedded into the Redactics Agent. This secret will be installed into your Kubernetes namespace (as you've provided below) the next time you upgrade your Redactics Agent software.\n        </Box>\n\n        <Box mt={8}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationNamespace}\n              name=\"migrationNamespace\"\n              label=\"Kubernetes Namespace\"\n              value={this.props.workflow.migrationNamespace}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Kubernetes namespace where your database migrations run\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={4}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationDatabase}\n              name=\"migrationDatabase\"\n              label=\"Database Name\"\n              value={this.props.workflow.migrationDatabase}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Database name of database that should be cloned\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={4}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationDatabaseClone}\n              name=\"migrationDatabaseClone\"\n              label=\"Cloned Database Name\"\n              value={this.props.workflow.migrationDatabaseClone}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Database name for your clone\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={4}>\n          <FormControl fullWidth>\n            <InputLabel htmlFor=\"agent\">Generate Configuration For</InputLabel>\n            <Select\n              //error={this.props.errors.migrationConfiguration}\n              name=\"migrationConfiguration\"\n              value={this.props.workflow.migrationConfiguration}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n            >\n              <MenuItem key=\"helmhook\" value=\"helmhook\">Sample Helmchart Hook</MenuItem>\n              <MenuItem key=\"script\" value=\"script\">Sample Script</MenuItem>\n            </Select>\n          </FormControl>\n        </Box>\n\n        <Box mt={4} display={(this.props.workflow.migrationConfiguration === \"helmhook\") ? \"block\" : \"none\"}>\n          <FormControl fullWidth>\n            <TextField\n              //error={this.props.errors.migrationDatabaseClone}\n              name=\"migrationHelmHookWeight\"\n              type=\"number\"\n              label=\"Helmchart Hook Weight\"\n              value={this.props.workflow.migrationHelmHookWeight || \"0\"}\n              onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n              InputProps={{ endAdornment: <InputAdornment className={this.props.classes.selectAdornment} position=\"end\"><Tooltip title=\"Helmchart hook weight (hooks are executed in ascending order)\" placement=\"right-start\"><HelpIcon /></Tooltip></InputAdornment> }}\n            />\n          </FormControl>\n        </Box>\n\n        <Box mt={8} display={(this.props.workflow.migrationConfiguration === \"helmhook\") ? \"block\" : \"none\"}>\n          <Paper variant=\"outlined\">\n            <ExpansionPanel>\n              <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography>Sample Helmchart Hook</Typography>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails>\n                <Box>\n                  <CopyToClipboard text={helmHook} onCopy={() => this.props.clipboardCopy(\"sampleMigrationHook\")}>\n                    <Button variant=\"outlined\" size=\"small\" color=\"secondary\"><ClipboardIcon /></Button>\n                  </CopyToClipboard>\n                </Box>\n                <Box mt={2}>\n                  <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-all' }}>\n                    {helmHook}\n                  </pre>\n                </Box>\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          </Paper>\n        </Box>\n\n        <Box mt={8} display={(this.props.workflow.migrationConfiguration === \"script\") ? \"block\" : \"none\"}>\n          <Paper variant=\"outlined\">\n            <ExpansionPanel>\n              <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography>Sample Script</Typography>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails>\n                <Box>\n                  <CopyToClipboard text={script} onCopy={() => this.props.clipboardCopy(\"sampleMigrationScript\")}>\n                    <Button variant=\"outlined\" size=\"small\" color=\"secondary\"><ClipboardIcon /></Button>\n                  </CopyToClipboard>\n                </Box>\n                <Box mt={2}>\n                  <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-all' }}>\n                    {script}\n                  </pre>\n                </Box>\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          </Paper>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(DatabaseMigrationSetup);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\n// import { red, green, blue } from \"@material-ui/core/colors\";\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nimport {\n  Card as MuiCard,\n  CardContent,\n  Grid as MuiGrid,\n  Typography,\n  Button as MuiButton,\n  Box,\n  Snackbar,\n  IconButton,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Paper,\n  ExpansionPanel,\n  ExpansionPanelDetails as MuiExpansionPanelDetails,\n  ExpansionPanelSummary,\n  FormControl as MuiFormControl,\n  InputLabel,\n  Select as MuiSelect,\n  MenuItem,\n} from '@material-ui/core';\n\nimport {\n  ExpandMore as ExpandMoreIcon,\n  DeleteOutline as DeleteIcon,\n  Close as CloseIcon,\n} from '@material-ui/icons';\n\nimport {\n  Save as SaveIcon,\n  Clipboard as ClipboardIcon,\n} from 'react-feather';\n\nimport { spacing } from '@material-ui/system';\nimport RedacticsContext from '../../contexts/RedacticsContext';\n\nimport WorkflowRedactionRules from './WorkflowRedactionRules';\nimport WorkflowInputs from './WorkflowInputs';\nimport WorkflowSchedule from './WorkflowSchedule';\nimport WorkflowExport from './WorkflowExport';\nimport WorkflowPostExport from './WorkflowPostExport';\nimport DatabaseMigrationSetup from './DatabaseMigrationSetup';\n\nimport {\n  RedactRule, CustomSecret, WorkflowRecord, WorkflowUpdate, PostUpdateParam,\n  AgentRecord, RedactRulePreset, RedactRuleSet, DataFeed, InputRecord, AgentInputRecord, \n  WorkflowInputRecord,\n} from '../../types/redactics';\n\nconst Card = styled(MuiCard)(spacing);\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 200px;\n  max-width: 200px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst ExpansionPanelDetails = withStyles({\n  root: {\n    display: 'block',\n  },\n})(MuiExpansionPanelDetails);\n\ninterface IProps {\n  deleteWorkflow: any;\n  handleWFChanges: any;\n  workflow: WorkflowRecord;\n  agentInputs: AgentInputRecord[];\n  allInputs: InputRecord[];\n  agents: AgentRecord[];\n  presets?: RedactRulePreset[];\n  redactrulesets: RedactRuleSet[];\n  redactrules?: RedactRule[];\n  classes: any;\n}\n\ninterface IState {\n  errors: any;\n  agentId: string;\n  saveButtonDisabled: boolean;\n  agentNamespace?: string;\n  addAllS3Uploads: boolean;\n  S3UploadBucket: string;\n  tableOutputOptions: any;\n  constraintSchema: string;\n  constraintTable: string;\n  exportTableSchemaAll: boolean;\n  exportTableDataAll: boolean;\n  S3UploadFileChecked: string[];\n  exportTableDataConfig: any;\n  displayExportTableData: string;\n  displayExportTableSchema: string;\n  customSchedule: boolean;\n  scheduleSelection: string;\n  schedule: string;\n  exportSchedule: boolean;\n  maskingRuleValues: RedactRule[];\n  maskingRules: RedactRule[];\n  numMaskingRules: number;\n  newRuleKey: number;\n  input: WorkflowInputRecord;\n  inputs: WorkflowInputRecord[];\n  dataFeed: DataFeed;\n  dataFeeds: DataFeed[];\n  newInputKey: number;\n  newDataFeedKey: number;\n  addTable: string;\n  transformExpanded: boolean;\n  outputExpanded: boolean;\n  allDatabaseTables: string[];\n  currentDatabaseTable: string;\n  numInputs: number;\n  workflowType: string;\n  deltaUpdateField: string;\n  snackbarText: string;\n  // dialog toggles\n  showDialog: boolean;\n  showSnackbar: boolean;\n  helmReminderCheckbox: boolean;\n  showHelmReminder: boolean;\n  validDiskSize: boolean;\n  validName: boolean;\n  validSchedule: boolean;\n  missingSecretField: boolean;\n  invalidOutputSettingField: boolean;\n  missingPostExportHookField: boolean;\n  missingSchemaSelection: boolean;\n  dupeTableExportFound: boolean;\n  dupeRedactRuleFound: boolean;\n  completeRedactRules: boolean;\n  deleteWorkflowConfirmation: boolean;\n  showLastReportedError: boolean;\n  ackHelmReminder: boolean;\n  orphanedWorkflow: boolean;\n  editInputDialog: boolean;\n  showSnackbarEdit: boolean;\n  showOutputOptions: boolean;\n  editDataFeed: boolean;\n  columnExclusionProhibited: boolean;\n  invalidForgetUserFields: boolean;\n  invalidMigrationFields: boolean;\n  digitalTwinAdded: boolean;\n  // snackbar toggles\n  showClipboardSnackbar: boolean;\n}\n\nclass Workflow extends React.Component<IProps, IState> {\n  static contextType = RedacticsContext;\n\n  constructor(props:IProps) {\n    super(props);\n\n    this.saveChanges = this.saveChanges.bind(this);\n    this.hideHelmReminder = this.hideHelmReminder.bind(this);\n    this.toggleHelmReminder = this.toggleHelmReminder.bind(this);\n    this.addMaskingRule = this.addMaskingRule.bind(this);\n    this.deleteMaskingRule = this.deleteMaskingRule.bind(this);\n    this.handleRuleChange = this.handleRuleChange.bind(this);\n    this.showLastReportedError = this.showLastReportedError.bind(this);\n    this.hideLastReportedError = this.hideLastReportedError.bind(this);\n    this.addSecret = this.addSecret.bind(this);\n    this.handleDeleteSecret = this.handleDeleteSecret.bind(this);\n    this.hideErrorDialog = this.hideErrorDialog.bind(this);\n    this.handleExportSchedule = this.handleExportSchedule.bind(this);\n    this.handleSchedule = this.handleSchedule.bind(this);\n    this.handleDeltaUpdate = this.handleDeltaUpdate.bind(this);\n    this.handleCustomSecret = this.handleCustomSecret.bind(this);\n    this.validateRedactionRules = this.validateRedactionRules.bind(this);\n    this.handleTableOutputChanges = this.handleTableOutputChanges.bind(this);\n    this.deleteWorkflowConfirmation = this.deleteWorkflowConfirmation.bind(this);\n    this.cancelWorkflowConfirmation = this.cancelWorkflowConfirmation.bind(this);\n    this.clipboardCopy = this.clipboardCopy.bind(this);\n    this.handleSnackbarClose = this.handleSnackbarClose.bind(this);\n    this.markAddToS3UploadList = this.markAddToS3UploadList.bind(this);\n    this.addAllToS3UploadList = this.addAllToS3UploadList.bind(this);\n    this.getExportFileNames = this.getExportFileNames.bind(this);\n    this.saveInputChanges = this.saveInputChanges.bind(this);\n    this.triggerEditInputDialog = this.triggerEditInputDialog.bind(this);\n    this.handleInputChanges = this.handleInputChanges.bind(this);\n    this.selectInputSource = this.selectInputSource.bind(this);\n    this.handleAddTable = this.handleAddTable.bind(this);\n    this.triggerAddTable = this.triggerAddTable.bind(this);\n    this.hideInputDialog = this.hideInputDialog.bind(this);\n    this.deleteDatabaseTable = this.deleteDatabaseTable.bind(this);\n    this.deleteWorkflow = this.deleteWorkflow.bind(this);\n    this.transformExpansion = this.transformExpansion.bind(this);\n    this.triggerOutputOptions = this.triggerOutputOptions.bind(this);\n    this.deleteConstraint = this.deleteConstraint.bind(this);\n    this.hideOutputOptions = this.hideOutputOptions.bind(this);\n    this.genConstraintSummary = this.genConstraintSummary.bind(this);\n    this.addDataFeed = this.addDataFeed.bind(this);\n    this.hideDataFeed = this.hideDataFeed.bind(this);\n    this.handleDataFeed = this.handleDataFeed.bind(this);\n    this.addParameterValue = this.addParameterValue.bind(this);\n    this.updateParameterValue = this.updateParameterValue.bind(this);\n    this.deleteParameterValue = this.deleteParameterValue.bind(this);\n    this.handleDataFeedBack = this.handleDataFeedBack.bind(this);\n    this.handleDataFeedCancel = this.handleDataFeedCancel.bind(this);\n    this.getS3UploadFileNames = this.getS3UploadFileNames.bind(this);\n    this.handleDataFeedOptions = this.handleDataFeedOptions.bind(this);\n    this.saveDataFeedChanges = this.saveDataFeedChanges.bind(this);\n    this.triggerEditDataFeed = this.triggerEditDataFeed.bind(this);\n    this.deleteDataFeed = this.deleteDataFeed.bind(this);\n    this.resetDataFeedErrors = this.resetDataFeedErrors.bind(this);\n    this.addTableSelection = this.addTableSelection.bind(this);\n    this.deleteTableSelection = this.deleteTableSelection.bind(this);\n    //this.saveFeedback = this.saveFeedback.bind(this);\n\n    const maskingRuleValues:RedactRule[] = [];\n    if (this.props.workflow.redactrules && this.props.workflow.redactrules.length) {\n      this.props.workflow.redactrules.forEach((rule:RedactRule) => {\n        maskingRuleValues.push({\n          key: rule.uuid,\n          table: rule.table,\n          databaseTable: rule.databaseTable,\n          column: rule.column,\n          rule: rule.rule,\n          presetUuid: rule.presetUuid,\n        });\n      });\n    }\n\n    const thisAgentSearch = this.props.agents.find(\n      (a:AgentRecord) => ((a.uuid === this.props.workflow.agentId)),\n    );\n    const agentNamespace = (thisAgentSearch) ? thisAgentSearch.namespace : '';\n\n    const state:IState = {\n      agentId: this.props.workflow.agentId,\n      newRuleKey: 0,\n      transformExpanded: (this.props.workflow.allDatabaseTables && this.props.workflow.allDatabaseTables.length) ? true : false,\n      outputExpanded: false,\n      allDatabaseTables: this.props.workflow.allDatabaseTables,\n      saveButtonDisabled: false,\n      showHelmReminder: false,\n      helmReminderCheckbox: false,\n      showLastReportedError: false,\n      maskingRules: [],\n      maskingRuleValues,\n      completeRedactRules: true,\n      dupeRedactRuleFound: false,\n      dupeTableExportFound: false,\n      missingSchemaSelection: false,\n      missingSecretField: false,\n      invalidOutputSettingField: false,\n      missingPostExportHookField: false,\n      validSchedule: true,\n      validName: true,\n      validDiskSize: true,\n      numMaskingRules: maskingRuleValues.length,\n      exportSchedule: !!((this.props.workflow.schedule && this.props.workflow.schedule !== 'None')),\n      scheduleSelection: (this.props.workflow.schedule && !this.props.workflow.schedule.match(/^@/) && this.props.workflow.schedule !== 'None') ? 'custom' : this.props.workflow.schedule || '',\n      customSchedule: !!((this.props.workflow.schedule && !this.props.workflow.schedule.match(/^@/) && this.props.workflow.schedule !== 'None')),\n      schedule: this.props.workflow.schedule || 'None',\n      tableOutputOptions: {\n        errors: {},\n        numDays: 30,\n        sampleFields: \"createdAndUpdated\",\n        createdAtField: \"created_at\",\n        updatedAtField: \"updated_at\",\n      },\n      constraintSchema: \"public\",\n      constraintTable: \"\",\n      exportTableDataConfig: [],\n      addTable: '',\n      displayExportTableSchema: 'none',\n      displayExportTableData: 'none',\n      showClipboardSnackbar: false,\n      agentNamespace,\n      S3UploadFileChecked: [],\n      S3UploadBucket: '',\n      errors: {\n        schedule: false,\n        name: false,\n        diskSize: false,\n        duplicateDataFeed: false,\n      },\n      input: {\n        uuid: \"\",\n        inputName: \"\",\n        enabled: true,\n        tables: [],\n        tableSelection: \"all\"\n      },\n      inputs: this.props.workflow.inputs,\n      numInputs: this.props.workflow.inputs.length,\n      dataFeed: {\n        uuid: \"\",\n        dataFeed: \"\",\n        dataFeedConfig: {\n          uploadFileChecked: [],\n          addAllS3Uploads: false,\n          s3Bucket: \"\",\n          postUpdateKeyValues: []\n        },\n        feedSecrets: [],\n      },\n      dataFeeds: this.props.workflow.datafeeds,\n      editInputDialog: false,\n      showDialog: false,\n      showSnackbarEdit: false,\n      newInputKey: 0,\n      newDataFeedKey: 0,\n      addAllS3Uploads: false,\n      exportTableSchemaAll: false,\n      exportTableDataAll: false,\n      showSnackbar: false,\n      deleteWorkflowConfirmation: false,\n      ackHelmReminder: false,\n      orphanedWorkflow: false,\n      currentDatabaseTable: \"\",\n      showOutputOptions: false,\n      editDataFeed: false,\n      columnExclusionProhibited: false,\n      invalidForgetUserFields: false,\n      invalidMigrationFields: false,\n      digitalTwinAdded: false,\n      workflowType: '',\n      deltaUpdateField: this.props.workflow.deltaUpdateField || \"\",\n      snackbarText: \"\"\n    };\n\n    if (Object.keys(this.props.workflow.exportTableDataConfig).length) {\n      for (const config in this.props.workflow.exportTableDataConfig) {\n        state.exportTableDataConfig.push({\n          table: config,\n          numDays: this.props.workflow.exportTableDataConfig[config].numDays,\n          sampleFields: this.props.workflow.exportTableDataConfig[config].sampleFields,\n          createdAtField: this.props.workflow.exportTableDataConfig[config].createdAtField,\n          updatedAtField: this.props.workflow.exportTableDataConfig[config].updatedAtField,\n        })\n      }\n    }\n\n    this.props.redactrulesets.forEach((rule:RedactRuleSet) => {\n      state.maskingRules.push({\n        table: '',\n        databaseTable: '',\n        column: '',\n        rule: '',\n        key: rule.redactKey,\n        val: rule.redactName,\n      });\n    });\n\n    if (this.props.presets && this.props.presets.length) {\n      this.props.presets.forEach((preset:RedactRulePreset) => {\n        if (!preset.isDefault) {\n          state.maskingRules.push({\n            table: '',\n            databaseTable: '',\n            column: '',\n            rule: '',\n            key: `preset-${preset.uuid}`,\n            val: `Preset: ${preset.presetName}`,\n            presetUuid: preset.uuid,\n          });\n        }\n      });\n    }\n\n    // look for orphaned workflows\n    if (this.props.workflow.workflowType === \"ERL\" && !this.props.workflow.agentId) {\n      state.orphanedWorkflow = true;\n    }\n\n    // init state\n    this.state = state;\n  }\n\n  componentDidMount() {\n    // copy context data into component state\n    this.setState({\n      ackHelmReminder: this.context.ackHelmReminder,\n    });\n  }\n\n  clipboardCopy(copied:string) {\n    let copiedText:string = \"\";\n    switch (copied) {\n      case 'dbuuid':\n      copiedText = \"This workflow UUID has been copied to your clipboard\";\n      break;\n\n      case 'sampleMigrationHook':\n      copiedText = \"This sample Helmchart hook has been copied to your clipboard\";\n      break;\n\n      case 'sampleMigrationScript':\n      copiedText = \"This sample script has been copied to your clipboard\";\n      break;\n    }\n    this.setState({\n      showClipboardSnackbar: true,\n      snackbarText: copiedText,\n    });\n  }\n\n  handleRuleChange(key:string, event:any) {\n    const { maskingRuleValues } = this.state;\n    const values = this.state.maskingRuleValues.filter((value:RedactRule) => value.key === key);\n\n    maskingRuleValues.map((row:RedactRule) => {\n      if (row.key === key && event.target.name === 'databaseTable') {\n        values[0].databaseTable = event.target.value;\n      } else if (row.key === key && event.target.name === 'column') {\n        values[0].column = event.target.value;\n      } else if (row.key === key && event.target.name === 'rule') {\n        values[0].rule = event.target.value;\n        if (event.target.value.match(/^preset-/)) {\n          const preset = this.state.maskingRules.filter((mr:RedactRule) => {\n            if (mr.key === event.target.value) {\n              return mr;\n            }\n\n            return false;\n          });\n          values[0].presetUuid = preset[0].presetUuid;\n        } else {\n          values[0].presetUuid = '';\n        }\n      }\n\n      return values;\n    });\n\n    this.setState({\n      maskingRuleValues,\n    });\n\n    // console.log(maskingRuleValues)\n  }\n\n  async saveChanges(workflowId:string) {\n    // console.log(this.state);\n\n    this.setState({\n      saveButtonDisabled: true,\n      errors: {},\n    });\n\n    // prep exportTableDataConfig\n    let exportTableDataConfig:any = {};\n    this.state.exportTableDataConfig.forEach((c:any) => {\n      const config = c;\n      delete config.errors;\n      exportTableDataConfig[config.table] = config;\n    });\n\n    const payload:WorkflowUpdate = {\n      name: this.props.workflow.name,\n      agentId: this.props.workflow.agentId,\n      workflowType: this.props.workflow.workflowType,\n      inputs: this.state.inputs,\n      dataFeeds: this.state.dataFeeds,\n      maskingRules: this.state.maskingRuleValues,\n      schedule: this.state.schedule,\n      exportTableDataConfig,\n      deltaUpdateField: this.state.deltaUpdateField,\n      migrationNamespace: this.props.workflow.migrationNamespace,\n      migrationDatabase: this.props.workflow.migrationDatabase,\n      migrationDatabaseClone: this.props.workflow.migrationDatabaseClone,\n      migrationConfiguration: this.props.workflow.migrationConfiguration,\n      migrationHelmHookWeight: this.props.workflow.migrationHelmHookWeight,\n    };\n\n    //console.log('PAYLOAD', payload);\n    //console.log(this.state);\n\n    if (this.validateRedactionRules() && this.validateMigrationMockFields()) {\n      try {\n        const response = await fetch(`${this.context.apiUrl}/workflow/${workflowId}`, {\n          method: 'put',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(payload),\n        });\n\n        this.setState({\n          saveButtonDisabled: false,\n        });\n\n        const data = await response.json();\n\n        if (data.errors) {\n          let invalidSchedule:boolean = false;\n          let orphanedWorkflow:boolean = false;\n          let columnExclusion:boolean = false;\n          const invalidScheduleError = \"Invalid schedule\";\n          const orphanedWorkflowError = \"Invalid agent ID\";\n          const columnExclusionError = \"Data feed does not permit column exclusion\";\n          \n          if (Array.isArray(data.errors)) {\n            // multiple errors found\n            invalidSchedule = data.errors.find((e:any) => ((e.msg === invalidScheduleError)));\n            orphanedWorkflow = data.errors.find((e:any) => ((e.msg === orphanedWorkflowError) && e.param === 'agentId'));\n            columnExclusion = data.errors.find((e:any) => ((e.msg === columnExclusionError)));\n          }\n          else {\n            // single error returned as string\n            invalidSchedule = (data.errors === invalidScheduleError) ? true : false;\n            orphanedWorkflow = (data.errors === orphanedWorkflowError) ? true : false;\n            columnExclusion = (data.errors === columnExclusionError) ? true : false;\n          }\n          if (invalidSchedule) {\n            this.setState({\n              validSchedule: false,\n              errors: {\n                schedule: true,\n              },\n            });\n          } else if (orphanedWorkflow) {\n            this.setState({\n              orphanedWorkflow: true,\n              errors: {\n                agentId: true,\n              },\n            });\n          } else if (columnExclusion) {\n            this.setState({\n              columnExclusionProhibited: true,\n            });\n          }\n          return;\n        }\n\n        // attach new redact rule UUIDs to state\n        const maskingRuleValues = this.state.maskingRuleValues.map((r:RedactRule, idx:number) => {\n          const rule = r;\n          rule.key = data.redactRuleUuids[idx];\n          return rule;\n        });\n\n        this.setState({\n          showDialog: (data.updateHelmConfig) ? true : false,\n          showSnackbar: (data.updateHelmConfig) ? false : true,\n          maskingRuleValues,\n          saveButtonDisabled: false,\n          numInputs: this.state.inputs.length,\n        });\n      } catch (err) {\n        // console.log('CATCH ERR', error);\n\n        this.setState({\n          saveButtonDisabled: false,\n        });\n      }\n    } else {\n      this.setState({\n        saveButtonDisabled: false,\n      });\n    }\n  }\n\n  async hideHelmReminder() {\n    if (this.state.helmReminderCheckbox) {\n      // record acknowledgement of reminder (for embedded agent config feature)\n      await fetch(`${this.context.apiUrl}/workflow/ackReminder`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      this.setState({\n        ackHelmReminder: true,\n        showDialog: false,\n      });\n    } else {\n      this.setState({\n        showDialog: false,\n      });\n    }\n  }\n\n  toggleHelmReminder(event:any) {\n    this.setState({\n      helmReminderCheckbox: event.target.checked,\n    });\n  }\n\n  missingInput() {\n    let tablesProvided = false;\n    const inputs = this.props.workflow.inputs.find((input:WorkflowInputRecord) => {\n      if (input.tables && input.tables.length) { tablesProvided = true; }\n      return (input.enabled === true)\n    });\n    return (inputs && tablesProvided) ? false : true;\n  }\n\n  validateRedactionRules() {\n    // skip validation if GUI disabled\n    if (this.missingInput()) { return true; }\n\n    const rules:string[] = [];\n    let dupeRedactRuleFound = false;\n\n    const validFields = this.state.maskingRuleValues.filter((rule:RedactRule) => {\n      let missingFields:number = 0;\n\n      if (rules.includes(`${rule.databaseTable}.${rule.column}`)) {\n        dupeRedactRuleFound = true;\n      } else {\n        rules.push(`${rule.databaseTable}.${rule.column}`);\n      }\n\n      if (!rule.databaseTable) { missingFields++; }\n      if (!rule.column) { missingFields++; }\n      if (!rule.rule) { missingFields++; }\n\n      if (missingFields === 1 || missingFields === 2 || !this.legalName(rule.column)) {\n        // allow blanks and complete sets\n        return rule;\n      }\n\n      return false;\n    });\n\n    const validRules = !((validFields.length || dupeRedactRuleFound));\n    const completeRedactRules = !validFields.length;\n\n    this.setState({\n      completeRedactRules,\n      dupeRedactRuleFound,\n    });\n    return validRules;\n  }\n\n  validateMigrationMockFields() {\n    if (this.props.workflow.workflowType === \"mockDatabaseMigration\") {\n      if (!this.props.workflow.migrationNamespace || !this.props.workflow.migrationDatabase || \n        !this.props.workflow.migrationDatabaseClone || !this.props.workflow.migrationConfiguration) {\n        this.setState({\n          invalidMigrationFields: true\n        })\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  hideErrorDialog() {\n    this.setState({\n      completeRedactRules: true,\n      dupeRedactRuleFound: false,\n      dupeTableExportFound: false,\n      validSchedule: true,\n      validName: true,\n      validDiskSize: true,\n      missingSchemaSelection: false,\n      missingPostExportHookField: false,\n      missingSecretField: false,\n      invalidOutputSettingField: false,\n      orphanedWorkflow: false,\n      columnExclusionProhibited: false,\n      invalidForgetUserFields: false,\n      invalidMigrationFields: false,\n    });\n  }\n\n  deleteMaskingRule(key:string) {\n    const maskingRuleValues = this.state.maskingRuleValues.filter(\n      (row:RedactRule) => (row.key !== key),\n    );\n\n    this.setState({\n      numMaskingRules: (this.state.numMaskingRules - 1),\n      maskingRuleValues,\n    });\n  }\n\n  addMaskingRule() {\n    const { maskingRuleValues } = this.state;\n\n    const numMaskingRules = this.state.numMaskingRules + 1;\n    const newRuleKey = this.state.newRuleKey + 1; // random array idx value\n    maskingRuleValues.push({\n      key: `new${newRuleKey}`,\n      databaseTable: '',\n      table: '',\n      column: '',\n      rule: '',\n    });\n\n    this.setState({\n      maskingRuleValues,\n      numMaskingRules,\n      newRuleKey,\n    });\n  }\n\n  addTableSelection() {\n    const state:IState = this.state;\n    state.input.tables.push(localStorage.getItem(\"schema\") || \"public\");\n    this.setState(state);\n  }\n\n  deleteTableSelection(idx:number) {\n    const state:IState = this.state;\n    let table = state.input.tables[idx];\n\n    state.input.tables = state.input.tables.filter((t:string) => {\n      return (t !== table)\n    })\n    state.inputs = state.inputs.map((i:any) => {\n      if (i.uuid === state.input.uuid) {\n        return state.input;\n      }\n      return i;\n    })\n    this.setState(state);\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({\n      showSnackbar: false,\n      showSnackbarEdit: false,\n      showClipboardSnackbar: false,\n    });\n  };\n\n  deleteWorkflowConfirmation() {\n    this.setState({\n      deleteWorkflowConfirmation: true,\n    });\n  }\n\n  cancelWorkflowConfirmation() {\n    this.setState({\n      deleteWorkflowConfirmation: false,\n    });\n  }\n\n  displayLastReportedError() {\n    return this.props.workflow.lastStackTrace ? this.props.workflow.lastStackTrace.split('\\n').map((text:string, index:number) => <React.Fragment key={`${text}-${index}`}>\n        {text}\n        <br />\n      </React.Fragment>) : '';\n  }\n\n  showLastReportedError(event:any) {\n    event.preventDefault();\n\n    this.setState({\n      showLastReportedError: true,\n    });\n  }\n\n  hideLastReportedError() {\n    this.setState({\n      showLastReportedError: false,\n    });\n  }\n\n  static displayStatus(lastTask:string) {\n    if (lastTask) {\n      return (\n        <Box mt={8}>\n          <Typography variant=\"h6\" gutterBottom>\n            Status\n          </Typography>\n\n          Last task: <b>{lastTask}</b>\n        </Box>\n      );\n    }\n\n    return null;\n  }\n\n  // handleDataTableDelete(table:string) {\n  //   const exportTableDataConfig = this.state.exportTableDataConfig.filter(\n  //     (t:string) => t !== table,\n  //   );\n\n  //   this.setState({\n  //     exportTableDataConfig,\n  //   });\n  // }\n\n  handleCustomSecret(event:any, idx:number) {\n    const state:IState = this.state;\n    state.dataFeed.feedSecrets[idx][event.target.name] = event.target.value;\n\n    this.setState({\n      dataFeed: state.dataFeed,\n    });\n  }\n\n  addSecret(secretType:string) {\n    const state:IState = this.state;\n    state.dataFeed.feedSecrets.push({\n      secretType,\n      secretName: '',\n      secretKey: '',\n      secretPath: '',\n    });\n\n    this.setState({\n      dataFeed: state.dataFeed,\n    });\n  }\n\n  handleDeleteSecret(idx:number) {\n    const state:IState = this.state;\n    state.dataFeed.feedSecrets = state.dataFeed.feedSecrets.filter(\n      (secret:any, i:number) => i !== idx,\n    );\n\n    this.setState({\n      dataFeed: state.dataFeed,\n    });\n  }\n\n  handleExportSchedule(event:any) {\n    if (event.target.value === 'false') {\n      this.setState({\n        exportSchedule: false,\n        schedule: 'None',\n      });\n    } else {\n      this.setState({\n        exportSchedule: true,\n        schedule: '* 0 * * *',\n      });\n    }\n  }\n\n  handleSchedule(event:any) {\n    const state:any = {};\n    if (event.target.name === 'scheduleSelection') {\n      state.scheduleSelection = event.target.value;\n      state.customSchedule = (event.target.value === 'custom');\n    }\n    state.schedule = (event.target.value === 'custom') ? '* 0 * * *' : event.target.value;\n    this.setState(state);\n  }\n\n  handleDeltaUpdate(event:any) {\n    this.setState({\n      deltaUpdateField: event.target.value\n    });\n  }\n\n  dbUUIDSnackbar() {\n    return (\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        open={this.state.showClipboardSnackbar}\n        autoHideDuration={8000}\n        onClose={this.handleSnackbarClose}\n        ContentProps={{\n          'aria-describedby': 'message-id',\n        }}\n        message={<span id=\"message-id\">{this.state.snackbarText}</span>}\n        action={[\n          <IconButton\n            key=\"close\"\n            aria-label=\"Close\"\n            color=\"inherit\"\n            onClick={this.handleSnackbarClose}\n          >\n            <CloseIcon />\n          </IconButton>,\n        ]}\n      />\n    );\n  }\n\n  markAddToS3UploadList(event:any, fileName:string) {\n    const state:IState = this.state;\n\n    if (event.target.checked) {\n      // add to list\n      state.dataFeed.dataFeedConfig.uploadFileChecked.push(fileName);\n\n      if (state.dataFeed.dataFeedConfig.uploadFileChecked.length === this.getS3UploadFileNames().length) {\n        state.dataFeed.dataFeedConfig.addAllS3Uploads = true;\n      }\n    } else {\n      state.dataFeed.dataFeedConfig.uploadFileChecked = state.dataFeed.dataFeedConfig.uploadFileChecked.filter(\n        (f:string) => ((f !== fileName)),\n      );\n      state.dataFeed.dataFeedConfig.addAllS3Uploads = false;\n    }\n\n    this.setState(state);\n  }\n\n  getExportFileNames() {\n    const filenames:string[] = [];\n    this.state.exportTableDataConfig.forEach((t:string) => {\n      filenames.push(`table-${t}.csv`);\n    });\n\n    return filenames;\n  }\n\n  getS3UploadFileNames() {\n    const filenames:string[] = [];\n    if (!this.state.allDatabaseTables) { return []; }\n    this.state.allDatabaseTables.forEach((dt:string) => {\n      const tableArr = dt.split(\": \");\n      const table = tableArr[(tableArr.length - 1)];\n      filenames.push(`table-${table}.csv`);\n    });\n\n    return filenames;\n  }\n\n  addAllToS3UploadList(event:any) {\n    const state:IState = this.state;\n\n    if (event.target.checked) {\n      // check all\n      state.dataFeed.dataFeedConfig.uploadFileChecked = [];\n      this.getS3UploadFileNames().forEach((f) => {\n        state.dataFeed.dataFeedConfig.uploadFileChecked.push(f);\n      });\n\n      state.dataFeed.dataFeedConfig.addAllS3Uploads = true;\n    } else {\n      state.dataFeed.dataFeedConfig.uploadFileChecked = [];\n      state.dataFeed.dataFeedConfig.addAllS3Uploads = false;\n    }\n\n    this.setState(state);\n  }\n\n  handleTableOutputChanges(event:any, table:string) {\n    const state:IState = this.state;\n    if (!table) {\n      table = state.constraintSchema + \".\" + state.constraintTable;\n    }\n    if (!state.tableOutputOptions) {\n      state.tableOutputOptions = {\n        numDays: 30,\n        sampleFields: \"createdAndUpdated\",\n        createdAtField: \"created_at\",\n        updatedAtField: \"updated_at\",\n      } \n    }\n\n    if (event.target.name === \"schema\") {\n      state.constraintSchema = event.target.value;\n    }\n    else if (event.target.name === \"table\") {\n      state.constraintTable = event.target.value;\n    }\n\n\n    // transfer data that should be saved to exportTableDataConfig\n    switch (event.target.name) {\n      case 'createdAtField':\n      case 'numDays':\n      case 'sampleFields':\n      case 'updatedAtField':\n        state.tableOutputOptions[event.target.name] = event.target.value;\n        break;\n\n      default:  \n        break;\n    }\n    this.setState(state);\n  }\n\n  triggerEditInputDialog(input:WorkflowInputRecord) {\n    // dereference\n    //console.log(\"TRIGGER EDIT\", input);\n    let inputCopy:WorkflowInputRecord = {\n      inputName: input.inputName,\n      uuid: input.uuid,\n      enabled: input.enabled,\n      tables: input.tables,\n      tableSelection: input.tableSelection,\n    }\n    this.setState({\n      input: inputCopy,\n      editInputDialog:true\n    });\n  }\n\n  handleInputChanges(event:any, input:WorkflowInputRecord) {\n    const state:any = this.state;\n    const findInput = state.inputs.find((i:WorkflowInputRecord) => {\n      return (i.uuid === input.uuid)\n    });\n    if (!findInput) {\n      state.inputs.push(input);\n    }\n    state.inputs = state.inputs.map((i:any) => {\n      if (i.uuid === input.uuid) {\n        i[event.target.name] = (event.target.name === \"enabled\") ? event.target.checked : event.target.value;\n        state.input[event.target.name] = i[event.target.name];\n      }\n      return i;\n    })\n    this.setState(state);\n  }\n\n  selectInputSource(event:any) {\n    const state:any = this.state;\n    const agentInput = this.props.agentInputs.find((input:AgentInputRecord) => {\n      return (input.uuid === event.target.value)\n    })\n    if (agentInput) {\n      state.inputs = [{\n        uuid: event.target.value,\n        enabled: true,\n        inputName: agentInput.inputName,\n        tables: [],\n      }]\n      this.setState(state);\n    }\n  }\n\n  handleAddTable(event:any, idx:number, field:string) {\n    const state:IState = this.state;\n    if (field === \"schema\") {\n      state.input.tables[idx] = event.target.value + \".\" + state.input.tables[idx].split('.')[1];\n    }\n    else if (field === \"table\") {\n      state.input.tables[idx] = state.input.tables[idx].split('.')[0] + \".\" + event.target.value;\n    }\n    this.setState({\n      input: state.input\n    });\n  }\n\n  triggerAddTable() {\n    const state:IState = this.state;\n    state.errors.addTable = false;\n\n    if (!state.addTable) {\n      return;\n    }\n    else if (!this.legalName(this.state.addTable)) {\n      state.errors.addTable = true;\n      this.setState({\n        errors: state.errors\n      })\n      return;\n    }\n    const input = this.state.input;\n    if (!input.tables) {\n      input.tables = [];\n    }\n    input.tables.push(this.state.addTable);\n\n    this.setState({\n      errors: state.errors,\n      input:input,\n      addTable:\"\",\n    })\n  }\n\n  legalName(name:string) {\n    // skip if no name is provided\n    if (!name) { return true; }\n    return (name.match(/^[a-zA-Z_][a-zA-Z0-9_]{1,30}$/)) ? true : false;\n  }\n\n  deleteWorkflow(input:WorkflowInputRecord) {\n    const state:IState = this.state;\n    state.inputs = state.inputs.filter((i:WorkflowInputRecord) => {\n      return (i.uuid === input.uuid) ? false : true\n    });\n\n     // update listing of tables\n    state.allDatabaseTables = [];\n    state.inputs.forEach((input:WorkflowInputRecord) => {\n      if (!input.tables) {\n        input.tables = [];\n      }\n      input.tables.forEach((table:string) => {\n        state.allDatabaseTables.push(state.input.inputName + \": \" + table);\n      });\n    })\n\n    const missingInput = this.missingInput();\n\n    this.setState({\n      transformExpanded: (missingInput) ? false : true,\n      outputExpanded: (missingInput) ? false : true,\n      allDatabaseTables: state.allDatabaseTables,\n      inputs: state.inputs\n    });\n  }\n\n  hideInputDialog() {\n    this.setState({\n      editInputDialog:false\n    })\n  }\n\n  deleteDatabaseTable(table:string) {\n    const input = this.state.input;\n    if (!input.tables) {\n      input.tables = [];\n    }\n    input.tables = input.tables.filter((t) => {\n      return (table === t) ? false : true\n    });\n\n    this.setState({\n      input:input\n    })\n  }\n\n  handleEditWorkflowSnackbarClose = () => {\n    this.setState({\n      showSnackbarEdit: false,\n    });\n  };\n\n\n  saveInputChanges() {\n    const state:IState = this.state;\n    let inputs:WorkflowInputRecord[] = this.state.inputs;\n\n    if (!state.input.tables) {\n      state.input.tables = [];\n    }\n\n    // find and update existing input in inputs listing\n    state.allDatabaseTables = [];\n    inputs = inputs.map((input) => {\n      if (!input.tables) {\n        input.tables = [];\n      }\n\n      // update listing of tables\n      input.tables.forEach((table:string) => {\n        state.allDatabaseTables.push(state.input.inputName + \": \" + table);\n      });\n\n      if (input.uuid === this.state.input.uuid) {\n        // transfer current input into inputs array\n        return this.state.input;\n      }\n\n      return input;\n    });\n\n    // remove maskingrules that contain rules for tables that no longer exist\n    state.maskingRuleValues = state.maskingRuleValues.filter((rule:RedactRule) => {\n      return (state.allDatabaseTables.includes(rule.databaseTable)) ? true : false;\n    })\n    state.numMaskingRules = state.maskingRuleValues.length;\n\n    state.errors.JSX = null;\n    //console.log(\"INPUTS\", inputs);\n    //console.log(\"STATE\", state)\n\n    if (this.state.input.uuid.match(/^new/)) {\n      this.setState({\n        tableOutputOptions: state.tableOutputOptions,\n        allDatabaseTables: state.allDatabaseTables,\n        errors: state.errors,\n        inputs: inputs,\n        editInputDialog: false,\n        showSnackbarEdit: true,\n        newInputKey: state.newInputKey,\n      })\n    }\n    else {\n      this.setState({\n        maskingRuleValues: state.maskingRuleValues,\n        numMaskingRules: state.numMaskingRules,\n        allDatabaseTables: state.allDatabaseTables,\n        errors: state.errors,\n        inputs: inputs,\n        editInputDialog: false,\n        showSnackbarEdit: true,\n      })\n    }\n  }\n\n  legalBucketName(bucket:string) {\n    if (!bucket.match(/^[a-zA-Z0-9]{1}[a-zA-Z0-9.-]{1,61}[a-zA-Z0-9]{1}$/)) {\n      return false;\n    }\n    else if (bucket.match(/^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$/)) {\n      // IP address\n      return false;\n    }\n    else if (bucket.match(/^xn--/) || bucket.match(/-s3alias$/)) {\n      return false;\n    }\n    return true;\n  }\n\n  saveDataFeedChanges() {\n    const state:IState = this.state;\n    var errorsFound:boolean = false;\n    var dataFeeds:DataFeed[] = this.state.dataFeeds;\n\n    if (!state.dataFeed.dataFeed) {\n      // no selection, close dialog\n      this.setState({\n        editDataFeed: false,\n      })\n      return; \n    }\n\n    switch (state.dataFeed.dataFeed) {\n      case 's3upload':\n        if (!state.dataFeed.dataFeedConfig.S3UploadBucket || !this.legalBucketName(state.dataFeed.dataFeedConfig.S3UploadBucket)) {\n          state.errors.invalidBucketName = true;\n          errorsFound = true;\n        }\n        else {\n          state.errors.invalidBucketName = false;\n        }\n      break;\n\n      case 'digitalTwin':\n        if (state.dataFeed.dataFeedConfig.enableDeltaUpdates && !state.dataFeed.dataFeedConfig.deltaUpdateField) {\n          state.errors.invalidDeltaUpdateField = true;\n          errorsFound = true;\n        }\n        if (state.dataFeed.dataFeedConfig.enablePostUpdatePreparedStatements && state.dataFeed.dataFeedConfig.postUpdateKeyValues.length) {\n          // validate prepared statements\n          const findInvalid = state.dataFeed.dataFeedConfig.postUpdateKeyValues.find((kv:PostUpdateParam) => {\n            //eslint-disable-next-line\n            return (!kv.key || !String(kv.value) || String(kv.key).match(/[%\\(\\)]+/) || String(kv.value).match(/[%\\(\\)]+/)) ? true : false;\n          })\n          if (findInvalid) {\n            state.errors.invalidPostUpdateKeyValues = true;\n            errorsFound = true;\n          }\n          else {\n            state.errors.invalidPostUpdateKeyValues = false;\n          }\n        }\n      break;\n\n      case 'custom':\n        if (!state.dataFeed.dataFeedConfig.image) {\n          state.errors.image = true;\n          errorsFound = true;\n        }\n        if (!state.dataFeed.dataFeedConfig.tag) {\n          state.errors.tag = true;\n          errorsFound = true;\n        }\n        if (!state.dataFeed.dataFeedConfig.shell) {\n          state.errors.shell = true;\n          errorsFound = true;\n        }\n\n        if (this.state.dataFeed.feedSecrets && this.state.dataFeed.feedSecrets.length) {\n          this.state.dataFeed.feedSecrets.forEach((s: CustomSecret) => {\n            if (s.secretType === 'volume' && (!s.secretName || !s.secretKey || !s.secretPath)) {\n              state.errors.invalidSecret = true;\n              errorsFound = true;\n            } else if (s.secretType === 'env' && (!s.secretName || !s.secretKey || !s.envName)) {\n              state.errors.invalidSecret = true;\n              errorsFound = true;\n            }\n          });\n        }\n\n      break;\n\n      default:\n      break;\n    }\n\n    if (errorsFound) {\n      this.setState({\n        errors: state.errors,\n      })\n      return;\n    }\n\n    if (state.dataFeed.uuid === \"new\") {\n      state.newDataFeedKey++;\n      state.dataFeed.uuid = \"new\" + state.newDataFeedKey;\n\n      dataFeeds.push(state.dataFeed);\n    }\n    else {\n      // update existing datafeed\n      dataFeeds = dataFeeds.map((df:DataFeed) => {\n        if (df.uuid === state.dataFeed.uuid) {\n          df.dataFeed = state.dataFeed.dataFeed;\n          df.dataFeedConfig = state.dataFeed.dataFeedConfig;\n          df.feedSecrets = state.dataFeed.feedSecrets;\n        }\n        return df;\n      })\n    }\n\n    this.setState({\n      dataFeeds,\n      editDataFeed: false,\n      showSnackbarEdit: true\n    })\n  }\n\n  transformExpansion(event:any, expanded:boolean) {\n    this.setState({\n      transformExpanded: (expanded) ? true : false\n    })\n  }\n\n  outputExpansion(event:any, expanded:boolean) {\n    this.setState({\n      outputExpanded: (expanded) ? true : false\n    })\n  }\n\n  triggerOutputOptions(event:any, databaseTable:string) {\n    const state:IState = this.state;\n    if (!databaseTable) {\n      state.constraintSchema = \"public\";\n      state.constraintTable = \"\";\n      state.tableOutputOptions = {\n        errors: {},\n        numDays: 30,\n        sampleFields: \"createdAndUpdated\",\n        createdAtField: \"created_at\",\n        updatedAtField: \"updated_at\",\n      }\n    }\n    else {\n      state.constraintSchema = databaseTable.split('.')[0];\n      state.constraintTable = databaseTable.split('.')[1];\n      state.tableOutputOptions = state.exportTableDataConfig.find((config:any) => {\n        return config.table === databaseTable\n      });\n      state.tableOutputOptions.errors = {};\n    }\n\n    this.setState({\n      currentDatabaseTable: databaseTable,\n      tableOutputOptions: state.tableOutputOptions,\n      constraintSchema: state.constraintSchema,\n      constraintTable: state.constraintTable,\n      showOutputOptions: true\n    })\n  }\n\n  deleteConstraint(event:any, databaseTable:string) {\n    const state:IState = this.state;\n    state.exportTableDataConfig = state.exportTableDataConfig.filter((config:any) => {\n      return (config.table !== databaseTable);\n    });\n    this.setState({\n      exportTableDataConfig: state.exportTableDataConfig\n    })\n  }\n\n  genConstraintSummary(table:string) {\n    let display:string = \"\";\n    let scheme:string = \"\";\n    let findConfig = this.state.exportTableDataConfig.find((config:any) => {\n      return config.table === table;\n    });\n    if (findConfig) {\n      switch (findConfig.sampleFields) {\n        case 'createdAndUpdated':\n        scheme = \"rows created and updated\";\n        break;\n\n        case 'created':\n        scheme = \"rows created\";\n        break;\n\n        case 'updated':\n        scheme = \"rows updated\";\n        break;\n      }\n      display = scheme + \" in the last \" + findConfig.numDays + \" days\";\n    }\n    return display;\n  }\n\n  hideOutputOptions() {\n    const state:IState = this.state;\n    if (!state.currentDatabaseTable && this.state.constraintSchema && this.state.constraintTable) {\n      // new constraint\n      state.tableOutputOptions.table = this.state.constraintSchema + \".\" + this.state.constraintTable;\n      state.exportTableDataConfig.push(state.tableOutputOptions);\n    }\n    else if (this.state.constraintSchema && this.state.constraintTable) {\n      // update existing\n      state.exportTableDataConfig = state.exportTableDataConfig.map((config:any) => {\n        if (config.table === state.currentDatabaseTable) {\n          state.tableOutputOptions.table = this.state.constraintSchema + \".\" + this.state.constraintTable;\n          return state.tableOutputOptions;\n        }\n        return config;\n      });\n    }\n\n    console.log(\"FINAL\", state.exportTableDataConfig);\n\n    this.setState({\n      showOutputOptions: false,\n      exportTableDataConfig: state.exportTableDataConfig,\n    })\n  }\n\n  resetDataFeedErrors() {\n    const state:IState = this.state;\n    state.errors.duplicateDataFeed = false;\n    state.errors.invalidBucketName = false;\n    state.errors.invalidPostUpdateKeyValues = false;\n    state.errors.invalidSecret = false;\n\n    this.setState({\n      errors: state.errors\n    })\n  }\n\n  addDataFeed() {\n    this.resetDataFeedErrors();\n    const state:IState = this.state;\n\n    state.dataFeed.uuid = \"new\";\n    state.dataFeed.dataFeed = \"\";\n    state.dataFeed.feedSecrets = [];\n\n    this.setState({\n      editDataFeed: true,\n      dataFeed: state.dataFeed\n    })\n  }\n\n  triggerEditDataFeed(df:DataFeed) {\n    this.resetDataFeedErrors();\n    const state:IState = this.state;\n\n    const dataFeed = this.state.dataFeeds.filter((d:DataFeed) => {\n      return (d.uuid === df.uuid) ? true : false;\n    })\n\n    // remove S3 prefix\n    if (dataFeed[0].dataFeed === \"s3upload\") {\n      dataFeed[0].dataFeedConfig.S3UploadBucket = dataFeed[0].dataFeedConfig.S3UploadBucket.replace(/^s3:\\/\\//,'');\n    }\n    if (!dataFeed[0].dataFeedConfig.postUpdateKeyValues) {\n      dataFeed[0].dataFeedConfig.postUpdateKeyValues = [];\n    }\n\n    // dereference\n    const dataFeedCopy:DataFeed = {\n      uuid: dataFeed[0].uuid,\n      dataFeed: dataFeed[0].dataFeed,\n      dataFeedConfig: dataFeed[0].dataFeedConfig,\n      feedSecrets: dataFeed[0].feedSecrets,\n    }\n\n    this.setState({\n      editDataFeed: true,\n      dataFeed: dataFeedCopy,\n      errors: state.errors,\n    })\n  }\n\n  hideDataFeed() {\n    this.setState({\n      editDataFeed: false\n    })\n  }\n\n  handleDataFeed(dataFeed:string) {\n    const state:IState = this.state;\n\n    // prevent creation of duplicate data feed\n    if (state.dataFeeds && state.dataFeeds.find((df:DataFeed) => {\n      return (df.dataFeed === dataFeed) ? true : false\n    })) {\n      state.errors.duplicateDataFeed = true;\n      state.dataFeed.dataFeed = \"\";\n      this.setState({\n        errors: state.errors,\n        dataFeed: state.dataFeed,\n      });\n      return;\n    }\n\n    state.dataFeed.dataFeed = dataFeed;\n    state.errors.duplicateDataFeed = false;\n\n    // init config\n    switch (dataFeed) {\n      case 'digitalTwin':\n      state.dataFeed.dataFeedConfig = {\n        inputSource: \"\",\n        enableSSL: false,\n        enableDeltaUpdates: false,\n        enablePostUpdatePreparedStatements: false,\n        postUpdateKeyValues: [],\n      }\n      break;\n\n      case 's3upload':\n      state.dataFeed.dataFeedConfig = {\n        uploadFileChecked: [],\n        addAllS3Uploads: false,\n        postUpdateKeyValues: [],\n      }\n      break;\n\n      case 'custom':\n      state.dataFeed.dataFeedConfig = {\n        image: \"\",\n        tag: \"\",\n        shell: \"\",\n        command: \"\",\n        postUpdateKeyValues: [],\n      }\n      break;\n    }\n    \n    this.setState({\n      dataFeed: state.dataFeed,\n      errors: state.errors,\n    })\n  }\n\n  handleDataFeedBack() {\n    const state:IState = this.state;\n\n    state.dataFeed.dataFeed = \"\";\n    this.setState({\n      dataFeed: state.dataFeed\n    })\n  }\n\n  handleDataFeedCancel() {\n    this.setState({\n      editDataFeed: false\n    })\n  }\n\n  addParameterValue() {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig.postUpdateKeyValues.push({\n      key: \"\",\n      value: \"\"\n    })\n    this.setState(state);\n  }\n\n  updateParameterValue(key:number, event:any) {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig.postUpdateKeyValues = state.dataFeed.dataFeedConfig.postUpdateKeyValues.map((kv:PostUpdateParam, idx:number) => {\n      if (idx === key && event.target.name === \"parameterKey\") {\n        kv.key = event.target.value;\n      }\n      else if (idx === key && event.target.name === \"parameterValue\") {\n        kv.value = (!event.target.value || isNaN(event.target.value)) ? event.target.value : parseFloat(event.target.value);\n      }\n      return kv;\n    })\n    this.setState(state); \n  }\n\n  deleteParameterValue(key:number) {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig.postUpdateKeyValues = state.dataFeed.dataFeedConfig.postUpdateKeyValues.filter((kv:PostUpdateParam, idx:number) => {\n      return (idx === key) ? false : true;\n    });\n    this.setState(state);\n  }\n\n  deleteDataFeed(dataFeed:DataFeed) {\n    const state:IState = this.state;\n    state.dataFeeds = state.dataFeeds.filter((df:DataFeed) => {\n      return (df.uuid === dataFeed.uuid) ? false : true;\n    })\n\n    this.setState({\n      dataFeeds: state.dataFeeds,\n      showSnackbarEdit: true\n    })\n  }\n\n  handleDataFeedOptions(event:any) {\n    const state:IState = this.state;\n    state.dataFeed.dataFeedConfig[event.target.name] = (event.target.name.match(/^enable/)) ? event.target.checked : event.target.value;\n\n    this.setState(state);\n  }\n\n  displayWorkflowType(wf:string) {\n    switch (wf) {\n      case 'ERL':\n      return 'ERL (Extract, Redact, Load)';\n\n      case 'mockDatabaseMigration':\n      return 'Database Clone for Migration Dry-run';\n\n      default:\n      break;\n    }\n  }\n\n  /* eslint-disable max-len */\n\n  render() {\n    return (\n      <Card mb={6}>\n        <CardContent>\n          {this.dbUUIDSnackbar()}\n          <Typography variant=\"h4\">\n            {this.props.workflow.name} <code>({this.props.workflow.uuid})</code>\n            <Box display=\"inline\" ml={2}>\n              <CopyToClipboard text={this.props.workflow.uuid} onCopy={() => this.clipboardCopy(\"dbuuid\")}>\n                <Button variant=\"outlined\" size=\"small\" color=\"secondary\"><ClipboardIcon /></Button>\n              </CopyToClipboard>\n            </Box>\n          </Typography>\n\n          <Box>\n            <Grid\n              container\n              justify=\"space-between\"\n              alignItems=\"center\"\n            >\n              <Grid item xs={4}>\n                <Box display={(this.props.workflow.workflowType.match(/^(ERL|mockDatabaseMigration)/)) ? 'block' : 'none'}>\n                  <FormControl margin=\"dense\" fullWidth>\n                    <InputLabel>\n                      Redactics Agent\n                    </InputLabel>\n                    <Select\n                      value={this.props.workflow.agentId}\n                      name=\"agentId\"\n                      onChange={(event) => this.props.handleWFChanges(event, this.props.workflow.uuid)}\n                    >\n                      {this.props.agents.map((agent:AgentRecord) => (\n                        <MenuItem key={agent.uuid} value={agent.uuid}>{agent.name}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Box>\n                <Box mt={4}>\n                  Workflow Type: <b>{this.displayWorkflowType(this.props.workflow.workflowType)}</b>\n                </Box>\n              </Grid>\n            </Grid>\n          </Box>\n\n          <Dialog\n            open={this.state.showLastReportedError}\n            onClose={this.hideLastReportedError}\n            maxWidth=\"lg\"\n            aria-labelledby=\"dialog-title\"\n            aria-describedby=\"dialog-description\"\n          >\n            <DialogTitle id=\"dialog-title\">Last Reported Error for: {this.props.workflow.name}</DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"dialog-description\">\n                {this.displayLastReportedError()}\n              </DialogContentText>\n\n              <DialogActions>\n                <Button color=\"primary\" onClick={this.hideLastReportedError}>\n                  Close\n                </Button>\n              </DialogActions>\n            </DialogContent>\n          </Dialog>\n\n          <Box mt={12}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Input Settings</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <WorkflowInputs\n                    errors={this.state.errors}\n                    workflow={this.props.workflow}\n                    agentInputs={this.props.agentInputs}\n                    agents={this.props.agents}\n                    input={this.state.input}\n                    inputs={this.state.inputs}\n                    saveInputChanges={this.saveInputChanges}\n                    selectInputSource={this.selectInputSource}\n                    editInputDialog={this.state.editInputDialog}\n                    triggerEditInputDialog={this.triggerEditInputDialog}\n                    handleInputChanges={this.handleInputChanges}\n                    handleAddTable={this.handleAddTable}\n                    addTable={this.state.addTable}\n                    triggerAddTable={this.triggerAddTable}\n                    hideInputDialog={this.hideInputDialog}\n                    deleteDatabaseTable={this.deleteDatabaseTable}\n                    handleSnackbarClose={this.handleEditWorkflowSnackbarClose}\n                    addTableSelection={this.addTableSelection}\n                    deleteTableSelection={this.deleteTableSelection}\n                  />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n                  \n\n          <Box mt={4} display={(this.props.workflow.workflowType.match(/^ERL/)) ? 'block' : 'none'}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel disabled={this.missingInput()} expanded={this.state.transformExpanded} onChange={(event, expanded) => this.transformExpansion(event, expanded)}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Processing/Transformation Settings</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <WorkflowRedactionRules\n                    workflow={this.props.workflow}\n                    allDatabaseTables={this.state.allDatabaseTables}\n                    maskingRuleValues={this.state.maskingRuleValues}\n                    handleRuleChange={this.handleRuleChange}\n                    deleteMaskingRule={this.deleteMaskingRule}\n                    numMaskingRules={this.state.numMaskingRules}\n                    maskingRules={this.state.maskingRules}\n                    addMaskingRule={this.addMaskingRule}\n                  />\n\n                  <WorkflowSchedule\n                    handleExportSchedule={this.handleExportSchedule}\n                    exportSchedule={this.state.exportSchedule}\n                    schedule={this.state.schedule || '* 0 * * *'}\n                    handleSchedule={this.handleSchedule}\n                    scheduleSelection={this.state.scheduleSelection}\n                    customSchedule={this.state.customSchedule}\n                    workflowType={this.props.workflow.workflowType}\n                    errors={this.state.errors}\n                  />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n\n          <Box mt={4} display={(this.props.workflow.workflowType.match(/^ERL/)) ? 'block' : 'none'}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel disabled={(this.state.allDatabaseTables && this.state.allDatabaseTables.length) ? false : true} expanded={this.state.outputExpanded} onChange={(event, expanded) => this.outputExpansion(event, expanded)}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Output Settings</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <WorkflowExport\n                    exportTableDataConfig={this.state.exportTableDataConfig}\n                    showOutputOptions={this.state.showOutputOptions}\n                    hideOutputOptions={this.hideOutputOptions}\n                    triggerOutputOptions={this.triggerOutputOptions}\n                    deleteConstraint={this.deleteConstraint}\n                    currentDatabaseTable={this.state.currentDatabaseTable}\n                    allDatabaseTables={this.state.allDatabaseTables}\n                    tableOutputOptions={this.state.tableOutputOptions}\n                    constraintSchema={this.state.constraintSchema}\n                    constraintTable={this.state.constraintTable}\n                    handleTableOutputChanges={this.handleTableOutputChanges}\n                    genConstraintSummary={this.genConstraintSummary}\n                  />\n\n                  <WorkflowPostExport\n                    inputs={this.state.inputs}\n                    allInputs={this.props.allInputs}\n                    dataFeeds={this.state.dataFeeds}\n                    dataFeed={this.state.dataFeed}\n                    addParameterValue={this.addParameterValue}\n                    updateParameterValue={this.updateParameterValue}\n                    deleteParameterValue={this.deleteParameterValue}\n                    agents={this.props.agents}\n                    workflow={this.props.workflow}\n                    hideDataFeed={this.hideDataFeed}\n                    addDataFeed={this.addDataFeed}\n                    editDataFeed={this.state.editDataFeed}\n                    handleDataFeed={this.handleDataFeed}\n                    handleDataFeedBack={this.handleDataFeedBack}\n                    handleDataFeedCancel={this.handleDataFeedCancel}\n                    getS3UploadFileNames={this.getS3UploadFileNames}\n                    handleDataFeedOptions={this.handleDataFeedOptions}\n                    saveDataFeedChanges={this.saveDataFeedChanges}\n                    triggerEditDataFeed={this.triggerEditDataFeed}\n                    deleteDataFeed={this.deleteDataFeed}\n                    errors={this.state.errors}\n                    handleCustomSecret={this.handleCustomSecret}\n                    addSecret={this.addSecret}\n                    handleDeleteSecret={this.handleDeleteSecret}\n                    markAddToS3UploadList={this.markAddToS3UploadList}\n                    addAllToS3UploadList={this.addAllToS3UploadList}\n                    addAllS3Uploads={this.state.addAllS3Uploads}\n                    agentNamespace={this.state.agentNamespace}\n                  />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n\n          <Box mt={4} display={(this.props.workflow.workflowType === \"mockDatabaseMigration\") ? 'block' : 'none'}>\n            <Paper variant=\"outlined\">\n              <ExpansionPanel expanded={this.state.outputExpanded} onChange={(event, expanded) => this.outputExpansion(event, expanded)}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Settings and Setup Instructions</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <DatabaseMigrationSetup\n                    workflow={this.props.workflow}\n                    handleWFChanges={this.props.handleWFChanges}\n                    inputs={this.state.inputs}\n                    agentNamespace={this.state.agentNamespace || \"default\"}\n                    clipboardCopy={this.clipboardCopy}\n                  />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Paper>\n          </Box>\n\n          <Grid\n            container\n            justify=\"space-between\"\n            alignItems=\"center\"\n            mt={12}\n          >\n            <Grid item xs={10}>\n              <Button variant=\"contained\" color=\"primary\" size=\"large\" disabled={this.state.saveButtonDisabled} onClick={() => this.saveChanges(this.props.workflow.uuid)}>\n                <SaveIcon />&nbsp;Save Changes\n              </Button>\n            </Grid>\n            <Grid item>\n              <Button variant=\"contained\" color=\"default\" size=\"small\" onClick={this.deleteWorkflowConfirmation}>\n                <DeleteIcon />&nbsp;\n                Delete Workflow\n              </Button>\n            </Grid>\n\n            <Dialog\n              open={this.state.deleteWorkflowConfirmation}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Delete Workflow</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Are you sure you want to delete this workflow configuration?\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button onClick={this.cancelWorkflowConfirmation}>\n                    Cancel\n                  </Button>\n                  <Button color=\"primary\" onClick={() => this.props.deleteWorkflow(this.props.workflow.uuid)}>\n                    Yes, delete\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.orphanedWorkflow}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Workflow <b>{this.props.workflow.name}</b> is not associated with a Redactics Agent. Please correct this by selecting an agent in your workflow configuration.\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.completeRedactRules}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  One or more of your redaction rules contains a blank value or invalid column name (field names must contain only letters, numbers and underscores and most start with a letter or underscore)\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.dupeRedactRuleFound}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  One or more of your redaction rules contains a duplicate table and column name\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.dupeTableExportFound}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You&apos;ve already selected this table/column for export\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.missingSchemaSelection}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide some table names for schema export\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.missingPostExportHookField}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide valid custom data feed container info\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.missingSecretField}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide details about your secrets/environment variables\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.invalidOutputSettingField}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  One or more \"created\" or \"updated\" field settings are missing or contain illegal characters\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.invalidForgetUserFields}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Your Forget User Request \"Database and Table Name\" or \"Email Field\" are either missing or contain an invalid field name (field names must contain only letters, numbers and underscores and most start with a letter or underscore).\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.invalidMigrationFields}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  Your Setup Instructions fields are missing one or more values.\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.validSchedule}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  <p>\n                    Your custom schedule is invalid. Please abide by the standard crontab format:\n                  </p>\n\n                  <p>\n                    <b>\n                      [minute](0-59)[hour](0-23)\n                      [day of the month](1-31)\n                      [month](1-12)\n                      [day of the week](0-6)\n                    </b>\n                  </p>\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.validName}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide a workflow name\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={!this.state.validDiskSize}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Error</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  You must provide a disk space allocation for your input source\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button color=\"primary\" onClick={this.hideErrorDialog}>\n                    Okay\n                  </Button>\n                </DialogActions>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog\n              open={this.state.showDialog}\n              aria-labelledby=\"dialog-title\"\n              aria-describedby=\"dialog-description\"\n            >\n              <DialogTitle id=\"dialog-title\">Your changes have been saved!</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"dialog-description\">\n                  <Box>\n                    However, your workflow will not work until you update your Helm configuration file,&nbsp;\n                    which can be found in the <b>Agents</b> section.\n                  </Box>\n                </DialogContentText>\n\n                <DialogActions>\n                  <Button onClick={this.hideHelmReminder} color=\"primary\" autoFocus>\n                    Okay\n                  </Button>\n                </DialogActions>\n\n              </DialogContent>\n            </Dialog>\n\n            <Snackbar\n              anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              open={this.state.showSnackbar}\n              autoHideDuration={8000}\n              onClose={this.handleSnackbarClose}\n              ContentProps={{\n                'aria-describedby': 'message-id',\n              }}\n              message={<span id=\"message-id\"><b>Your changes have been saved!</b></span>}\n              action={[\n                <IconButton\n                  key=\"close\"\n                  aria-label=\"Close\"\n                  color=\"inherit\"\n                  onClick={this.handleSnackbarClose}\n                >\n                  <CloseIcon />\n                </IconButton>,\n              ]}\n            />\n\n            <Snackbar\n              anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              open={this.state.showSnackbarEdit}\n              autoHideDuration={8000}\n              onClose={this.handleSnackbarClose}\n              ContentProps={{\n                'aria-describedby': 'message-id',\n              }}\n              message={<span id=\"message-id\">Click on &quot;Save Changes&quot; at the bottom of this section to save your changes...</span>}\n              action={[\n                <IconButton\n                  key=\"close\"\n                  aria-label=\"Close\"\n                  color=\"inherit\"\n                  onClick={this.handleSnackbarClose}\n                >\n                  <CloseIcon />\n                </IconButton>\n              ]}\n            />\n          </Grid>\n\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nexport default withStyles(styles)(Workflow);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Helmet from 'react-helmet';\n\n// import { red, green, blue } from \"@material-ui/core/colors\";\n\nimport {\n  Divider as MuiDivider,\n  FormControl as MuiFormControl,\n  Grid as MuiGrid,\n  Typography,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  TextField as MuiTextField,\n  Button as MuiButton,\n  InputLabel,\n  Select as MuiSelect,\n  MenuItem,\n  Box,\n  InputAdornment,\n  Tooltip,\n} from '@material-ui/core';\n\nimport {\n  Add as AddIcon,\n  ExpandMore as ExpandMoreIcon,\n  FormatListBulleted as FormatListBulletedIcon,\n  HelpOutline as HelpIcon,\n} from '@material-ui/icons';\n\nimport {\n  Save as SaveIcon,\n} from 'react-feather';\n\nimport { spacing } from '@material-ui/system';\nimport {\n  WorkflowRecord, AgentInputRecord, InputRecord, AgentRecord, RedactRuleSet, RedactRulePreset,\n} from '../../types/redactics';\nimport RedacticsContext from '../../contexts/RedacticsContext';\n\nimport Workflow from './Workflow';\n\nconst Divider = styled(MuiDivider)(spacing);\n\nconst FormControlSpacing = styled(MuiFormControl)(spacing);\n\nconst FormControl = styled(FormControlSpacing)`\n  min-width: 400px;\n  max-width: 400px;\n`;\n\nconst Grid = styled(MuiGrid)(spacing);\n\nconst TextFieldSpacing = styled(MuiTextField)(spacing);\n\nconst TextField = styled(TextFieldSpacing)`\n  width: 400px;\n`;\n\nconst Select = styled(MuiSelect)(spacing);\n\nconst Button = styled(MuiButton)(spacing);\n\nconst styles = {\n  selectAdornment: {\n    marginRight: '-30px',\n  },\n};\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\ninterface IProps {\n  classes: any;\n}\n\ninterface IState {\n  saveButtonDisabled: boolean;\n  ruleLegendDialog: boolean;\n  newWorkflowDialog: boolean;\n  workflows: WorkflowRecord[];\n  agentInputs: AgentInputRecord[];\n  allInputs: InputRecord[];\n  presets: RedactRulePreset[];\n  redactrulesets: RedactRuleSet[];\n  agents: AgentRecord[];\n  newWorkflowName: string;\n  newWorkflowAgent: string;\n  newWorkflowType: string;\n  dbLimitError: boolean;\n  // dialog toggles\n  deleteWorkflowConfirmation: boolean;\n}\n\nclass Workflows extends React.Component<IProps, IState> {\n  static contextType = RedacticsContext;\n\n  constructor(props: IProps) {\n    super(props);\n\n    this.state = {\n      saveButtonDisabled: true,\n      ruleLegendDialog: false,\n      newWorkflowDialog: false,\n      workflows: [],\n      agentInputs: [],\n      allInputs: [],\n      presets: [],\n      redactrulesets: [],\n      agents: [],\n      newWorkflowName: '',\n      newWorkflowAgent: '',\n      newWorkflowType: '',\n      dbLimitError: false,\n      deleteWorkflowConfirmation: false,\n    };\n\n    this.handleChangeAdd = this.handleChangeAdd.bind(this);\n    this.handleWFChanges = this.handleWFChanges.bind(this);\n    this.addWorkflow = this.addWorkflow.bind(this);\n    this.ruleLegendOpen = this.ruleLegendOpen.bind(this);\n    this.ruleLegendClose = this.ruleLegendClose.bind(this);\n    this.newWorkflowOpen = this.newWorkflowOpen.bind(this);\n    this.newWorkflowClose = this.newWorkflowClose.bind(this);\n    this.refreshWorkflows = this.refreshWorkflows.bind(this);\n    this.deleteWorkflow = this.deleteWorkflow.bind(this);\n    this.dbLimitErrorClose = this.dbLimitErrorClose.bind(this);\n  }\n\n  async refreshWorkflows() {\n    try {\n      const response = await fetch(`${this.context.apiUrl}/workflow`);\n\n      const data = await response.json();\n\n      data.workflows.map((workflow:any) => {\n        // set some defaults\n        workflow.migrationNamespace = workflow.migrationNamespace || \"default\";\n        workflow.migrationDatabaseClone = workflow.migrationDatabaseClone || \"redactics_clone\";\n\n        return workflow;\n      });\n\n      this.setState({\n        workflows: data.workflows,\n        agentInputs: data.agentInputs,\n        allInputs: data.allInputs,\n        presets: data.presets,\n        redactrulesets: data.redactrulesets,\n        agents: data.agents,\n      });\n    } catch (err) {\n      // console.log('CATCH ERR', error);\n    }\n  }\n\n  componentDidMount() {\n    this.refreshWorkflows();\n  }\n\n  handleChangeAdd(event:any) {\n    const state:IState = this.state;\n\n    switch (event.target.name) {\n      case 'name':\n        state.newWorkflowName = event.target.value;\n        state.saveButtonDisabled = (state.newWorkflowType === \"ERL\")\n          ? !(event.target.value && state.newWorkflowAgent)\n          : !(event.target.value && state.newWorkflowType);\n        this.setState(state);\n        break;\n\n      case 'agentId':\n        state.newWorkflowAgent = event.target.value;\n        state.saveButtonDisabled = !(state.newWorkflowName);\n        this.setState(state);\n        break;\n\n      case 'workflowType':\n        state.newWorkflowType = event.target.value;\n        state.saveButtonDisabled = (event.target.value === \"ERL\")\n        ? !(state.newWorkflowName && state.newWorkflowAgent)\n        : !(state.newWorkflowName && state.newWorkflowType);\n        this.setState(state);\n        break;\n\n      default:\n    }\n  }\n\n  async addWorkflow() {\n    this.setState({\n      saveButtonDisabled: true,\n    });\n\n    try {\n      const response = await fetch(`${this.context.apiUrl}/workflow`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: this.state.newWorkflowName,\n          agentId: this.state.newWorkflowAgent,\n          workflowType: this.state.newWorkflowType,\n        }),\n      });\n\n      await response.json();\n      this.refreshWorkflows();\n\n      this.setState({\n        newWorkflowDialog: false,\n        newWorkflowName: '',\n        newWorkflowAgent: '',\n      });\n    } catch (err) {\n      // console.log('CATCH ERR', error);\n    }\n  }\n\n  async deleteWorkflow(workflowId:string) {\n    try {\n      await fetch(`${this.context.apiUrl}/workflow/${workflowId}`, {\n        method: 'delete',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      this.refreshWorkflows();\n\n      this.setState({\n        deleteWorkflowConfirmation: false,\n      });\n    } catch (err) {\n      this.setState({\n        deleteWorkflowConfirmation: false,\n      });\n    }\n  }\n\n  newWorkflowOpen() {\n    this.setState({\n      newWorkflowDialog: true,\n    });\n  }\n\n  newWorkflowClose() {\n    this.setState({\n      newWorkflowDialog: false,\n    });\n  }\n\n  dbLimitErrorClose() {\n    this.setState({\n      dbLimitError: false,\n    });\n  }\n\n  ruleLegendOpen() {\n    this.setState({\n      ruleLegendDialog: true,\n    });\n  }\n\n  ruleLegendClose() {\n    this.setState({\n      ruleLegendDialog: false,\n    });\n  }\n\n  handleWFChanges(event:any, workflowId:string) {\n    const workflows = this.state.workflows.map((d:any) => {\n      const workflow = d;\n      if (workflow.uuid === workflowId) {\n        workflow[event.target.name] = event.target.value;\n      }\n\n      return workflow;\n    });\n\n    this.setState({\n      workflows,\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Helmet title=\"Workflow Configurations\" />\n\n        <Grid\n          justify=\"space-between\"\n          container\n          spacing={10}\n        >\n          <Grid item xs={4} mb={6}>\n            <Typography variant=\"h1\" gutterBottom display=\"inline\">\n              Workflow Configurations\n            </Typography>\n          </Grid>\n        </Grid>\n\n        <Divider my={6} />\n\n        <Box mt={4}>\n          <Typography variant=\"body1\" gutterBottom>\n            Build and maintain your data management workflows here. Configuration changes will be picked up by your installed Agent usually within a few minutes.\n          </Typography>\n        </Box>\n\n        <Grid\n          justify=\"space-between\"\n          container\n          spacing={10}\n          mt={8}\n        >\n          <Grid item></Grid>\n          <Grid item mb={6}>\n            <div>\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.ruleLegendOpen}>\n                <FormatListBulletedIcon />&nbsp;\n                PII Ruleset Legend\n              </Button>&nbsp;\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={this.newWorkflowOpen}>\n                <AddIcon />&nbsp;\n                Define New Workflow\n              </Button>\n            </div>\n          </Grid>\n        </Grid>\n\n        <Dialog\n          open={this.state.ruleLegendDialog}\n          onClose={this.ruleLegendClose}\n          aria-labelledby=\"legend-title\"\n          aria-describedby=\"legend-description\"\n        >\n          <DialogTitle id=\"legend-title\">PII Ruleset Legend</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"legend-description\">\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Redact Email</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Transform emails to unique email address derived from the row&apos;s primary\n                    key, constructed based on provided prefix and domain - i.e.\n                    <code>[prefix][primarykey]@[domain]</code>\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Destruction</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Replace data with a null value\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Replacement</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Replace data with a provided value\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography>Random String</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Typography>\n                    Replace data with a random alphanumeric string of a provided length\n                  </Typography>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </DialogContentText>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog\n          open={this.state.newWorkflowDialog}\n          onClose={this.newWorkflowClose}\n          aria-labelledby=\"dialog-title\"\n          aria-describedby=\"dialog-description\"\n        >\n          <DialogTitle id=\"dialog-title\">Add Workflow</DialogTitle>\n          <DialogContent>\n            <form noValidate autoComplete=\"off\">\n              <Box>\n                Create a name for this workflow, and assign a Redactics Agent to carry out the work defined by this workflow.\n              </Box>\n\n              <Box mt={4}>\n                <FormControl fullWidth>\n                  <TextField\n                    name=\"name\"\n                    label=\"Workflow Name\"\n                    onChange={this.handleChangeAdd}\n                    value={this.state.newWorkflowName}\n                  />\n                </FormControl>\n              </Box>\n\n              <Box mt={4}>\n                <FormControl margin=\"dense\" fullWidth>\n                  <InputLabel>\n                    Workflow Type\n                  </InputLabel>\n                  <Select\n                    value={this.state.newWorkflowType}\n                    name=\"workflowType\"\n                    onChange={this.handleChangeAdd}\n                    endAdornment={\n                      <InputAdornment className={this.props.classes.selectAdornment} position=\"end\">\n                        <Tooltip title=\"The web-based ERL testing option allows you to test ERL workflows with some preset sample dataset options without having to install the Redactics Agent into your own infrastructure. This option is multi-tenant, but a single-tenant mode is available you can run with your own datasets - contact us for more info.\" placement=\"right-start\"><HelpIcon /></Tooltip>\n                      </InputAdornment>\n                    }\n                  >\n                    <MenuItem key=\"ERL\" value=\"ERL\">ERL (Extract, Redact, Load)</MenuItem>\n                    <MenuItem key=\"mockDatabaseMigration\" value=\"mockDatabaseMigration\">Database Clone for Migration Dry-run</MenuItem>\n                  </Select>\n                </FormControl>\n              </Box>\n\n              <Box mt={4} display={(this.state.newWorkflowType.match(/^(ERL|mockDatabaseMigration)/)) ? 'block' : 'none'}>\n                <FormControl fullWidth>\n                  <InputLabel htmlFor=\"agentId\">Redactics Agent</InputLabel>\n                  <Select\n                    name=\"agentId\"\n                    onChange={this.handleChangeAdd}\n                    value={this.state.newWorkflowAgent}\n                  >\n                    {this.state.agents.map((agent:AgentRecord) => (\n                      <MenuItem key={agent.uuid} value={agent.uuid}>{agent.name}</MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Box>\n\n              <Box mt={8}>\n                <DialogActions>\n                  <Button color=\"secondary\" onClick={this.newWorkflowClose}>\n                    Cancel\n                  </Button>\n\n                  <Button color=\"secondary\" variant=\"contained\" disabled={this.state.saveButtonDisabled} onClick={this.addWorkflow}>\n                    Save&nbsp;<SaveIcon />\n                  </Button>\n                </DialogActions>\n              </Box>\n            </form>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog\n          open={this.state.dbLimitError}\n          onClose={this.dbLimitErrorClose}\n          aria-labelledby=\"dialog-title\"\n          aria-describedby=\"dialog-description\"\n        >\n          <DialogTitle id=\"dialog-title\">You&apos;ve Reached Your Account Limit</DialogTitle>\n          <DialogContent>\n            <Box>\n              This Redactics account is currently limited to support defining only a single\n              database. Please contact us if you wish to upgrade this account.\n            </Box>\n\n            <DialogActions>\n              <Button color=\"secondary\" onClick={this.dbLimitErrorClose}>\n                Okay\n              </Button>\n            </DialogActions>\n          </DialogContent>\n        </Dialog>\n\n        {this.state.workflows.map((workflow:WorkflowRecord) => <Workflow\n          workflow={workflow}\n          presets={this.state.presets}\n          redactrulesets={this.state.redactrulesets}\n          agents={this.state.agents}\n          agentInputs={this.state.agentInputs}\n          allInputs={this.state.allInputs}\n          key={workflow.uuid}\n          handleWFChanges={this.handleWFChanges}\n          deleteWorkflow={this.deleteWorkflow}\n        />)}\n\n      </React.Fragment>\n    );\n  }\n}\n\n\nexport default withStyles(styles)(Workflows);"],"sourceRoot":""}