(this.webpackJsonpredactics=this.webpackJsonpredactics||[]).push([[8],{567:function(e,t,a){"use strict";var n=a(0),r=n.createContext({});t.a=r},580:function(e,t,a){"use strict";var n=a(1),r=a(4),s=a(0),l=(a(3),a(5)),i=a(6),c=s.forwardRef((function(e,t){var a=e.classes,i=e.className,c=Object(r.a)(e,["classes","className"]);return s.createElement("div",Object(n.a)({className:Object(l.a)(a.root,i),ref:t},c))}));t.a=Object(i.a)({root:{display:"flex",padding:"8px 24px 24px"}},{name:"MuiExpansionPanelDetails"})(c)},581:function(e,t,a){"use strict";var n=a(1),r=a(4),s=a(0),l=(a(3),a(5)),i=a(193),c=a(528),o=a(6),d=a(567),u=s.forwardRef((function(e,t){var a=e.children,o=e.classes,u=e.className,m=e.expandIcon,p=e.IconButtonProps,h=e.onBlur,b=e.onClick,f=e.onFocusVisible,g=Object(r.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),v=s.useState(!1),E=v[0],y=v[1],O=s.useContext(d.a),D=O.disabled,j=void 0!==D&&D,k=O.expanded,x=O.toggle;return s.createElement(i.a,Object(n.a)({focusRipple:!1,disableRipple:!0,disabled:j,component:"div","aria-expanded":k,className:Object(l.a)(o.root,u,j&&o.disabled,k&&o.expanded,E&&o.focused),onFocusVisible:function(e){y(!0),f&&f(e)},onBlur:function(e){y(!1),h&&h(e)},onClick:function(e){x&&x(e),b&&b(e)},ref:t},g),s.createElement("div",{className:Object(l.a)(o.content,k&&o.expanded)},a),m&&s.createElement(c.a,Object(n.a)({className:Object(l.a)(o.expandIcon,k&&o.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},p),m))}));t.a=Object(o.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,3),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.grey[300]},"&$disabled":{opacity:.38}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiExpansionPanelSummary"})(u)},582:function(e,t,a){"use strict";var n=a(1),r=a(201),s=a(200),l=a(123),i=a(202);var c=a(197),o=a(4),d=a(0),u=(a(75),a(3),a(5)),m=a(554),p=a(192),h=a(6),b=a(567),f=a(568),g=d.forwardRef((function(e,t){var a,h=e.children,g=e.classes,v=e.className,E=e.defaultExpanded,y=void 0!==E&&E,O=e.disabled,D=void 0!==O&&O,j=e.expanded,k=e.onChange,x=e.square,C=void 0!==x&&x,R=e.TransitionComponent,P=void 0===R?m.a:R,S=e.TransitionProps,w=Object(o.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),B=Object(f.a)({controlled:j,default:y,name:"ExpansionPanel",state:"expanded"}),N=Object(c.a)(B,2),K=N[0],I=N[1],T=d.useCallback((function(e){I(!K),k&&k(e,!K)}),[K,k,I]),V=d.Children.toArray(h),W=(a=V,Object(r.a)(a)||Object(s.a)(a)||Object(l.a)(a)||Object(i.a)()),F=W[0],H=W.slice(1),L=d.useMemo((function(){return{expanded:K,disabled:D,toggle:T}}),[K,D,T]);return d.createElement(p.a,Object(n.a)({className:Object(u.a)(g.root,v,K&&g.expanded,D&&g.disabled,!C&&g.rounded),ref:t,square:C},w),d.createElement(b.a.Provider,{value:L},F),d.createElement(P,Object(n.a)({in:K,timeout:"auto"},S),d.createElement("div",{"aria-labelledby":F.props.id,id:F.props["aria-controls"],role:"region"},H)))}));t.a=Object(h.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiExpansionPanel"})(g)},590:function(e,t,a){"use strict";var n=a(4),r=a(29),s=a(1),l=a(0),i=(a(3),a(5)),c=a(6),o=a(550),d=l.forwardRef((function(e,t){var a,r=e.classes,c=e.className,d=e.component,u=void 0===d?"li":d,m=e.disableGutters,p=void 0!==m&&m,h=e.ListItemClasses,b=e.role,f=void 0===b?"menuitem":b,g=e.selected,v=e.tabIndex,E=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==v?v:-1),l.createElement(o.a,Object(s.a)({button:!0,role:f,tabIndex:a,component:u,selected:g,disableGutters:p,classes:Object(s.a)({dense:r.dense},h),className:Object(i.a)(r.root,c,g&&r.selected,!p&&r.gutters),ref:t},E))}));t.a=Object(c.a)((function(e){return{root:Object(s.a)({},e.typography.body1,Object(r.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(s.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(d)},629:function(e,t,a){"use strict";a.r(t);var n,r,s,l,i,c,o,d,u=a(50),m=a.n(u),p=a(76),h=a(86),b=a(87),f=a(54),g=a(89),v=a(88),E=a(0),y=a.n(E),O=a(11),D=a(198),j=a.n(D),k=a(6),x=a(588),C=a(587),R=a(547),P=a(531),S=a(580),w=a(85),B=a(592),N=a(560),K=a(582),I=a(581),T=a(540),V=a(541),W=a(542),F=a(543),H=a(544),L=a(636),M=a(528),_=a(553),q=a(621),$=a(624),z=a(623),G=a(563),J=a(122),U=a(14),A=a(617),Y=a(637),Q=Object(O.c)(A.a)(G.b),X=Object(O.c)(Y.a)(G.b),Z=Object(O.c)(X)(n||(n=Object(U.a)(["\n  width: 300px;\n"]))),ee=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},"Transform emails to unique email address derived from the row's primary key, constructed based on provided prefix and domain - i.e. ",y.a.createElement("code",null,"[prefix][primarykey]@[domain]")),y.a.createElement("form",{noValidate:!0,autoComplete:"off"},y.a.createElement(Q,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(Z,{name:"prefix",label:"Prefix",value:this.props.ruleDefaults.redactData.prefix,onChange:this.props.handleRedactEmailChange})),y.a.createElement(Q,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(Z,{name:"primaryKey",label:"Primary Key",value:this.props.ruleDefaults.redactData.primaryKey,onChange:this.props.handleRedactEmailChange})),y.a.createElement(Q,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(Z,{name:"domain",label:"Domain",value:this.props.ruleDefaults.redactData.domain,onChange:this.props.handleRedactEmailChange})),y.a.createElement(N.a,{mt:4},y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},y.a.createElement("b",null,"Sample Output")),y.a.createElement(w.a,{variant:"h6",gutterBottom:!0},y.a.createElement("code",null,this.props.ruleDefaults.redactData.prefix,"12345@",this.props.ruleDefaults.redactData.domain)))))}}]),a}(y.a.Component),te=Object(O.c)(A.a)(G.b),ae=Object(O.c)(Y.a)(G.b),ne=Object(O.c)(ae)(r||(r=Object(U.a)(["\n  width: 300px;\n"]))),re=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},"Replace data with a provided value"),y.a.createElement("form",{noValidate:!0,autoComplete:"off"},y.a.createElement(te,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(ne,{name:"replacement",label:"Replacement Text",value:this.props.ruleDefaults.redactData.replacement,onChange:this.props.handleReplacementChange})),y.a.createElement(N.a,{mt:4},y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},y.a.createElement("b",null,"Sample Output")),y.a.createElement(w.a,{variant:"h6",gutterBottom:!0},y.a.createElement("code",null,this.props.ruleDefaults.redactData.replacement)))))}}]),a}(y.a.Component),se=Object(O.c)(A.a)(G.b),le=Object(O.c)(Y.a)(G.b),ie=Object(O.c)(le)(s||(s=Object(U.a)(["\n  width: 300px;\n"]))),ce=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.ruleDefaults.redactData.chars||24;return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},"Replace data with a random alphanumeric string of a provided length"),y.a.createElement("form",{noValidate:!0,autoComplete:"off"},y.a.createElement(se,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(ie,{name:"randomString",label:"Random String Character Length",value:this.props.ruleDefaults.redactData.chars,type:"number",onChange:this.props.handleRandomStringChange})),y.a.createElement(N.a,{mt:4},y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},y.a.createElement("b",null,"Sample Output")),y.a.createElement(w.a,{variant:"h6",gutterBottom:!0},y.a.createElement("code",null,a.generateRandom(e))))))}}],[{key:"generateRandom",value:function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=e;n>0;n-=1)t+=a[Math.floor(Math.random()*a.length)];return t}}]),a}(y.a.Component),oe=a(630),de=a(641),ue=a(640),me=a(590),pe=a(622),he=Object(O.c)(A.a)(G.b),be=Object(O.c)(Y.a)(G.b),fe=Object(O.c)(be)(l||(l=Object(U.a)(["\n  width: 300px;\n"]))),ge=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={key:n.props.selectedPreset.key||"",prefix:n.props.selectedPreset.redactData.prefix||"redacted",domain:n.props.selectedPreset.redactData.domain||"redactics.com",primaryKey:n.props.selectedPreset.redactData.primaryKey||"id"},n}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},'Transform emails to unique email address derived from the row"s primary key, constructed based on provided prefix and domain - i.e. ',y.a.createElement("code",null,"[prefix][primarykey]@[domain]")),y.a.createElement("form",{noValidate:!0,autoComplete:"off"},y.a.createElement(he,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(fe,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"prefix",label:"Prefix",defaultValue:this.state.prefix})),y.a.createElement(he,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(fe,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"primaryKey",label:"Primary Key",defaultValue:this.state.primaryKey})),y.a.createElement(he,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(fe,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"domain",label:"Domain",defaultValue:this.state.domain}))))}}]),a}(y.a.Component),ve=Object(O.c)(A.a)(G.b),Ee=Object(O.c)(Y.a)(G.b),ye=Object(O.c)(Ee)(i||(i=Object(U.a)(["\n  width: 300px;\n"]))),Oe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={key:n.props.selectedPreset.key||"",replacement:n.props.selectedPreset.redactData.replacement||"redacted"},n}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},"Replace data with a provided value"),y.a.createElement("form",{noValidate:!0,autoComplete:"off"},y.a.createElement(ve,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(ye,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"replacement",label:"Replacement Text",defaultValue:this.state.replacement}))))}}]),a}(y.a.Component),De=Object(O.c)(A.a)(G.b),je=Object(O.c)(Y.a)(G.b),ke=Object(O.c)(je)(c||(c=Object(U.a)(["\n  width: 300px;\n"]))),xe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={key:n.props.selectedPreset.key||"",chars:n.props.selectedPreset.redactData.chars||24},n}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},"Replace data with a random alphanumeric string of a provided length"),y.a.createElement("form",{noValidate:!0,autoComplete:"off"},y.a.createElement(De,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(ke,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"chars",label:"Random String Character Length",defaultValue:this.state.chars,type:"number"}))))}}]),a}(y.a.Component),Ce=Object(O.c)(A.a)(G.b),Re=Object(O.c)(R.a)(G.b),Pe=Object(O.c)(Y.a)(G.b),Se=Object(O.c)(Pe)(o||(o=Object(U.a)(["\n  width: 300px;\n"]))),we=Object(O.c)(P.a)(G.b),Be=Object(O.c)(oe.a)(G.b),Ne=Object(O.c)(Be)(d||(d=Object(U.a)(["\n  width: 300px;\n"]))),Ke=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={ruleLabelWidth:30,rulesets:n.props.rulesets,preset:n.props.selectedPreset},n.resetPresetName=n.resetPresetName.bind(Object(f.a)(n)),n}return Object(b.a)(a,[{key:"resetPresetName",value:function(){var e=this.state.preset;"New Preset"===e.presetName&&(e.presetName=""),this.setState({preset:e})}},{key:"render",value:function(){var e=this;return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{mt:6},y.a.createElement(Ce,{fullWidth:!0,margin:"normal",variant:"outlined"},y.a.createElement(Se,{value:this.state.preset.presetName,name:"presetName",label:"Preset Name",onChange:function(t){return e.props.handlePresetChange(e.props.selectedPreset.key,t)},onFocus:this.resetPresetName})),y.a.createElement(Ce,{variant:"outlined",margin:"dense"},y.a.createElement(de.a,null,"Rule"),y.a.createElement(Ne,{value:this.state.preset.rule,onChange:function(t){return e.props.handlePresetChange(e.props.selectedPreset.key,t)},name:"rule",input:y.a.createElement(ue.a,{labelWidth:this.state.ruleLabelWidth,name:"rule"})},this.state.rulesets.map((function(e){return y.a.createElement(me.a,{key:e.redactKey,value:e.redactKey},e.redactName)})))),y.a.createElement(N.a,{mt:4},"redact_email"===this.state.preset.rule?y.a.createElement(ge,{key:this.state.preset.key,handleChange:this.props.handlePresetChange,selectedPreset:this.state.preset}):"","replacement"===this.state.preset.rule?y.a.createElement(Oe,{key:this.state.preset.key,handleChange:this.props.handlePresetChange,selectedPreset:this.state.preset}):"","random_string"===this.state.preset.rule?y.a.createElement(xe,{key:this.state.preset.key,handleChange:this.props.handlePresetChange,selectedPreset:this.state.preset}):""),y.a.createElement(Re,{container:!0,justify:"space-between",alignItems:"center",mt:12},y.a.createElement(Re,{item:!0,xs:10}),y.a.createElement(Re,{item:!0},y.a.createElement(we,{variant:"contained",color:"default",size:"small",onClick:function(t){return e.props.deletePreset(e.state.preset,t)}},y.a.createElement(pe.a,null),"\xa0\xa0Delete")))))}}]),a}(y.a.Component),Ie=Object(O.c)(x.a)(G.b),Te=Object(O.c)(C.a)(G.b),Ve=Object(O.c)(R.a)(G.b),We=Object(O.c)(P.a)(G.b),Fe=Object(k.a)({root:{display:"block"}})(S.a),He=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleSnackbarClose=function(){n.setState({showSnackbar:!1})},n.state={uniquePresetKey:0,incompletePreset:!1,rulesets:[],presets:[],errors:[],isOwner:!1,saveDefaultRulesButtonDisabled:!1,saveCustomPresetButtonDisabled:!1,helmReminderCheckbox:!1,ackHelmReminder:!1,showSnackbar:!1,redactEmailDefault:{redactData:{prefix:"redacted",primaryKey:"id",domain:"redactics.com"},uuid:""},redactReplacementDefault:{redactData:{replacement:"redacted"},uuid:""},redactRandomStringDefault:{redactData:{chars:24},uuid:""}},n.refreshSettings=n.refreshSettings.bind(Object(f.a)(n)),n.addPreset=n.addPreset.bind(Object(f.a)(n)),n.saveDefaultRules=n.saveDefaultRules.bind(Object(f.a)(n)),n.handleRedactEmailChange=n.handleRedactEmailChange.bind(Object(f.a)(n)),n.handleReplacementChange=n.handleReplacementChange.bind(Object(f.a)(n)),n.handleRandomStringChange=n.handleRandomStringChange.bind(Object(f.a)(n)),n.handlePresetSave=n.handlePresetSave.bind(Object(f.a)(n)),n.handlePresetDelete=n.handlePresetDelete.bind(Object(f.a)(n)),n.handlePresetChange=n.handlePresetChange.bind(Object(f.a)(n)),n.toggleExpandPanel=n.toggleExpandPanel.bind(Object(f.a)(n)),n.validatePreset=n.validatePreset.bind(Object(f.a)(n)),n.validateDefaultPreset=n.validateDefaultPreset.bind(Object(f.a)(n)),n.hideErrorDialog=n.hideErrorDialog.bind(Object(f.a)(n)),n}return Object(b.a)(a,[{key:"refreshSettings",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/settings"));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n=a.defaults.find((function(e){return"redact_email"===e.rule})),r=a.defaults.find((function(e){return"replacement"===e.rule})),s=a.defaults.find((function(e){return"random_string"===e.rule})),l=[],a.presets.forEach((function(e){l.push({presetName:e.presetName,rule:e.rule,redactData:e.redactData,key:e.uuid,uuid:e.uuid})})),this.setState({redactEmailDefault:n,redactReplacementDefault:r,redactRandomStringDefault:s,rulesets:a.rulesets,presets:l,isOwner:a.isOwner}),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setState({ackHelmReminder:this.context.ackHelmReminder}),this.refreshSettings()}},{key:"handleRedactEmailChange",value:function(e){var t=this.state.redactEmailDefault;t&&t.redactData&&(t.redactData[e.target.name]=e.target.value,this.setState({redactEmailDefault:t}))}},{key:"handleReplacementChange",value:function(e){var t=this.state.redactReplacementDefault;t&&t.redactData&&(t.redactData.replacement=e.target.value,this.setState({redactReplacementDefault:t}))}},{key:"handleRandomStringChange",value:function(e){var t=this.state.redactRandomStringDefault;t&&t.redactData&&(t.redactData.chars=e.target.value,this.setState({redactRandomStringDefault:t}))}},{key:"handlePresetChange",value:function(e,t){var a=this.state.presets;a.map((function(a){var n=a;if(n.key===e&&"rule"===t.target.name)switch(t.target.value){case"redact_email":n.rule="redact_email",n.redactData={prefix:"redacted",primaryKey:"id",domain:"redacted.com"};break;case"replacement":n.rule="replacement",n.redactData={replacement:"redacted"};break;case"random_string":n.rule="random_string",n.redactData={chars:24}}switch(t.target.name){case"prefix":case"primaryKey":case"domain":case"replacement":case"chars":n.redactData[t.target.name]=t.target.value;break;case"presetName":n.presetName=t.target.value}return n})),this.setState({presets:a})}},{key:"validateDefaultPreset",value:function(e){var t=!1;return e[0].redactData.prefix&&e[0].redactData.primaryKey&&e[0].redactData.domain&&e[1].redactData.replacement&&e[2].redactData.chars||(t=!0),this.setState({incompletePreset:t}),!t}},{key:"validatePreset",value:function(){var e=!1;return this.state.presets.forEach((function(t){t.presetName&&t.rule&&("redact_email"!==t.rule||t.redactData.prefix&&t.redactData.primaryKey&&t.redactData.domain)&&("replacement"!==t.rule||t.redactData.replacement)&&("random_string"!==t.rule||t.redactData.chars)||(e=!0)})),this.setState({incompletePreset:e}),!e}},{key:"hideErrorDialog",value:function(){this.setState({incompletePreset:!1})}},{key:"handlePresetSave",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validatePreset()){e.next=15;break}return this.setState({saveCustomPresetButtonDisabled:!0}),e.prev=2,e.next=5,fetch("".concat(this.context.apiUrl,"/settings/presets"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.presets)});case 5:this.refreshSettings(),t=this.state.presets.map((function(e){var t=e;return t.expanded=!1,t})),this.setState({showSnackbar:!0,saveCustomPresetButtonDisabled:!1,presets:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.setState({saveCustomPresetButtonDisabled:!1});case 13:e.next=16;break;case 15:this.setState({saveCustomPresetButtonDisabled:!1});case 16:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"handlePresetDelete",value:function(e){var t=this.state.uniquePresetKey+1,a=this.state.presets.filter((function(a){var n=a;return n.key===e.key&&(n.key="delete".concat(t)),n}));this.setState({presets:a})}},{key:"addPreset",value:function(){var e=this.state.presets,t=this.state.uniquePresetKey+1;e.unshift({presetName:"New Preset",rule:"",redactData:{},key:"new".concat(t),expanded:!0}),this.setState({presets:e,uniquePresetKey:t})}},{key:"saveDefaultRules",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({saveDefaultRulesButtonDisabled:!0}),t=[],this.state.redactEmailDefault&&t.push({uuid:this.state.redactEmailDefault.uuid,redactData:this.state.redactEmailDefault.redactData}),this.state.redactReplacementDefault&&t.push({uuid:this.state.redactReplacementDefault.uuid,redactData:this.state.redactReplacementDefault.redactData}),this.state.redactRandomStringDefault&&t.push({uuid:this.state.redactRandomStringDefault.uuid,redactData:this.state.redactRandomStringDefault.redactData}),!this.validateDefaultPreset(t)){e.next=16;break}return e.prev=6,e.next=9,fetch("".concat(this.context.apiUrl,"/settings/saveRuleDefaults"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 9:this.setState({showSnackbar:!0,saveDefaultRulesButtonDisabled:!1}),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:e.next=17;break;case 16:this.setState({saveDefaultRulesButtonDisabled:!1});case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"toggleExpandPanel",value:function(e,t){var a=this.state.presets.map((function(e){var a=e;return a.key===t.key&&(a.expanded=!a.expanded),a}));this.setState({presets:a})}},{key:"render",value:function(){var e=this;return y.a.createElement(y.a.Fragment,null,y.a.createElement(j.a,{title:"Settings"}),y.a.createElement(w.a,{variant:"h1",gutterBottom:!0,display:"inline"},"Settings"),y.a.createElement(Ie,{my:6}),y.a.createElement(Te,{mb:6},y.a.createElement(B.a,null,y.a.createElement(w.a,{variant:"h4",gutterBottom:!0},"Default Redaction Rule Settings"),y.a.createElement(N.a,{mt:4},y.a.createElement(K.a,null,y.a.createElement(I.a,{expandIcon:y.a.createElement(_.a,null)},y.a.createElement(w.a,{variant:"h6"},"Redact Email")),y.a.createElement(Fe,null,this.state.redactEmailDefault?y.a.createElement(ee,{ruleDefaults:this.state.redactEmailDefault,handleRedactEmailChange:this.handleRedactEmailChange}):"")),y.a.createElement(K.a,null,y.a.createElement(I.a,{expandIcon:y.a.createElement(_.a,null)},y.a.createElement(w.a,{variant:"h6"},"Replacement")),y.a.createElement(Fe,null,this.state.redactReplacementDefault?y.a.createElement(re,{ruleDefaults:this.state.redactReplacementDefault,handleReplacementChange:this.handleReplacementChange}):"")),y.a.createElement(K.a,null,y.a.createElement(I.a,{expandIcon:y.a.createElement(_.a,null)},y.a.createElement(w.a,{variant:"h6"},"Random String")),y.a.createElement(Fe,null,this.state.redactRandomStringDefault?y.a.createElement(ce,{ruleDefaults:this.state.redactRandomStringDefault,handleRandomStringChange:this.handleRandomStringChange}):""))),y.a.createElement(We,{variant:"contained",disabled:this.state.saveDefaultRulesButtonDisabled,color:"primary",size:"large",mt:8,onClick:this.saveDefaultRules},y.a.createElement(z.a,null),"\xa0Save Changes"))),y.a.createElement(Ve,{justify:"flex-end",container:!0,spacing:10,mt:10},y.a.createElement(Ve,{item:!0},y.a.createElement(We,{variant:"contained",color:"primary",onClick:this.addPreset},y.a.createElement(q.a,null),"\xa0 Add Preset"))),y.a.createElement(Te,{mb:6,mt:2},y.a.createElement(B.a,null,y.a.createElement(w.a,{variant:"h4",gutterBottom:!0},"Custom Redaction Rule Presets"),y.a.createElement(N.a,{width:.5,mt:8},y.a.createElement(w.a,{variant:"body1",gutterBottom:!0},"Redaction rule presets allow you to create reusable settings that can be set on your database fields while eliminating a lot of extra input. Simply define your preset here and it will appear as a redaction rule option in the Databases section of this app.")),y.a.createElement(N.a,{mt:4},this.state.presets.map((function(t){return t.key&&!t.key.match(/^delete/)?y.a.createElement(K.a,{expanded:t.expanded,onChange:function(a){return e.toggleExpandPanel(a,t)},key:t.key},y.a.createElement(I.a,{expandIcon:y.a.createElement(_.a,null)},y.a.createElement(w.a,{variant:"h6"},t.presetName)),y.a.createElement(Fe,null,y.a.createElement(Ke,{key:t.key,rulesets:e.state.rulesets,selectedPreset:t,handlePresetChange:e.handlePresetChange,deletePreset:e.handlePresetDelete}))):null}))),y.a.createElement(N.a,{mt:8},y.a.createElement(We,{variant:"contained",color:"primary",size:"large",disabled:this.state.saveCustomPresetButtonDisabled,onClick:this.handlePresetSave},y.a.createElement(z.a,null),"\xa0Save Changes")))),y.a.createElement(T.a,{open:this.state.incompletePreset,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},y.a.createElement(V.a,{id:"dialog-title"},"Error"),y.a.createElement(W.a,null,y.a.createElement(F.a,{id:"dialog-description"},"One or more of your preset rules contains a blank value"),y.a.createElement(H.a,null,y.a.createElement(We,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),y.a.createElement(L.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSnackbar,autoHideDuration:8e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:y.a.createElement("span",{id:"message-id"},y.a.createElement("b",null,"Your changes have been saved!")),action:[y.a.createElement(M.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},y.a.createElement($.a,null))]}))}}]),a}(y.a.Component);He.contextType=J.a;t.default=He}}]);
//# sourceMappingURL=8.042b6f40.chunk.js.map