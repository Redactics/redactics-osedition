(this.webpackJsonpredactics=this.webpackJsonpredactics||[]).push([[8],{584:function(e,t,a){"use strict";var r=a(1),n=a(4),i=a(0),o=(a(3),a(5)),l=a(192),c=a(6),s=i.forwardRef((function(e,t){var a=e.classes,c=e.className,s=e.raised,u=void 0!==s&&s,m=Object(n.a)(e,["classes","className","raised"]);return i.createElement(l.a,Object(r.a)({className:Object(o.a)(a.root,c),elevation:u?8:1,ref:t},m))}));t.a=Object(c.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(s)},585:function(e,t,a){"use strict";var r=a(1),n=a(4),i=a(0),o=(a(3),a(5)),l=a(6),c=a(10),s=i.forwardRef((function(e,t){var a=e.absolute,l=void 0!==a&&a,c=e.classes,s=e.className,u=e.component,m=void 0===u?"hr":u,d=e.flexItem,f=void 0!==d&&d,b=e.light,p=void 0!==b&&b,h=e.orientation,g=void 0===h?"horizontal":h,v=e.role,E=void 0===v?"hr"!==m?"separator":void 0:v,y=e.variant,k=void 0===y?"fullWidth":y,w=Object(n.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return i.createElement(m,Object(r.a)({className:Object(o.a)(c.root,s,"fullWidth"!==k&&c[k],l&&c.absolute,f&&c.flexItem,p&&c.light,"vertical"===g&&c.vertical),role:E,ref:t},w))}));t.a=Object(l.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(c.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(s)},589:function(e,t,a){"use strict";var r=a(1),n=a(4),i=a(0),o=(a(3),a(5)),l=a(6),c=i.forwardRef((function(e,t){var a=e.classes,l=e.className,c=e.component,s=void 0===c?"div":c,u=Object(n.a)(e,["classes","className","component"]);return i.createElement(s,Object(r.a)({className:Object(o.a)(a.root,l),ref:t},u))}));t.a=Object(l.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(c)},599:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(59);t.a=Object(i.a)(n.a.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},635:function(e,t,a){"use strict";a.r(t);var r=a(50),n=a.n(r),i=a(76),o=a(86),l=a(87),c=a(54),s=a(89),u=a(88),m=a(0),d=a.n(m),f=a(11),b=a(197),p=a.n(b),h=a(186),g=a.n(h),v=a(154),E=a(152),y=a(584),k=a(585),w=a(547),j=a(531),O=a(560),C=a(1),x=a(4),S=(a(3),a(5)),M=a(8),I=a(6),T=a(10),N=a(33),z=m.forwardRef((function(e,t){var a=e.classes,r=e.className,n=e.color,i=void 0===n?"primary":n,o=e.value,l=e.valueBuffer,c=e.variant,s=void 0===c?"indeterminate":c,u=Object(x.a)(e,["classes","className","color","value","valueBuffer","variant"]),d=Object(N.a)(),f={},b={bar1:{},bar2:{}};if("determinate"===s||"buffer"===s)if(void 0!==o){f["aria-valuenow"]=Math.round(o);var p=o-100;"rtl"===d.direction&&(p=-p),b.bar1.transform="translateX(".concat(p,"%)")}else 0;if("buffer"===s)if(void 0!==l){var h=(l||0)-100;"rtl"===d.direction&&(h=-h),b.bar2.transform="translateX(".concat(h,"%)")}else 0;return m.createElement("div",Object(C.a)({className:Object(S.a)(a.root,a["color".concat(Object(M.a)(i))],r,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[s]),role:"progressbar"},f,{ref:t},u),"buffer"===s?m.createElement("div",{className:Object(S.a)(a.dashed,a["dashedColor".concat(Object(M.a)(i))])}):null,m.createElement("div",{className:Object(S.a)(a.bar,a["barColor".concat(Object(M.a)(i))],("indeterminate"===s||"query"===s)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[s]),style:b.bar1}),"determinate"===s?null:m.createElement("div",{className:Object(S.a)(a.bar,("indeterminate"===s||"query"===s)&&a.bar2Indeterminate,"buffer"===s?[a["color".concat(Object(M.a)(i))],a.bar2Buffer]:a["barColor".concat(Object(M.a)(i))]),style:b.bar2}))})),D=Object(I.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(T.e)(t,.62):Object(T.a)(t,.5)},a=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0px -23px"},"50%":{opacity:0,backgroundPosition:"0px -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(z),L=a(520),B=a(85),P=a(536),J=a(566),F=a(540),R=a(541),q=a(542),W=a(543),A=a(544),$=a(589),X=a(599),_=a(59),U=Object(_.a)(d.a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Y=a(563),G=a(122),H=Object(f.c)(y.a)(Y.b),K=Object(f.c)(k.a)(Y.b),Q=Object(f.c)(w.a)(Y.b),V=Object(f.c)(j.a)(Y.b),Z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={dataFetched:!1,jobs:[],fbSubs:[],stackTrace:"",showException:!1,pollingTrigger:!1},r.showException=r.showException.bind(Object(c.a)(r)),r.hideDialog=r.hideDialog.bind(Object(c.a)(r)),r.refreshJobListing=r.refreshJobListing.bind(Object(c.a)(r)),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.refreshJobListing(),this.startPolling()}},{key:"showException",value:function(e,t){e.preventDefault(),this.setState({showException:!0,stackTrace:t.stackTrace})}},{key:"hideDialog",value:function(){this.setState({showException:!1})}},{key:"startPolling",value:function(){var e=this;setInterval((function(){e.state.pollingTrigger||e.refreshJobListing()}),5e3)}},{key:"refreshJobListing",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({pollingTrigger:!0}),e.next=4,fetch("".concat(this.context.apiUrl,"/workflow/jobs"));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,this.setState({jobs:a,dataFetched:!0,pollingTrigger:!1}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"progressBar",value:function(e){return e.progress&&e.progress<100?d.a.createElement(O.a,{mt:4},d.a.createElement(D,{variant:"determinate",value:e.progress})):null}},{key:"statusIcon",value:function(e){switch(e.status){case"inProgress":case"queued":return d.a.createElement(L.a,null);case"completed":return d.a.createElement(X.a,{style:{color:v.a[500],fontSize:50}});case"error":return d.a.createElement(U,{style:{color:E.a[500],fontSize:50}})}}},{key:"workflowType",value:function(e){switch(e.workflowType){case"ERL":return d.a.createElement(B.a,{variant:"h5",gutterBottom:!0},"ERL (Extract, Redact, Load)");case"sampletable-athletes":return d.a.createElement(B.a,{variant:"h5",gutterBottom:!0},"Install Sample Table: Athletes");case"sampletable-marketing_campaign":return d.a.createElement(B.a,{variant:"h5",gutterBottom:!0},"Install Sample Table: Marketing Campaign");case"mockDatabaseMigration":return d.a.createElement(B.a,{variant:"h5",gutterBottom:!0},"Database Clone for Migration Dry-run")}}},{key:"displayFile",value:function(e){var t=e.split("/");return t[t.length-1]}},{key:"workflowInfo",value:function(e){return e.workflowId?d.a.createElement(O.a,null,"Workflow: ",e.workflowName," (",d.a.createElement("code",null,e.workflowId),")"):null}},{key:"results",value:function(e){var t=this,a=null;if("completed"===e.status&&e.createdAt!==e.lastTaskEnd)a=e.outputLinks?d.a.createElement(O.a,null,d.a.createElement(O.a,null,d.a.createElement("b",null,"Completed in ",d.a.createElement(g.a,{duration:e.createdAt,date:e.lastTaskEnd})),". ",e.outputSummary||null),d.a.createElement(O.a,{mt:2},d.a.createElement("ul",null,e.outputLinks.map((function(e){return d.a.createElement("li",null,d.a.createElement(P.a,{href:e,target:"_blank"},t.displayFile(e)))}))))):d.a.createElement(O.a,null,d.a.createElement("b",null,"Completed in ",d.a.createElement(g.a,{duration:e.createdAt,date:e.lastTaskEnd})),". ",e.outputSummary||null);else if("error"===e.status){var r=e.exception&&e.exception.length>150?e.exception.substring(0,149)+"...":e.exception;a=d.a.createElement(O.a,null,d.a.createElement(P.a,{href:"#",onClick:function(a){return t.showException(a,e)}},d.a.createElement("b",null,r)))}return a?d.a.createElement(O.a,{mt:4},a):null}},{key:"initialCopies",value:function(e){if(e.outputMetadata&&e.outputMetadata.initialCopies&&e.outputMetadata.initialCopies.length)return d.a.createElement(O.a,{mt:4},d.a.createElement("b",null,"Full Copied Tables"),d.a.createElement(O.a,{mt:4},e.outputMetadata.initialCopies.map((function(e){return d.a.createElement(O.a,{display:"inline",mr:1},d.a.createElement(J.a,{key:e,label:e,variant:"outlined",color:"primary",size:"small"}))}))))}},{key:"copySummary",value:function(e){if(e.outputMetadata&&e.outputMetadata.copySummary&&e.outputMetadata.copySummary.length)return d.a.createElement(O.a,{mt:4},d.a.createElement("b",null,"Copy Summary"),d.a.createElement(O.a,{mt:4},d.a.createElement("ul",null,e.outputMetadata.copySummary.map((function(e){return d.a.createElement("li",null,e)})))))}},{key:"deltaCopies",value:function(e){if(e.outputMetadata&&e.outputMetadata.deltaCopies&&e.outputMetadata.deltaCopies.length)return d.a.createElement(O.a,{mt:4},d.a.createElement("b",null,"Delta Copied Tables"),d.a.createElement(O.a,{mt:4},e.outputMetadata.deltaCopies.map((function(e){return d.a.createElement(O.a,{display:"inline",mr:1},d.a.createElement(J.a,{key:e,label:e,variant:"outlined",color:"primary",size:"small"}))}))))}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(p.a,{title:"Workflow Jobs"}),d.a.createElement(B.a,{variant:"h1",gutterBottom:!0,display:"inline"},"Workflow Jobs"),d.a.createElement(K,{my:6}),d.a.createElement(F.a,{open:this.state.showException,onClose:this.hideDialog,maxWidth:"lg","aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},d.a.createElement(R.a,{id:"dialog-title"},"Error Stacktrace"),d.a.createElement(q.a,null,d.a.createElement(W.a,{id:"dialog-description"},this.state.stackTrace.split("\n").map((function(e,t){return d.a.createElement(d.a.Fragment,{key:"".concat(e,"-").concat(t)},e,d.a.createElement("br",null))}))),d.a.createElement(A.a,null,d.a.createElement(V,{color:"primary",onClick:this.hideDialog},"Close")))),this.state.jobs.map((function(t){return d.a.createElement(O.a,{mb:4,key:t.uuid},d.a.createElement(H,null,d.a.createElement($.a,null,d.a.createElement(Q,{justify:"space-between",container:!0,spacing:10},d.a.createElement(Q,{item:!0,xs:1},e.statusIcon(t)),d.a.createElement(Q,{item:!0,xs:11},e.workflowType(t),e.workflowInfo(t),"Created: ",d.a.createElement(g.a,{fromNow:!0},new Date(t.createdAt)),e.progressBar(t),e.results(t),e.deltaCopies(t),e.initialCopies(t),e.copySummary(t))))))})),!this.state.dataFetched||this.state.jobs&&this.state.jobs.length?null:d.a.createElement(H,{mt:8},d.a.createElement($.a,null,"You have no workflow jobs yet. Jobs will appear here after the time the job has been scheduled for, or when run manually.")))}}]),a}(d.a.Component);Z.contextType=G.a;t.default=Z}}]);
//# sourceMappingURL=8.7ac890a6.chunk.js.map