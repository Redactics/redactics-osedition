(this.webpackJsonpredactics=this.webpackJsonpredactics||[]).push([[9],{566:function(e,t,a){"use strict";var n=a(0),r=n.createContext({});t.a=r},576:function(e,t,a){"use strict";var n=a(1),r=a(4),l=a(0),s=(a(3),a(5)),i=a(192),c=a(503),o=a(6),d=a(566),u=l.forwardRef((function(e,t){var a=e.children,o=e.classes,u=e.className,m=e.expandIcon,h=e.IconButtonProps,p=e.onBlur,b=e.onClick,f=e.onFocusVisible,g=Object(r.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),v=l.useState(!1),E=v[0],y=v[1],O=l.useContext(d.a),k=O.disabled,D=void 0!==k&&k,j=O.expanded,C=O.toggle;return l.createElement(i.a,Object(n.a)({focusRipple:!1,disableRipple:!0,disabled:D,component:"div","aria-expanded":j,className:Object(s.a)(o.root,u,D&&o.disabled,j&&o.expanded,E&&o.focused),onFocusVisible:function(e){y(!0),f&&f(e)},onBlur:function(e){y(!1),p&&p(e)},onClick:function(e){C&&C(e),b&&b(e)},ref:t},g),l.createElement("div",{className:Object(s.a)(o.content,j&&o.expanded)},a),m&&l.createElement(c.a,Object(n.a)({className:Object(s.a)(o.expandIcon,j&&o.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},h),m))}));t.a=Object(o.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,3),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.grey[300]},"&$disabled":{opacity:.38}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiExpansionPanelSummary"})(u)},577:function(e,t,a){"use strict";var n=a(1),r=a(200),l=a(199),s=a(124),i=a(201);var c=a(123),o=a(4),d=a(0),u=(a(75),a(3),a(5)),m=a(552),h=a(191),p=a(6),b=a(566),f=a(198),g=d.forwardRef((function(e,t){var a,p=e.children,g=e.classes,v=e.className,E=e.defaultExpanded,y=void 0!==E&&E,O=e.disabled,k=void 0!==O&&O,D=e.expanded,j=e.onChange,C=e.square,R=void 0!==C&&C,x=e.TransitionComponent,P=void 0===x?m.a:x,S=e.TransitionProps,w=Object(o.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),B=Object(f.a)({controlled:D,default:y,name:"ExpansionPanel",state:"expanded"}),N=Object(c.a)(B,2),H=N[0],K=N[1],I=d.useCallback((function(e){K(!H),j&&j(e,!H)}),[H,j,K]),T=d.Children.toArray(p),V=(a=T,Object(r.a)(a)||Object(l.a)(a)||Object(s.a)(a)||Object(i.a)()),W=V[0],F=V.slice(1),L=d.useMemo((function(){return{expanded:H,disabled:k,toggle:I}}),[H,k,I]);return d.createElement(h.a,Object(n.a)({className:Object(u.a)(g.root,v,H&&g.expanded,k&&g.disabled,!R&&g.rounded),ref:t,square:R},w),d.createElement(b.a.Provider,{value:L},W),d.createElement(P,Object(n.a)({in:H,timeout:"auto"},S),d.createElement("div",{"aria-labelledby":W.props.id,id:W.props["aria-controls"],role:"region"},F)))}));t.a=Object(p.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiExpansionPanel"})(g)},585:function(e,t,a){"use strict";var n=a(4),r=a(29),l=a(1),s=a(0),i=(a(3),a(5)),c=a(6),o=a(548),d=s.forwardRef((function(e,t){var a,r=e.classes,c=e.className,d=e.component,u=void 0===d?"li":d,m=e.disableGutters,h=void 0!==m&&m,p=e.ListItemClasses,b=e.role,f=void 0===b?"menuitem":b,g=e.selected,v=e.tabIndex,E=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==v?v:-1),s.createElement(o.a,Object(l.a)({button:!0,role:f,tabIndex:a,component:u,selected:g,disableGutters:h,classes:Object(l.a)({dense:r.dense},p),className:Object(i.a)(r.root,c,g&&r.selected,!h&&r.gutters),ref:t},E))}));t.a=Object(c.a)((function(e){return{root:Object(l.a)({},e.typography.body1,Object(r.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(l.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(d)},630:function(e,t,a){"use strict";a.r(t);var n,r,l,s,i,c,o,d,u,m=a(65),h=a.n(m),p=a(101),b=a(85),f=a(86),g=a(58),v=a(88),E=a(87),y=a(14),O=a(0),k=a.n(O),D=a(10),j=a(197),C=a.n(j),R=a(6),x=a(582),P=a(581),S=a(614),w=a(545),B=a(637),N=a(541),H=a(592),K=a(84),I=a(586),T=a(558),V=a(577),W=a(576),F=a(536),L=a(537),_=a(538),q=a(539),M=a(542),$=a(560),G=a(540),U=a(636),z=a(503),J=a(551),A=a(618),Y=a(624),Q=a(623),X=a(562),Z=a(122),ee=Object(D.c)(S.a)(X.b),te=Object(D.c)(B.a)(X.b),ae=Object(D.c)(te)(n||(n=Object(y.a)(["\n  width: 300px;\n"]))),ne=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return k.a.createElement(k.a.Fragment,null,k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"Transform emails to unique email address derived from the row's primary key, constructed based on provided prefix and domain - i.e. ",k.a.createElement("code",null,"[prefix][primarykey]@[domain]")),k.a.createElement("form",{noValidate:!0,autoComplete:"off"},k.a.createElement(ee,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(ae,{name:"prefix",label:"Prefix",value:this.props.ruleDefaults.redactData.prefix,onChange:this.props.handleRedactEmailChange})),k.a.createElement(ee,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(ae,{name:"primaryKey",label:"Primary Key",value:this.props.ruleDefaults.redactData.primaryKey,onChange:this.props.handleRedactEmailChange})),k.a.createElement(ee,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(ae,{name:"domain",label:"Domain",value:this.props.ruleDefaults.redactData.domain,onChange:this.props.handleRedactEmailChange})),k.a.createElement(T.a,{mt:4},k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},k.a.createElement("b",null,"Sample Output")),k.a.createElement(K.a,{variant:"h6",gutterBottom:!0},k.a.createElement("code",null,this.props.ruleDefaults.redactData.prefix,"12345@",this.props.ruleDefaults.redactData.domain)))))}}]),a}(k.a.Component),re=Object(D.c)(S.a)(X.b),le=Object(D.c)(B.a)(X.b),se=Object(D.c)(le)(r||(r=Object(y.a)(["\n  width: 300px;\n"]))),ie=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return k.a.createElement(k.a.Fragment,null,k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"Replace data with a provided value"),k.a.createElement("form",{noValidate:!0,autoComplete:"off"},k.a.createElement(re,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(se,{name:"replacement",label:"Replacement Text",value:this.props.ruleDefaults.redactData.replacement,onChange:this.props.handleReplacementChange})),k.a.createElement(T.a,{mt:4},k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},k.a.createElement("b",null,"Sample Output")),k.a.createElement(K.a,{variant:"h6",gutterBottom:!0},k.a.createElement("code",null,this.props.ruleDefaults.redactData.replacement)))))}}]),a}(k.a.Component),ce=Object(D.c)(S.a)(X.b),oe=Object(D.c)(B.a)(X.b),de=Object(D.c)(oe)(l||(l=Object(y.a)(["\n  width: 300px;\n"]))),ue=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.ruleDefaults.redactData.chars||24;return k.a.createElement(k.a.Fragment,null,k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"Replace data with a random alphanumeric string of a provided length"),k.a.createElement("form",{noValidate:!0,autoComplete:"off"},k.a.createElement(ce,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(de,{name:"randomString",label:"Random String Character Length",value:this.props.ruleDefaults.redactData.chars,type:"number",onChange:this.props.handleRandomStringChange})),k.a.createElement(T.a,{mt:4},k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},k.a.createElement("b",null,"Sample Output")),k.a.createElement(K.a,{variant:"h6",gutterBottom:!0},k.a.createElement("code",null,a.generateRandom(e))))))}}],[{key:"generateRandom",value:function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=e;n>0;n-=1)t+=a[Math.floor(Math.random()*a.length)];return t}}]),a}(k.a.Component),me=a(631),he=a(641),pe=a(640),be=a(585),fe=a(622),ge=Object(D.c)(S.a)(X.b),ve=Object(D.c)(B.a)(X.b),Ee=Object(D.c)(ve)(s||(s=Object(y.a)(["\n  width: 300px;\n"]))),ye=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={key:n.props.selectedPreset.key||"",prefix:n.props.selectedPreset.redactData.prefix||"redacted",domain:n.props.selectedPreset.redactData.domain||"redactics.com",primaryKey:n.props.selectedPreset.redactData.primaryKey||"id"},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},'Transform emails to unique email address derived from the row"s primary key, constructed based on provided prefix and domain - i.e. ',k.a.createElement("code",null,"[prefix][primarykey]@[domain]")),k.a.createElement("form",{noValidate:!0,autoComplete:"off"},k.a.createElement(ge,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(Ee,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"prefix",label:"Prefix",defaultValue:this.state.prefix})),k.a.createElement(ge,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(Ee,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"primaryKey",label:"Primary Key",defaultValue:this.state.primaryKey})),k.a.createElement(ge,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(Ee,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"domain",label:"Domain",defaultValue:this.state.domain}))))}}]),a}(k.a.Component),Oe=Object(D.c)(S.a)(X.b),ke=Object(D.c)(B.a)(X.b),De=Object(D.c)(ke)(i||(i=Object(y.a)(["\n  width: 300px;\n"]))),je=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={key:n.props.selectedPreset.key||"",replacement:n.props.selectedPreset.redactData.replacement||"redacted"},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"Replace data with a provided value"),k.a.createElement("form",{noValidate:!0,autoComplete:"off"},k.a.createElement(Oe,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(De,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"replacement",label:"Replacement Text",defaultValue:this.state.replacement}))))}}]),a}(k.a.Component),Ce=Object(D.c)(S.a)(X.b),Re=Object(D.c)(B.a)(X.b),xe=Object(D.c)(Re)(c||(c=Object(y.a)(["\n  width: 300px;\n"]))),Pe=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={key:n.props.selectedPreset.key||"",chars:n.props.selectedPreset.redactData.chars||24},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"Replace data with a random alphanumeric string of a provided length"),k.a.createElement("form",{noValidate:!0,autoComplete:"off"},k.a.createElement(Ce,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(xe,{onChange:function(t){return e.props.handleChange(e.state.key,t)},name:"chars",label:"Random String Character Length",defaultValue:this.state.chars,type:"number"}))))}}]),a}(k.a.Component),Se=Object(D.c)(S.a)(X.b),we=Object(D.c)(w.a)(X.b),Be=Object(D.c)(B.a)(X.b),Ne=Object(D.c)(Be)(o||(o=Object(y.a)(["\n  width: 300px;\n"]))),He=Object(D.c)(N.a)(X.b),Ke=Object(D.c)(me.a)(X.b),Ie=Object(D.c)(Ke)(d||(d=Object(y.a)(["\n  width: 300px;\n"]))),Te=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={ruleLabelWidth:30,rulesets:n.props.rulesets,preset:n.props.selectedPreset},n.resetPresetName=n.resetPresetName.bind(Object(g.a)(n)),n}return Object(f.a)(a,[{key:"resetPresetName",value:function(){var e=this.state.preset;"New Preset"===e.presetName&&(e.presetName=""),this.setState({preset:e})}},{key:"render",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(T.a,{mt:6},k.a.createElement(Se,{fullWidth:!0,margin:"normal",variant:"outlined"},k.a.createElement(Ne,{value:this.state.preset.presetName,name:"presetName",label:"Preset Name",onChange:function(t){return e.props.handlePresetChange(e.props.selectedPreset.key,t)},onFocus:this.resetPresetName})),k.a.createElement(Se,{variant:"outlined",margin:"dense"},k.a.createElement(he.a,null,"Rule"),k.a.createElement(Ie,{value:this.state.preset.rule,onChange:function(t){return e.props.handlePresetChange(e.props.selectedPreset.key,t)},name:"rule",input:k.a.createElement(pe.a,{labelWidth:this.state.ruleLabelWidth,name:"rule"})},this.state.rulesets.map((function(e){return k.a.createElement(be.a,{key:e.redactKey,value:e.redactKey},e.redactName)})))),k.a.createElement(T.a,{mt:4},"redact_email"===this.state.preset.rule?k.a.createElement(ye,{key:this.state.preset.key,handleChange:this.props.handlePresetChange,selectedPreset:this.state.preset}):"","replacement"===this.state.preset.rule?k.a.createElement(je,{key:this.state.preset.key,handleChange:this.props.handlePresetChange,selectedPreset:this.state.preset}):"","random_string"===this.state.preset.rule?k.a.createElement(Pe,{key:this.state.preset.key,handleChange:this.props.handlePresetChange,selectedPreset:this.state.preset}):""),k.a.createElement(we,{container:!0,justify:"space-between",alignItems:"center",mt:12},k.a.createElement(we,{item:!0,xs:10}),k.a.createElement(we,{item:!0},k.a.createElement(He,{variant:"contained",color:"default",size:"small",onClick:function(t){return e.props.deletePreset(e.state.preset,t)}},k.a.createElement(fe.a,null),"\xa0\xa0Delete")))))}}]),a}(k.a.Component),Ve=Object(D.c)(x.a)(X.b),We=Object(D.c)(P.a)(X.b),Fe=(Object(D.c)(S.a)(X.b),Object(D.c)(w.a)(X.b)),Le=Object(D.c)(B.a)(X.b),_e=(Object(D.c)(Le)(u||(u=Object(y.a)(["\n  width: 300px;\n"]))),Object(D.c)(N.a)(X.b)),qe=Object(R.a)({root:{display:"block"}})(H.a),Me=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleSnackbarClose=function(){n.setState({showSnackbar:!1})},n.state={uniquePresetKey:0,incompletePreset:!1,rulesets:[],presets:[],errors:[],isOwner:!1,saveDefaultRulesButtonDisabled:!1,saveCustomPresetButtonDisabled:!1,showHelmReminder:!1,helmReminderCheckbox:!1,ackHelmReminder:!1,showSnackbar:!1,redactEmailDefault:{redactData:{prefix:"redacted",primaryKey:"id",domain:"redactics.com"},uuid:""},redactReplacementDefault:{redactData:{replacement:"redacted"},uuid:""},redactRandomStringDefault:{redactData:{chars:24},uuid:""}},n.refreshSettings=n.refreshSettings.bind(Object(g.a)(n)),n.addPreset=n.addPreset.bind(Object(g.a)(n)),n.saveDefaultRules=n.saveDefaultRules.bind(Object(g.a)(n)),n.handleRedactEmailChange=n.handleRedactEmailChange.bind(Object(g.a)(n)),n.handleReplacementChange=n.handleReplacementChange.bind(Object(g.a)(n)),n.handleRandomStringChange=n.handleRandomStringChange.bind(Object(g.a)(n)),n.handlePresetSave=n.handlePresetSave.bind(Object(g.a)(n)),n.handlePresetDelete=n.handlePresetDelete.bind(Object(g.a)(n)),n.hideHelmReminder=n.hideHelmReminder.bind(Object(g.a)(n)),n.toggleHelmReminder=n.toggleHelmReminder.bind(Object(g.a)(n)),n.handlePresetChange=n.handlePresetChange.bind(Object(g.a)(n)),n.toggleExpandPanel=n.toggleExpandPanel.bind(Object(g.a)(n)),n.validatePreset=n.validatePreset.bind(Object(g.a)(n)),n.validateDefaultPreset=n.validateDefaultPreset.bind(Object(g.a)(n)),n.hideErrorDialog=n.hideErrorDialog.bind(Object(g.a)(n)),n}return Object(f.a)(a,[{key:"refreshSettings",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n,r,l,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.context.apiUrl,"/settings"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n=a.defaults.find((function(e){return"redact_email"===e.rule})),r=a.defaults.find((function(e){return"replacement"===e.rule})),l=a.defaults.find((function(e){return"random_string"===e.rule})),s=[],a.presets.forEach((function(e){s.push({presetName:e.presetName,rule:e.rule,redactData:e.redactData,key:e.uuid,uuid:e.uuid})})),this.setState({redactEmailDefault:n,redactReplacementDefault:r,redactRandomStringDefault:l,rulesets:a.rulesets,presets:s,isOwner:a.isOwner}),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setState({ackHelmReminder:this.context.ackHelmReminder}),this.refreshSettings()}},{key:"handleRedactEmailChange",value:function(e){var t=this.state.redactEmailDefault;t&&t.redactData&&(t.redactData[e.target.name]=e.target.value,this.setState({redactEmailDefault:t}))}},{key:"handleReplacementChange",value:function(e){var t=this.state.redactReplacementDefault;t&&t.redactData&&(t.redactData.replacement=e.target.value,this.setState({redactReplacementDefault:t}))}},{key:"handleRandomStringChange",value:function(e){var t=this.state.redactRandomStringDefault;t&&t.redactData&&(t.redactData.chars=e.target.value,this.setState({redactRandomStringDefault:t}))}},{key:"handlePresetChange",value:function(e,t){var a=this.state.presets;a.map((function(a){var n=a;if(n.key===e&&"rule"===t.target.name)switch(t.target.value){case"redact_email":n.rule="redact_email",n.redactData={prefix:"redacted",primaryKey:"id",domain:"redacted.com"};break;case"replacement":n.rule="replacement",n.redactData={replacement:"redacted"};break;case"random_string":n.rule="random_string",n.redactData={chars:24}}switch(t.target.name){case"prefix":case"primaryKey":case"domain":case"replacement":case"chars":n.redactData[t.target.name]=t.target.value;break;case"presetName":n.presetName=t.target.value}return n})),this.setState({presets:a})}},{key:"validateDefaultPreset",value:function(e){var t=!1;return e[0].redactData.prefix&&e[0].redactData.primaryKey&&e[0].redactData.domain&&e[1].redactData.replacement&&e[2].redactData.chars||(t=!0),this.setState({incompletePreset:t}),!t}},{key:"validatePreset",value:function(){var e=!1;return this.state.presets.forEach((function(t){t.presetName&&t.rule&&("redact_email"!==t.rule||t.redactData.prefix&&t.redactData.primaryKey&&t.redactData.domain)&&("replacement"!==t.rule||t.redactData.replacement)&&("random_string"!==t.rule||t.redactData.chars)||(e=!0)})),this.setState({incompletePreset:e}),!e}},{key:"hideErrorDialog",value:function(){this.setState({incompletePreset:!1})}},{key:"handlePresetSave",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validatePreset()){e.next=15;break}return this.setState({saveCustomPresetButtonDisabled:!0}),e.prev=2,e.next=5,fetch("".concat(this.context.apiUrl,"/settings/presets"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(this.state.presets)});case 5:this.refreshSettings(),t=this.state.presets.map((function(e){var t=e;return t.expanded=!1,t})),this.state.ackHelmReminder?this.setState({showHelmReminder:!1,showSnackbar:!0,saveCustomPresetButtonDisabled:!1,presets:t}):this.setState({showHelmReminder:!0,showSnackbar:!1,saveCustomPresetButtonDisabled:!1,presets:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.setState({saveCustomPresetButtonDisabled:!1});case 13:e.next=16;break;case 15:this.setState({saveCustomPresetButtonDisabled:!1});case 16:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"handlePresetDelete",value:function(e){var t=this.state.uniquePresetKey+1,a=this.state.presets.filter((function(a){var n=a;return n.key===e.key&&(n.key="delete".concat(t)),n}));this.setState({presets:a})}},{key:"addPreset",value:function(){var e=this.state.presets,t=this.state.uniquePresetKey+1;e.unshift({presetName:"New Preset",rule:"",redactData:{},key:"new".concat(t),expanded:!0}),this.setState({presets:e,uniquePresetKey:t})}},{key:"saveDefaultRules",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({saveDefaultRulesButtonDisabled:!0}),t=[],this.state.redactEmailDefault&&t.push({uuid:this.state.redactEmailDefault.uuid,redactData:this.state.redactEmailDefault.redactData}),this.state.redactReplacementDefault&&t.push({uuid:this.state.redactReplacementDefault.uuid,redactData:this.state.redactReplacementDefault.redactData}),this.state.redactRandomStringDefault&&t.push({uuid:this.state.redactRandomStringDefault.uuid,redactData:this.state.redactRandomStringDefault.redactData}),!this.validateDefaultPreset(t)){e.next=16;break}return e.prev=6,e.next=9,fetch("".concat(this.context.apiUrl,"/settings/saveRuleDefaults"),{method:"put",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 9:this.state.ackHelmReminder?this.setState({showHelmReminder:!1,showSnackbar:!0,saveDefaultRulesButtonDisabled:!1}):this.setState({showHelmReminder:!0,showSnackbar:!1,saveDefaultRulesButtonDisabled:!1}),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:e.next=17;break;case 16:this.setState({saveDefaultRulesButtonDisabled:!1});case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"hideHelmReminder",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.helmReminderCheckbox){e.next=6;break}return e.next=3,fetch("".concat(this.context.apiUrl,"/database/ackReminder"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include"});case 3:this.setState({ackHelmReminder:!0,showHelmReminder:!1}),e.next=7;break;case 6:this.setState({showHelmReminder:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleHelmReminder",value:function(e){this.setState({helmReminderCheckbox:!!e.target.checked})}},{key:"toggleExpandPanel",value:function(e,t){var a=this.state.presets.map((function(e){var a=e;return a.key===t.key&&(a.expanded=!a.expanded),a}));this.setState({presets:a})}},{key:"render",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(C.a,{title:"Settings"}),k.a.createElement(K.a,{variant:"h1",gutterBottom:!0,display:"inline"},"Settings"),k.a.createElement(Ve,{my:6}),k.a.createElement(We,{mb:6},k.a.createElement(I.a,null,k.a.createElement(K.a,{variant:"h4",gutterBottom:!0},"Default Redaction Rule Settings"),k.a.createElement(T.a,{mt:4},k.a.createElement(V.a,null,k.a.createElement(W.a,{expandIcon:k.a.createElement(J.a,null)},k.a.createElement(K.a,{variant:"h6"},"Redact Email")),k.a.createElement(qe,null,this.state.redactEmailDefault?k.a.createElement(ne,{ruleDefaults:this.state.redactEmailDefault,handleRedactEmailChange:this.handleRedactEmailChange}):"")),k.a.createElement(V.a,null,k.a.createElement(W.a,{expandIcon:k.a.createElement(J.a,null)},k.a.createElement(K.a,{variant:"h6"},"Replacement")),k.a.createElement(qe,null,this.state.redactReplacementDefault?k.a.createElement(ie,{ruleDefaults:this.state.redactReplacementDefault,handleReplacementChange:this.handleReplacementChange}):"")),k.a.createElement(V.a,null,k.a.createElement(W.a,{expandIcon:k.a.createElement(J.a,null)},k.a.createElement(K.a,{variant:"h6"},"Random String")),k.a.createElement(qe,null,this.state.redactRandomStringDefault?k.a.createElement(ue,{ruleDefaults:this.state.redactRandomStringDefault,handleRandomStringChange:this.handleRandomStringChange}):""))),k.a.createElement(_e,{variant:"contained",disabled:this.state.saveDefaultRulesButtonDisabled,color:"primary",size:"large",mt:8,onClick:this.saveDefaultRules},k.a.createElement(Q.a,null),"\xa0Save Changes"))),k.a.createElement(Fe,{justify:"flex-end",container:!0,spacing:10,mt:10},k.a.createElement(Fe,{item:!0},k.a.createElement(_e,{variant:"contained",color:"primary",onClick:this.addPreset},k.a.createElement(A.a,null),"\xa0 Add Preset"))),k.a.createElement(We,{mb:6,mt:2},k.a.createElement(I.a,null,k.a.createElement(K.a,{variant:"h4",gutterBottom:!0},"Custom Redaction Rule Presets"),k.a.createElement(T.a,{width:.5,mt:8},k.a.createElement(K.a,{variant:"body1",gutterBottom:!0},"Redaction rule presets allow you to create reusable settings that can be set on your database fields while eliminating a lot of extra input. Simply define your preset here and it will appear as a redaction rule option in the Databases section of this app.")),k.a.createElement(T.a,{mt:4},this.state.presets.map((function(t){return t.key&&!t.key.match(/^delete/)?k.a.createElement(V.a,{expanded:t.expanded,onChange:function(a){return e.toggleExpandPanel(a,t)},key:t.key},k.a.createElement(W.a,{expandIcon:k.a.createElement(J.a,null)},k.a.createElement(K.a,{variant:"h6"},t.presetName)),k.a.createElement(qe,null,k.a.createElement(Te,{key:t.key,rulesets:e.state.rulesets,selectedPreset:t,handlePresetChange:e.handlePresetChange,deletePreset:e.handlePresetDelete}))):null}))),k.a.createElement(T.a,{mt:8},k.a.createElement(_e,{variant:"contained",color:"primary",size:"large",disabled:this.state.saveCustomPresetButtonDisabled,onClick:this.handlePresetSave},k.a.createElement(Q.a,null),"\xa0Save Changes")))),k.a.createElement(F.a,{open:this.state.showHelmReminder,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},k.a.createElement(L.a,{id:"dialog-title"},"Your changes have been saved!"),k.a.createElement(_.a,null,k.a.createElement(q.a,{id:"dialog-description"},"However, they will not be applied to your Kubernetes cluster until you run the ",k.a.createElement("code",null,"helm upgrade")," command that is provided when you click on the ",k.a.createElement("b",null,"Generate Helm Upgrade Command")," button (located in the ",k.a.createElement("i",null,"Databases")," section)."),k.a.createElement(T.a,{mt:4},k.a.createElement(M.a,{control:k.a.createElement($.a,{checked:this.state.helmReminderCheckbox,onChange:this.toggleHelmReminder,name:"helmReminder",color:"primary"}),label:"I got it, don't remind me again"})),k.a.createElement(G.a,null,k.a.createElement(_e,{onClick:this.hideHelmReminder,color:"primary",autoFocus:!0},"Okay")))),k.a.createElement(F.a,{open:this.state.incompletePreset,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},k.a.createElement(L.a,{id:"dialog-title"},"Error"),k.a.createElement(_.a,null,k.a.createElement(q.a,{id:"dialog-description"},"One or more of your preset rules contains a blank value"),k.a.createElement(G.a,null,k.a.createElement(_e,{color:"primary",onClick:this.hideErrorDialog},"Okay")))),k.a.createElement(U.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.showSnackbar,autoHideDuration:8e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:k.a.createElement("span",{id:"message-id"},k.a.createElement("b",null,"Saved!"),' Please find your updated helm upgrade command in the "Agents" section...'),action:[k.a.createElement(z.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},k.a.createElement(Y.a,null))]}))}}]),a}(k.a.Component);Me.contextType=Z.a;t.default=Me}}]);
//# sourceMappingURL=9.77e07995.chunk.js.map